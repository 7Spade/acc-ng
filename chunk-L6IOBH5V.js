import{m as me,n as de,o as _e}from"./chunk-YQMWIKIV.js";import{a as Yt,b as te,c as oe,d as re}from"./chunk-EEHI3C5M.js";import{h as qt}from"./chunk-DFCVB4WR.js";import{b as ee,c as ae,d as le,e as ce}from"./chunk-JHA3YXM4.js";import{d as Kt}from"./chunk-EAEFT3AC.js";import{e as Xt,f as Zt,g as Jt,h as ne,j as ie}from"./chunk-PWX5YMVJ.js";import{Ab as p,Bb as Dt,Be as A,Cb as Nt,Cc as Mt,Db as Et,Dc as it,Ea as Q,Eb as Ft,Ec as It,Ed as ot,Eg as Gt,F as X,Fb as J,Gb as K,Gg as Ht,Ha as i,Hg as Wt,I as zt,Ia as ht,Kb as Y,Lc as Pt,Ma as F,Mb as G,Nd as At,Oa as B,Oc as wt,Pa as St,Pb as m,Qb as O,Rb as f,Sc as Bt,U as ft,Ua as u,V as xt,Va as Tt,Vd as $t,X as gt,Xh as pe,Yh as se,ba as vt,cc as bt,db as C,e as Ct,ea as E,fb as z,hb as S,hc as tt,ib as x,jb as g,jc as et,ka as P,kb as c,la as w,lb as r,lc as nt,mb as a,nb as y,ng as jt,o as I,og as Vt,p as h,pg as Lt,qa as yt,qg as Qt,ra as L,rb as T,sb as D,sd as kt,ub as U,wa as Z,wd as Ot,xb as k,xg as Ut,ze as Rt}from"./chunk-WYL5GNHD.js";import{g as q,i as V}from"./chunk-57BLH6QZ.js";var xe=["*"];function ge(t,n){t&1&&Nt(0)}function ve(t,n){if(t&1&&(T(0),m(1),D()),t&2){let e=p(3);i(),O(e.nzTitle)}}function ye(t,n){if(t&1&&(r(0,"div",2),u(1,ve,2,1,"ng-container",4),a()),t&2){let e=p(2);i(),c("nzStringTemplateOutlet",e.nzTitle)}}function he(t,n){if(t&1&&(T(0),m(1),D()),t&2){let e=p(3);i(),O(e.nzExtra)}}function Se(t,n){if(t&1&&(r(0,"div",3),u(1,he,2,1,"ng-container",4),a()),t&2){let e=p(2);i(),c("nzStringTemplateOutlet",e.nzExtra)}}function Te(t,n){if(t&1&&(r(0,"div",0),C(1,ye,2,1,"div",2),C(2,Se,2,1,"div",3),a()),t&2){let e=p();i(),z(e.nzTitle?1:-1),i(),z(e.nzExtra?2:-1)}}function De(t,n){if(t&1&&(T(0),m(1),D()),t&2){let e=p(2).$implicit;i(),f(" ",e.title," ")}}function Ne(t,n){}function Ee(t,n){if(t&1&&(r(0,"td",6)(1,"div",7)(2,"span",8),u(3,De,2,1,"ng-container",4),a(),r(4,"span",9),u(5,Ne,0,0,"ng-template",10),a()()()),t&2){let e=p().$implicit,l=p(3);c("colSpan",e.span),i(2),G("ant-descriptions-item-no-colon",!l.nzColon),i(),c("nzStringTemplateOutlet",e.title),i(2),c("ngTemplateOutlet",e.content)}}function Fe(t,n){if(t&1&&(T(0),m(1),D()),t&2){let e=p(2).$implicit;i(),f(" ",e.title," ")}}function be(t,n){}function Me(t,n){if(t&1&&(r(0,"td",8),u(1,Fe,2,1,"ng-container",4),a(),r(2,"td",11),u(3,be,0,0,"ng-template",10),a()),t&2){let e=p().$implicit;i(),c("nzStringTemplateOutlet",e.title),i(),c("colSpan",e.span*2-1),i(),c("ngTemplateOutlet",e.content)}}function Ie(t,n){if(t&1&&C(0,Ee,6,5,"td",6)(1,Me,4,3),t&2){let e=p(3);z(e.nzBordered?1:0)}}function Pe(t,n){if(t&1&&(r(0,"tr",5),x(1,Ie,2,1,null,null,S),a()),t&2){let e=n.$implicit;i(),g(e)}}function we(t,n){if(t&1&&x(0,Pe,3,0,"tr",5,S),t&2){let e=p();g(e.itemMatrix)}}function Be(t,n){if(t&1&&(T(0),m(1),D()),t&2){let e=p().$implicit;i(),f(" ",e.title," ")}}function ke(t,n){if(t&1&&(r(0,"td",6)(1,"div",7)(2,"span",8),u(3,Be,2,1,"ng-container",4),a()()()),t&2){let e=n.$implicit,l=p(4);c("colSpan",e.span),i(2),G("ant-descriptions-item-no-colon",!l.nzColon),i(),c("nzStringTemplateOutlet",e.title)}}function Oe(t,n){}function Ae(t,n){if(t&1&&(r(0,"td",6)(1,"div",7)(2,"span",9),u(3,Oe,0,0,"ng-template",10),a()()()),t&2){let e=n.$implicit;c("colSpan",e.span),i(3),c("ngTemplateOutlet",e.content)}}function $e(t,n){if(t&1&&(r(0,"tr",5),x(1,ke,4,4,"td",6,S),a(),r(3,"tr",5),x(4,Ae,4,2,"td",6,S),a()),t&2){let e=n.$implicit;i(),g(e),i(3),g(e)}}function Re(t,n){if(t&1&&x(0,$e,6,0,null,null,S),t&2){let e=p(2);g(e.itemMatrix)}}function je(t,n){if(t&1&&(T(0),m(1),D()),t&2){let e=p().$implicit;i(),f(" ",e.title," ")}}function Ve(t,n){if(t&1&&(r(0,"td",12),u(1,je,2,1,"ng-container",4),a()),t&2){let e=n.$implicit;c("colSpan",e.span),i(),c("nzStringTemplateOutlet",e.title)}}function Le(t,n){}function Qe(t,n){if(t&1&&(r(0,"td",11),u(1,Le,0,0,"ng-template",10),a()),t&2){let e=n.$implicit;c("colSpan",e.span),i(),c("ngTemplateOutlet",e.content)}}function Ue(t,n){if(t&1&&(r(0,"tr",5),x(1,Ve,2,2,"td",12,S),a(),r(3,"tr",5),x(4,Qe,2,2,"td",11,S),a()),t&2){let e=n.$implicit;i(),g(e),i(3),g(e)}}function Ge(t,n){if(t&1&&x(0,Ue,6,0,null,null,S),t&2){let e=p(2);g(e.itemMatrix)}}function He(t,n){if(t&1&&C(0,Re,2,0)(1,Ge,2,0),t&2){let e=p();z(e.nzBordered?1:0)}}var rt=(()=>{class t{content;nzSpan=1;nzTitle="";inputChange$=new Ct;ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}static \u0275fac=function(l){return new(l||t)};static \u0275cmp=B({type:t,selectors:[["nz-descriptions-item"]],viewQuery:function(l,_){if(l&1&&Ft(ht,7),l&2){let N;J(N=K())&&(_.content=N.first)}},inputs:{nzSpan:[2,"nzSpan","nzSpan",It],nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[Z],ngContentSelectors:xe,decls:1,vars:0,template:function(l,_){l&1&&(Dt(),Tt(0,ge,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return t})(),We="descriptions",qe={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},at=(()=>{var v;let t,n=[],e=[],l,_=[],N=[],lt,ct=[],pt=[],st,mt=[],dt=[];return v=class{nzConfigService=E(Rt);cdr=E(Mt);breakpointService=E(Jt);directionality=E(At);destroyRef=E(yt);_nzModuleName=We;items;nzBordered=h(this,n,!1);nzLayout=(h(this,e),"horizontal");nzColumn=h(this,_,qe);nzSize=(h(this,N),h(this,ct,"default"));nzTitle=(h(this,pt),"");nzExtra;nzColon=h(this,mt,!0);itemMatrix=(h(this,dt),[]);realColumn=3;dir="ltr";breakpoint=Xt.md;ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(ot(this.destroyRef)).subscribe(d=>{this.dir=d})}ngOnChanges(d){d.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){let d=this.items.changes.pipe(ft(this.items));X(d,d.pipe(xt(()=>X(...this.items.map(o=>o.inputChange$)).pipe(zt(16)))),this.breakpointService.subscribe(Zt).pipe(gt(o=>this.breakpoint=o))).pipe(ot(this.destroyRef)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}prepareMatrix(){if(!this.items)return;let d=[],o=0,s=this.realColumn=this.getColumn(),$=this.items.toArray(),M=$.length,_t=[],ut=()=>{_t.push(d),d=[],o=0};for(let R=0;R<M;R++){let ze=$[R],{nzTitle:H,content:W,nzSpan:j}=ze;o+=j,o>=s?(o>s&&$t(`"nzColumn" is ${s} but we have row length ${o}`),d.push({title:H,content:W,span:s-(o-j)}),ut()):R===M-1?(d.push({title:H,content:W,span:s-(o-j)}),ut()):d.push({title:H,content:W,span:j})}this.itemMatrix=_t}getColumn(){return typeof this.nzColumn!="number"?this.nzColumn[this.breakpoint]:this.nzColumn}},(()=>{let d=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[A()],l=[A()],lt=[A()],st=[A()],I(null,null,t,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:o=>"nzBordered"in o,get:o=>o.nzBordered,set:(o,s)=>{o.nzBordered=s}},metadata:d},n,e),I(null,null,l,{kind:"field",name:"nzColumn",static:!1,private:!1,access:{has:o=>"nzColumn"in o,get:o=>o.nzColumn,set:(o,s)=>{o.nzColumn=s}},metadata:d},_,N),I(null,null,lt,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:o=>"nzSize"in o,get:o=>o.nzSize,set:(o,s)=>{o.nzSize=s}},metadata:d},ct,pt),I(null,null,st,{kind:"field",name:"nzColon",static:!1,private:!1,access:{has:o=>"nzColon"in o,get:o=>o.nzColon,set:(o,s)=>{o.nzColon=s}},metadata:d},mt,dt),d&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})})(),q(v,"\u0275fac",function(o){return new(o||v)}),q(v,"\u0275cmp",B({type:v,selectors:[["nz-descriptions"]],contentQueries:function(o,s,$){if(o&1&&Et($,rt,4),o&2){let M;J(M=K())&&(s.items=M)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(o,s){o&2&&G("ant-descriptions-bordered",s.nzBordered)("ant-descriptions-middle",s.nzSize==="middle")("ant-descriptions-small",s.nzSize==="small")("ant-descriptions-rtl",s.dir==="rtl")},inputs:{nzBordered:[2,"nzBordered","nzBordered",it],nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:[2,"nzColon","nzColon",it]},exportAs:["nzDescriptions"],features:[Z],decls:6,vars:3,consts:[[1,"ant-descriptions-header"],[1,"ant-descriptions-view"],[1,"ant-descriptions-title"],[1,"ant-descriptions-extra"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-row"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(o,s){o&1&&(C(0,Te,3,2,"div",0),r(1,"div",1)(2,"table")(3,"tbody"),C(4,we,2,0),C(5,He,2,1),a()()()),o&2&&(z(s.nzTitle||s.nzExtra?0:-1),i(4),z(s.nzLayout==="horizontal"?4:-1),i(),z(s.nzLayout==="vertical"?5:-1))},dependencies:[Qt,Lt,Pt],encapsulation:2,changeDetection:0})),v})(),ue=(()=>{class t{static \u0275fac=function(l){return new(l||t)};static \u0275mod=St({type:t});static \u0275inj=vt({imports:[at]})}return t})();var Ze=()=>[16,16],Je=(t,n)=>n.id;function Ke(t,n){t&1&&(r(0,"nz-spin",3),y(1,"div",4),a())}function Ye(t,n){if(t&1){let e=U();r(0,"div",20)(1,"button",21),k("click",function(){P(e);let _=p(2);return w(_.editPartner())}),y(2,"nz-icon",22),m(3," \u7DE8\u8F2F "),a(),r(4,"button",23),k("click",function(){P(e);let _=p(2);return w(_.deletePartner())}),y(5,"nz-icon",24),m(6," \u522A\u9664 "),a()()}}function tn(t,n){if(t&1&&(r(0,"nz-descriptions-item",12)(1,"a",25),m(2),y(3,"nz-icon",26),a()()),t&2){let e=p(2);c("nzSpan",2),i(),c("href",e.partner().website,Q),i(),f(" ",e.partner().website," ")}}function en(t,n){if(t&1&&(r(0,"nz-descriptions-item",13),m(1),a()),t&2){let e=p(2);c("nzSpan",2),i(),f(" ",e.partner().address," ")}}function nn(t,n){t&1&&(r(0,"nz-tag",35),m(1,"\u4E3B\u8981\u806F\u7D61\u4EBA"),a())}function on(t,n){if(t&1&&(r(0,"div",30),y(1,"nz-icon",36),r(2,"span",32),m(3,"\u96FB\u8A71\uFF1A"),a(),r(4,"a",34),m(5),a()()),t&2){let e=p().$implicit;i(4),c("href","tel:"+e.phone,Q),i(),f(" ",e.phone," ")}}function rn(t,n){if(t&1&&(r(0,"div",27)(1,"nz-card",28),u(2,nn,2,0,"ng-template",null,1,nt),r(4,"div",29)(5,"div",30),y(6,"nz-icon",31),r(7,"span",32),m(8,"\u8077\u4F4D\uFF1A"),a(),r(9,"span"),m(10),a()(),r(11,"div",30),y(12,"nz-icon",33),r(13,"span",32),m(14,"\u90F5\u4EF6\uFF1A"),a(),r(15,"a",34),m(16),a()(),C(17,on,6,2,"div",30),a()()()),t&2){let e=n.$implicit,l=Y(3);c("nzXs",24)("nzSm",12)("nzLg",8),i(),c("nzTitle",e.name)("nzExtra",e.isPrimary?l:void 0),i(9),O(e.role),i(5),c("href","mailto:"+e.email,Q),i(),f(" ",e.email," "),i(),z(e.phone?17:-1)}}function an(t,n){if(t&1&&(r(0,"div",15),x(1,rn,18,9,"div",27,Je),a()),t&2){let e=p(2);c("nzGutter",bt(1,Ze)),i(),g(e.partner().contacts)}}function ln(t,n){t&1&&y(0,"nz-empty",16)}function cn(t,n){if(t&1){let e=U();r(0,"nz-card",5),u(1,Ye,7,0,"ng-template",null,0,nt),r(3,"nz-descriptions",6)(4,"nz-descriptions-item",7)(5,"nz-tag",8),m(6),a()(),r(7,"nz-descriptions-item",9),m(8),a(),r(9,"nz-descriptions-item",10),m(10),tt(11,"date"),a(),r(12,"nz-descriptions-item",11),m(13),tt(14,"date"),a(),C(15,tn,4,3,"nz-descriptions-item",12),C(16,en,2,2,"nz-descriptions-item",13),a()(),r(17,"nz-card",14),C(18,an,3,2,"div",15)(19,ln,1,0,"nz-empty",16),a(),r(20,"div",17)(21,"button",18),k("click",function(){P(e);let _=p();return w(_.goBack())}),y(22,"nz-icon",19),m(23," \u8FD4\u56DE\u5217\u8868 "),a()()}if(t&2){let e=Y(2),l=p();c("nzTitle",l.partner().companyName)("nzExtra",e),i(3),c("nzColumn",2),i(2),c("nzColor",l.getStatusColor(l.partner().status)),i(),f(" ",l.getStatusText(l.partner().status)," "),i(2),f(" ",l.partner().industry," "),i(2),f(" ",et(11,11,l.partner().joinedDate,"yyyy\u5E74MM\u6708dd\u65E5")," "),i(3),f(" ",et(14,14,l.partner().createdAt,"yyyy\u5E74MM\u6708dd\u65E5 HH:mm")," "),i(2),z(l.partner().website?15:-1),i(),z(l.partner().address?16:-1),i(2),z(l.partner().contacts.length>0?18:19)}}function pn(t,n){if(t&1){let e=U();r(0,"nz-card")(1,"nz-empty",37)(2,"div",38)(3,"button",39),k("click",function(){P(e);let _=p();return w(_.goBack())}),m(4," \u8FD4\u56DE\u5217\u8868 "),a()()()()}}var b=class b{constructor(n,e,l,_,N){this.partnerService=n;this.router=e;this.route=l;this.modal=_;this.message=N;this.partner=L(null);this.loading=L(!1);this.partnerId=L(null);this.getPrimaryContact=de}ngOnInit(){return V(this,null,function*(){let n=this.route.snapshot.paramMap.get("id");n?(this.partnerId.set(n),yield this.loadPartner(n)):(this.message.error("\u7121\u6548\u7684\u5408\u4F5C\u5925\u4F34 ID"),this.goBack())})}loadPartner(n){return V(this,null,function*(){this.loading.set(!0);try{let e=yield this.partnerService.getPartnerById(n);this.partner.set(e),e||this.message.error("\u627E\u4E0D\u5230\u6307\u5B9A\u7684\u5408\u4F5C\u5925\u4F34")}catch(e){console.error("Load partner error:",e),this.message.error("\u8F09\u5165\u5408\u4F5C\u5925\u4F34\u8CC7\u6599\u5931\u6557")}finally{this.loading.set(!1)}})}editPartner(){let n=this.partnerId();n&&this.router.navigate(["/business-partners",n,"edit"])}deletePartner(){let n=this.partner();n&&this.modal.confirm({nzTitle:"\u78BA\u8A8D\u522A\u9664",nzContent:`\u78BA\u5B9A\u8981\u522A\u9664\u5408\u4F5C\u5925\u4F34\u300C${n.companyName}\u300D\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002`,nzOkText:"\u522A\u9664",nzOkType:"primary",nzOkDanger:!0,nzCancelText:"\u53D6\u6D88",nzOnOk:()=>V(this,null,function*(){try{yield this.partnerService.deletePartner(n.id),this.message.success("\u5408\u4F5C\u5925\u4F34\u5DF2\u6210\u529F\u522A\u9664"),this.goBack()}catch(e){console.error("Delete partner error:",e),this.message.error("\u522A\u9664\u5408\u4F5C\u5925\u4F34\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66")}})})}goBack(){this.router.navigate(["/business-partners"])}getStatusColor(n){return me(n)}getStatusText(n){return{Active:"\u6D3B\u8E8D",Inactive:"\u975E\u6D3B\u8E8D",Pending:"\u5F85\u5BE9\u6838"}[n]||n}};b.\u0275fac=function(e){return new(e||b)(F(_e),F(Ot),F(kt),F(qt),F(Kt))},b.\u0275cmp=B({type:b,selectors:[["app-partner-detail"]],decls:4,vars:1,consts:[["cardExtra",""],["primaryBadge",""],[1,"partner-detail-container"],["nzTip","\u8F09\u5165\u4E2D...",1,"loading-container"],[1,"loading-content"],[1,"mb-4",3,"nzTitle","nzExtra"],["nzBordered","",3,"nzColumn"],["nzTitle","\u516C\u53F8\u72C0\u614B"],[3,"nzColor"],["nzTitle","\u884C\u696D\u985E\u5225"],["nzTitle","\u52A0\u5165\u65E5\u671F"],["nzTitle","\u5EFA\u7ACB\u6642\u9593"],["nzTitle","\u7DB2\u7AD9",3,"nzSpan"],["nzTitle","\u5730\u5740",3,"nzSpan"],["nzTitle","\u806F\u7D61\u4EBA\u8CC7\u8A0A"],["nz-row","",3,"nzGutter"],["nzNotFoundImage","simple","nzNotFoundContent","\u5C1A\u672A\u65B0\u589E\u806F\u7D61\u4EBA"],[1,"mt-4","text-center"],["nz-button","","nzType","default",1,"min-w-24",3,"click"],["nzType","arrow-left"],[1,"flex","gap-2"],["nz-button","","nzType","primary",1,"flex","items-center",3,"click"],["nzType","edit"],["nz-button","","nzDanger","",1,"flex","items-center",3,"click"],["nzType","delete"],["target","_blank",1,"text-blue-500","hover:text-blue-700",3,"href"],["nzType","link",1,"ml-1"],["nz-col","",3,"nzXs","nzSm","nzLg"],["nzSize","small",1,"contact-card",3,"nzTitle","nzExtra"],[1,"contact-info"],[1,"contact-item"],["nzType","user",1,"contact-icon"],[1,"contact-label"],["nzType","mail",1,"contact-icon"],[1,"text-blue-500","hover:text-blue-700",3,"href"],["nzColor","blue",1,"text-xs"],["nzType","phone",1,"contact-icon"],["nzNotFoundImage","simple","nzNotFoundContent","\u627E\u4E0D\u5230\u6307\u5B9A\u7684\u5408\u4F5C\u5925\u4F34"],["nz-empty-footer",""],["nz-button","","nzType","primary",3,"click"]],template:function(e,l){e&1&&(r(0,"div",2),C(1,Ke,2,0,"nz-spin",3)(2,cn,24,17)(3,pn,5,0,"nz-card"),a()),e&2&&(i(),z(l.loading()?1:l.partner()?2:3))},dependencies:[Bt,se,pe,ue,at,rt,te,Yt,Wt,Ht,Ut,Gt,Vt,jt,re,oe,ie,ne,ce,le,ae,ee,wt],styles:[".partner-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.loading-content[_ngcontent-%COMP%]{width:100%;height:200px}.contact-card[_ngcontent-%COMP%]{height:100%;border:1px solid #f0f0f0;transition:all .3s ease}.contact-card[_ngcontent-%COMP%]:hover{border-color:#1890ff;box-shadow:0 2px 8px #0000001a}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.contact-icon[_ngcontent-%COMP%]{color:#666;width:16px}.contact-label[_ngcontent-%COMP%]{color:#666;min-width:40px}.min-w-24[_ngcontent-%COMP%]{min-width:6rem}@media (max-width: 768px){.partner-detail-container[_ngcontent-%COMP%]{padding:16px}.contact-item[_ngcontent-%COMP%]{font-size:13px}}"],changeDetection:0});var Ce=b;export{Ce as a};
