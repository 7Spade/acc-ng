import{c as it,d as Fi,g as er,h as tr}from"./chunk-3CPDF5HJ.js";import"./chunk-QB3BZJ2K.js";import"./chunk-VAGS5EVQ.js";import{a as Pi,b as Oi}from"./chunk-U2UM2O34.js";import{a as $a,b as jt}from"./chunk-6I6IIJ6R.js";import{a as Xe,c as Ii,d as Bi}from"./chunk-KRJPISBN.js";import"./chunk-AO65FQTJ.js";import{d as Re}from"./chunk-LTOHUVYO.js";import{$ as Le,A as yt,Ab as nt,Ba as Te,C as xt,Cb as Wt,D as Ta,Da as Dt,E as ka,Ea as Ra,F as vt,Fa as La,G as mn,Ga as Mt,H as Me,I as pn,Ia as xe,J as Ke,Ja as ve,Ka as et,La as dn,Ma as un,Na as fn,Oa as gn,P as zt,Pa as ke,Q as ye,Qa as Ha,R as yi,Ra as tt,S as xi,V as vi,Va as Tt,Xa as qa,Y as zi,Ya as Qa,Z as bt,Za as Xa,_ as bi,_a as kt,aa as Si,ab as Za,ba as wi,bb as Ya,cb as Et,da as Di,db as Ua,e as rn,ea as Mi,eb as Nt,f as ht,fa as Ge,g as Ct,h as ln,ha as Ti,hb as Ft,ia as je,j as _i,ja as Ea,ka as Na,kb as Pt,l as _t,la as Fa,m as sn,ma as Pa,mb as Ot,na as Oa,nb as ki,o as wa,oa as Ia,pa as Ba,pb as It,qa as Je,r as Da,sa as St,sb as Ka,ta as Wa,ua as Aa,v as Ma,va as wt,w as De,wb as Ei,x as Ue,xa as cn,xb as Ni,yb as Bt,za as Va,zb as Ja}from"./chunk-R2TQUHLO.js";import{$ as ae,$b as pe,Aa as na,Ab as aa,Ac as Z,Ah as za,B as Kt,Bb as ct,Bc as V,C as Jo,Cb as mt,Cc as pa,Cd as ga,Db as pt,Dh as ba,Ea as r,Ec as ca,F as Jt,G as ii,Gc as si,Gd as ha,Hb as N,Hc as nn,Hd as on,I as be,Ia as ai,Ib as Fe,Ic as mi,Ig as di,J as en,Jb as I,Kb as we,Kh as gi,L as po,La as b,Lb as ra,Lc as da,Ma as L,Mb as m,N as Ce,Nb as v,Nc as ua,Nh as gt,Ob as O,Pa as Be,Pb as la,Pc as k,Pd as an,Qb as fe,Qh as hi,Ra as h,Rb as ge,Rh as Ci,Sb as he,Ta as te,Td as ci,U as Ee,Ua as Gn,Uh as Sa,V as ea,Wb as co,Xb as Hn,Za as ia,_a as Lt,_b as ri,aa as R,ab as C,ac as We,b as Uo,ba as oi,bc as li,bi as He,cb as _,cc as sa,ci as $e,da as g,db as me,dg as re,di as Ga,eb as oa,ec as S,eg as U,ei as ja,f as Ko,fb as j,fc as M,fg as ne,gb as H,gc as Gt,gg as ie,gh as _a,gi as qe,hb as p,hh as ui,hi as Qe,ia as y,ib as a,ic as B,ih as fi,ja as x,jb as l,jc as ma,jh as Ve,kb as d,lb as ce,mb as de,mc as Q,mg as dt,na as Ln,ng as Ae,oa as ta,ob as F,pa as se,pb as P,qb as jn,rb as D,s as q,t as mo,ta as Ne,td as fa,tg as ut,ua as Oe,ub as z,ud as pi,uh as ya,va as tn,vg as Ye,vh as xa,w as Y,wg as _e,xb as c,yb as lt,yh as ft,za as Ie,zb as st,zc as X,zg as Ca,zh as va}from"./chunk-GG7EQGVV.js";import{a as $,b as Se}from"./chunk-57BLH6QZ.js";function Rr(t,i){if(t&1&&(F(0),a(1,"h4",2),m(2),l(),P()),t&2){let e=c();r(2),v(e.title)}}function Lr(t,i){t&1&&d(0,"nz-skeleton")}var Gr=41,$n=(()=>{class t extends Xe{title;color="rgba(24, 144, 255, 0.85)";height=0;padding="auto";data=[];autoLabel=!0;interaction="none";clickItem=new te;getHeight(){return this.title?this.height-Gr:this.height}install(){let{node:e,padding:n,interaction:o,theme:s}=this,u=e.nativeElement,f=this._chart=new this.winG2.Chart({container:u,autoFit:!0,height:this.getHeight(),padding:n,theme:s});this.updatelabel(),f.axis("y",{title:null,line:null,tickLine:null}),f.scale({x:{type:"cat"},y:{min:0}}),f.tooltip({showTitle:!1}),o!=="none"&&f.interaction(o),f.legend(!1),f.interval().position("x*y").color("x*y",(T,W)=>{let w=this.data.find(E=>E.x===T&&E.y===W);return w&&w.color?w.color:this.color}).tooltip("x*y",(T,W)=>({name:T,value:W})),f.on("interval:click",T=>{this.ngZone.run(()=>this.clickItem.emit({item:T.data?.data,ev:T}))}),this.ready.next(f),this.changeData(),f.render(),this.installResizeEvent()}changeData(){let{_chart:e,data:n}=this;!e||!Array.isArray(n)||n.length<=0||e.changeData(n)}updatelabel(){let{node:e,data:n,_chart:o}=this,s=e.nativeElement.clientWidth,u=n.length*30;o.axis("x",s>u).render()}installResizeEvent(){!this.autoLabel||this.resize$||(this.resize$=Kt(window,"resize").pipe(ea(this.destroy$),Jt(()=>!!this._chart),en(200)).subscribe(()=>this.ngZone.runOutsideAngular(()=>this.updatelabel())))}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Oe(t)))(o||t)}})();static \u0275cmp=b({type:t,selectors:[["g2-bar"]],hostVars:2,hostBindings:function(n,o){n&2&&Fe("height",o.height,"px")},inputs:{title:"title",color:"color",height:[2,"height","height",V],padding:"padding",data:"data",autoLabel:[2,"autoLabel","autoLabel",Z],interaction:"interaction"},outputs:{clickItem:"clickItem"},exportAs:["g2Bar"],features:[Be],decls:4,vars:2,consts:[["container",""],[4,"nzStringTemplateOutlet"],[2,"margin-bottom","20px"]],template:function(n,o){n&1&&(h(0,Rr,3,1,"ng-container",1),C(1,Lr,1,0,"nz-skeleton"),d(2,"div",null,0)),n&2&&(p("nzStringTemplateOutlet",o.title),r(),_(o.loaded?-1:1))},dependencies:[ne,He],encapsulation:2,changeDetection:0})}return t})(),jr=[$n],Wi=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,ie,$e,jr]})}return t})();var Hr=["*"],$r=()=>({padding:"20px 24px 8px 24px"});function qr(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c();r(),v(e.avatar)}}function Qr(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.title)}}function Xr(t,i){if(t&1&&(a(0,"span",7),h(1,Qr,2,1,"ng-container",4),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.title)}}function Zr(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.action)}}function Yr(t,i){if(t&1&&(a(0,"span",8),h(1,Zr,2,1,"ng-container",4),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.action)}}function Ur(t,i){if(t&1&&d(0,"p",9),t&2){let e=c();p("innerHTML",e.total,Ie)}}function Kr(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.footer)}}function Jr(t,i){if(t&1&&(a(0,"div",11),h(1,Kr,2,1,"ng-container",4),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.footer)}}var uo=(()=>{class t{cdr=g(X);bordered=!1;avatar;title;action;total="";_height="auto";_orgHeight;set contentHeight(e){this._orgHeight=e,this._height=typeof e=="number"?this._height=`${e}px`:e}footer;loading=!1;ngOnChanges(){this.cdr.detectChanges()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["g2-card"]],hostVars:2,hostBindings:function(n,o){n&2&&I("g2-card",!0)},inputs:{bordered:[2,"bordered","bordered",Z],avatar:"avatar",title:"title",action:"action",total:"total",contentHeight:"contentHeight",footer:"footer",loading:[2,"loading","loading",Z]},exportAs:["g2Card"],features:[Ne],ngContentSelectors:Hr,decls:14,vars:13,consts:[[3,"nzBodyStyle","nzBordered"],[3,"nzSpinning"],[1,"g2-card__top"],[1,"g2-card__avatar"],[4,"nzStringTemplateOutlet"],[1,"g2-card__meta-wrap"],[1,"g2-card__meta"],[1,"g2-card__meta-title"],[1,"g2-card__meta-action"],[1,"g2-card__total",3,"innerHTML"],[1,"g2-card__desc"],[1,"g2-card__footer"]],template:function(n,o){n&1&&(lt(),a(0,"nz-card",0)(1,"nz-spin",1)(2,"div",2)(3,"div",3),h(4,qr,2,1,"ng-container",4),l(),a(5,"div",5)(6,"div",6),C(7,Xr,2,1,"span",7),C(8,Yr,2,1,"span",8),l(),C(9,Ur,1,1,"p",9),l()(),a(10,"div",10)(11,"div"),st(12),l()(),C(13,Jr,2,1,"div",11),l()()),n&2&&(p("nzBodyStyle",pe(12,$r))("nzBordered",o.bordered),r(),p("nzSpinning",o.loading),r(3),p("nzStringTemplateOutlet",o.avatar),r(3),_(o.title?7:-1),r(),_(o.action?8:-1),r(),_(o.total?9:-1),r(),Fe("height",o._height),r(),I("g2-card__fixed",!!o._orgHeight),r(2),_(o.footer?13:-1))},dependencies:[qe,Ti,ne],encapsulation:2,changeDetection:0})}return t})(),el=[uo],ir=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,Qe,je,ie,el]})}return t})();var nl=t=>({left:t}),or=t=>({"background-color":t}),il=(t,i,e)=>({"background-color":t,width:i,height:e}),ar=(()=>{class t{locale=g(hi).valueSignal("miniProgress");cdr=g(X);color="#1890FF";target;percent;strokeWidth;fixNum(e){return Math.min(Math.max(V(e),0),100)}ngOnChanges(){this.target=this.fixNum(this.target),this.percent=this.fixNum(this.percent),this.cdr.detectChanges()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["g2-mini-progress"]],hostVars:2,hostBindings:function(n,o){n&2&&I("g2-mini-progress",!0)},inputs:{color:"color",target:[2,"target","target",V],percent:[2,"percent","percent",V],strokeWidth:[2,"strokeWidth","strokeWidth",V]},exportAs:["g2MiniProgress"],features:[Ne],decls:5,vars:19,consts:[["nz-tooltip","",1,"g2-mini-progress__target",3,"nzTooltipTitle"],[1,"g2-mini-progress__target-item"],[1,"g2-mini-progress__wrap"],[1,"g2-mini-progress__value"]],template:function(n,o){n&1&&(a(0,"div",0),d(1,"span",1)(2,"span",1),l(),a(3,"div",2),d(4,"div",3),l()),n&2&&(we(We(9,nl,o.target+"%")),p("nzTooltipTitle",o.locale().targetSuffix+o.target+"%"),r(),we(We(11,or,o.color)),r(),we(We(13,or,o.color)),r(2),we(sa(15,il,o.color,o.percent+"%",o.strokeWidth+"px")))},dependencies:[pn],encapsulation:2,changeDetection:0})}return t})();var rr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,Ci,Ke]})}return t})();function al(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.title)}}function rl(t,i){if(t&1&&(a(0,"div",0),h(1,al,2,1,"ng-container",4),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.title)}}function ll(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.subTitle)}}function sl(t,i){if(t&1&&(a(0,"div",1),h(1,ll,2,1,"ng-container",4),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.subTitle)}}function ml(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c();r(),v(e.total)}}function pl(t,i){if(t&1&&(a(0,"em",5),m(1),l()),t&2){let e=c();r(),v(e.suffix)}}function cl(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.subTotal)}}function dl(t,i){if(t&1&&d(0,"nz-icon",7),t&2){let e=c(2);p("nzType",Hn("caret-",e.status))}}function ul(t,i){if(t&1&&(a(0,"span",6),h(1,cl,2,1,"ng-container",4),C(2,dl,1,2,"nz-icon",7),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.subTotal),r(),_(e.status?2:-1)}}var Ai=(()=>{class t{title;subTitle;total;subTotal;suffix;status;theme="light";gap=8;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["number-info"]],hostVars:6,hostBindings:function(n,o){n&2&&I("number-info",!0)("number-info__light",o.theme==="light")("number-info__default",o.theme==="default")},inputs:{title:"title",subTitle:"subTitle",total:"total",subTotal:"subTotal",suffix:"suffix",status:"status",theme:"theme",gap:[2,"gap","gap",V]},exportAs:["numberInfo"],decls:7,vars:7,consts:[[1,"number-info__title"],[1,"number-info__title-sub"],[1,"number-info__value"],[1,"number-info__value-text"],[4,"nzStringTemplateOutlet"],[1,"number-info__value-suffix"],[1,"number-info__value-text","number-info__value-sub"],[3,"nzType"]],template:function(n,o){n&1&&(C(0,rl,2,1,"div",0),C(1,sl,2,1,"div",1),a(2,"div",2)(3,"span",3),h(4,ml,2,1,"ng-container",4),C(5,pl,2,1,"em",5),l(),C(6,ul,3,2,"span",6),l()),n&2&&(_(o.title?0:-1),r(),_(o.subTitle?1:-1),r(),Fe("margin-top",o.gap,"px"),r(2),p("nzStringTemplateOutlet",o.total),r(),_(o.suffix?5:-1),r(),_(o.status||o.subTotal?6:-1))},dependencies:[ne,re],encapsulation:2,changeDetection:0})}return t})();var Vi=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,U,ie]})}return t})();var fl=t=>({"background-color":t});function gl(t,i){t&1&&d(0,"nz-skeleton")}function hl(t,i){if(t&1&&(F(0),d(1,"div",7),P()),t&2){let e=c(3);r(),p("innerHTML",e.subTitle,Ie)}}function Cl(t,i){if(t&1&&(a(0,"h4",4),h(1,hl,2,1,"ng-container",6),l()),t&2){let e=c(2);r(),p("nzStringTemplateOutlet",e.subTitle)}}function _l(t,i){if(t&1&&(F(0),d(1,"div",7),P()),t&2){let e=c(3);r(),p("innerHTML",e.total,Ie)}}function yl(t,i){if(t&1&&(a(0,"div",5),h(1,_l,2,1,"ng-container",6),l()),t&2){let e=c(2);r(),p("nzStringTemplateOutlet",e.total)}}function xl(t,i){if(t&1&&(a(0,"div",2),C(1,Cl,2,1,"h4",4),C(2,yl,2,1,"div",5),l()),t&2){let e=c();r(),_(e.subTitle?1:-1),r(),_(e.total?2:-1)}}function vl(t,i){if(t&1){let e=D();a(0,"li",9),z("click",function(){let o=y(e).$index,s=c(2);return x(s._click(o))}),d(1,"span",10),a(2,"span",11),m(3),l(),d(4,"nz-divider",12),a(5,"span",13),m(6),l(),d(7,"span",14),l()}if(t&2){let e=i.$implicit,n=c(2);r(),we(We(5,fl,e.checked?e.color:"#aaa")),r(2),v(e.x),r(3),O("",e.percent,"%"),r(),p("innerHTML",n.valueFormat?n.valueFormat(e.y):e.y,Ie)}}function zl(t,i){if(t&1&&(a(0,"ul",3),j(1,vl,8,7,"li",8,me),l()),t&2){let e=c();r(),H(e.legendData)}}var qn=(()=>{class t extends Xe{percentColor;legendData=[];isPercent=!1;animate=!0;color="rgba(24, 144, 255, 0.85)";subTitle;total;height=0;hasLegend=!1;inner=.75;padding=[12,0,12,0];percent;tooltip=!0;lineWidth=0;blockMaxWidth=380;select=!0;valueFormat;data=[];colors;interaction="none";ratio={text:"\u5360\u6BD4",inverse:"\u53CD\u6BD4",color:"",inverseColor:"#F0F2F5"};clickItem=new te;block=!1;fixData(){let{percent:e,color:n}=this;if(this.isPercent=e!=null,!this.isPercent)return;this.select=!1,this.tooltip=!1;let{text:o,inverse:s,color:u,inverseColor:f}=this.ratio;this.percentColor=T=>T===o?u||n:f,this.data=[{x:o,y:e},{x:s,y:100-e}]}updateBlock(){this.block=this._chart&&this.hasLegend&&this.el.nativeElement.clientWidth<=this.blockMaxWidth,this.cdr.detectChanges()}install(){let{node:e,height:n,padding:o,tooltip:s,inner:u,hasLegend:f,interaction:T,theme:W,animate:w,lineWidth:E,isPercent:oe,percentColor:K,colors:ue}=this,le=this._chart=new this.winG2.Chart({container:e.nativeElement,autoFit:!0,height:n,padding:o,theme:W});le.animate(w),s?le.tooltip({showTitle:!1,showMarkers:!1}):le.tooltip(!1),T!=="none"&&le.interaction(T),le.axis(!1).legend(!1).coordinate("theta",{innerRadius:u}),le.filter("x",(Pe,G)=>G.checked!==!1),le.interval().adjust("stack").position("y").style({lineWidth:E,stroke:"#fff"}).color("x",oe?K:ue).tooltip("x*percent",(Pe,G)=>({name:Pe,value:`${f?G:(G*100).toFixed(2)} %`})).state({}),le.scale({x:{type:"cat",range:[0,1]}}),le.on("interval:click",Pe=>{this.ngZone.run(()=>this.clickItem.emit({item:Pe.data?.data,ev:Pe}))}).on("afterrender",()=>{this.ngZone.run(()=>this.updateBlock())}),this.ready.next(le),this.changeData(),le.render()}changeData(){let{_chart:e,data:n}=this;if(!e||!Array.isArray(n)||n.length<=0)return;let o=n.reduce((s,u)=>s+u.y,0);for(let s of n)s.percent=o===0?0:s.y/o;e.changeData(n),this.ngZone.run(()=>this.genLegend())}genLegend(){let{hasLegend:e,isPercent:n,cdr:o,_chart:s}=this;!e||n||(this.legendData=s.geometries[0].dataArray.map(u=>{let f=u[0]._origin;return f.color=u[0].color,f.checked=!0,f.percent=(f.percent*100).toFixed(2),f}),o.detectChanges())}_click(e){let{legendData:n,_chart:o}=this;n[e].checked=!n[e].checked,o.render(!0)}onChanges(){this.fixData()}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Oe(t)))(o||t)}})();static \u0275cmp=b({type:t,selectors:[["g2-pie"]],hostVars:8,hostBindings:function(n,o){n&2&&I("g2-pie",!0)("g2-pie__legend-has",o.hasLegend)("g2-pie__legend-block",o.block)("g2-pie__mini",o.isPercent)},inputs:{animate:[2,"animate","animate",Z],color:"color",subTitle:"subTitle",total:"total",height:[2,"height","height",V],hasLegend:[2,"hasLegend","hasLegend",Z],inner:"inner",padding:"padding",percent:[2,"percent","percent",V],tooltip:[2,"tooltip","tooltip",Z],lineWidth:[2,"lineWidth","lineWidth",V],blockMaxWidth:[2,"blockMaxWidth","blockMaxWidth",V],select:[2,"select","select",Z],valueFormat:"valueFormat",data:"data",colors:"colors",interaction:"interaction",ratio:"ratio"},outputs:{clickItem:"clickItem"},exportAs:["g2Pie"],features:[Be],decls:6,vars:3,consts:[["container",""],[1,"g2-pie__chart"],[1,"g2-pie__total"],[1,"g2-pie__legend"],[1,"g2-pie__total-title"],[1,"g2-pie__total-stat"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"],[1,"g2-pie__legend-item"],[1,"g2-pie__legend-item",3,"click"],[1,"g2-pie__legend-dot"],[1,"g2-pie__legend-title"],["nzType","vertical"],[1,"g2-pie__legend-percent"],[1,"g2-pie__legend-value",3,"innerHTML"]],template:function(n,o){n&1&&(C(0,gl,1,0,"nz-skeleton"),a(1,"div",1),d(2,"div",null,0),C(4,xl,3,2,"div",2),l(),C(5,zl,3,0,"ul",3)),n&2&&(_(o.loaded?-1:0),r(4),_(o.subTitle||o.total?4:-1),r(),_(o.hasLegend&&o.legendData.length>0?5:-1))},dependencies:[He,ne,zt],encapsulation:2,changeDetection:0})}return t})(),bl=[qn],Ri=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,ye,ie,$e,bl]})}return t})();function Sl(t,i){if(t&1&&(F(0),a(1,"h4"),m(2),l(),P()),t&2){let e=c();r(2),v(e.title)}}function wl(t,i){t&1&&d(0,"nz-skeleton")}var Qn=(()=>{class t extends Xe{title;maxAxis=2;data=[];titleMap;colorMap={y1:"#5B8FF9",y2:"#5AD8A6",y3:"#5D7092",y4:"#F6BD16",y5:"#E86452"};mask="HH:mm";maskSlider="HH:mm";position="top";height=450;padding=[40,8,64,40];borderWidth=2;slider=!0;clickItem=new te;onlyChangeData=e=>{let n=e.titleMap;return!(n&&!n.firstChange&&n.currentValue!==n.previousValue)};install(){let{node:e,height:n,padding:o,slider:s,maxAxis:u,theme:f,maskSlider:T}=this,W=this._chart=new this.winG2.Chart({container:e.nativeElement,autoFit:!0,height:n,padding:o,theme:f});W.axis("time",{title:null}),W.axis("y1",{title:null});for(let E=2;E<=u;E++)W.axis(`y${E}`,!1);W.line().position("time*y1");for(let E=2;E<=u;E++)W.line().position(`time*y${E}`);W.tooltip({showCrosshairs:!0,shared:!0});let w=$($({},[]),o);w[0]=0,s&&W.option("slider",{height:26,start:0,end:1,trendCfg:{isArea:!1},minLimit:2,formatter:E=>di(E,T)}),W.on("plot:click",E=>{let oe=this._chart.getSnapRecords({x:E.x,y:E.y});this.ngZone.run(()=>this.clickItem.emit({item:oe[0]._origin,ev:E}))}),W.on("legend-item:click",E=>{let oe=E?.target?.get("delegateObject").item,K=oe?.id,ue=W.geometries.find(le=>le.getAttribute("position").getFields()[1]===K);ue&&ue.changeVisible(!oe.unchecked)}),this.ready.next(W),this.changeData(),W.render()}changeData(){let{_chart:e,height:n,padding:o,mask:s,titleMap:u,position:f,colorMap:T,borderWidth:W,maxAxis:w}=this,E=[...this.data];if(!e||E.length<=0)return;let oe=[...Array(w)].map((G,J)=>J+1);e.legend({position:f,custom:!0,items:oe.map(G=>{let J=`y${G}`;return{id:J,name:u[J],value:J,marker:{style:{fill:T[J]}}}})}),e.geometries.forEach((G,J)=>{G.color(T[`y${J+1}`]).size(W)}),e.height=n,e.padding=o,E=E.map(G=>(G.time=za(G.time),G._time=+G.time,G)).sort((G,J)=>G._time-J._time);let K=Math.max(...oe.map(G=>[...E].sort((J,ei)=>ei[`y${G}`]-J[`y${G}`])[0][`y${G}`])),ue={};oe.forEach(G=>{let J=`y${G}`;ue[J]={alias:u[J],max:K,min:0}}),e.scale($({time:{type:"time",mask:s,range:[0,1]}},ue));let le={start:E[0]._time,end:E[E.length-1]._time},Pe=E.filter(G=>G._time>=le.start&&G._time<=le.end);e.changeData(Pe)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Oe(t)))(o||t)}})();static \u0275cmp=b({type:t,selectors:[["g2-timeline"]],inputs:{title:"title",maxAxis:[2,"maxAxis","maxAxis",V],data:"data",titleMap:"titleMap",colorMap:"colorMap",mask:"mask",maskSlider:"maskSlider",position:"position",height:[2,"height","height",V],padding:"padding",borderWidth:[2,"borderWidth","borderWidth",V],slider:[2,"slider","slider",Z]},outputs:{clickItem:"clickItem"},exportAs:["g2Timeline"],features:[Be],decls:4,vars:2,consts:[["container",""],[4,"nzStringTemplateOutlet"]],template:function(n,o){n&1&&(h(0,Sl,3,1,"ng-container",1),C(1,wl,1,0,"nz-skeleton"),d(2,"div",null,0)),n&2&&(p("nzStringTemplateOutlet",o.title),r(),_(o.loaded?-1:1))},dependencies:[ne,He],encapsulation:2,changeDetection:0})}return t})(),Dl=[Qn],Li=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,ie,$e,Dl]})}return t})();var Ml=["*"];function Tl(t,i){if(t&1&&(a(0,"span"),d(1,"nz-icon",1),l()),t&2){let e=c();ra(Hn("trend__",e.flag)),r(),p("nzType",Hn("caret-",e.flag))}}var pr=(()=>{class t{flag;colorful=!0;reverseColor=!1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["trend"]],hostVars:7,hostBindings:function(n,o){n&2&&(Lt("data-flag",o.flag),I("trend",!0)("trend__grey",!o.colorful)("trend__reverse",o.colorful&&o.reverseColor))},inputs:{flag:"flag",colorful:[2,"colorful","colorful",Z],reverseColor:[2,"reverseColor","reverseColor",Z]},exportAs:["trend"],ngContentSelectors:Ml,decls:2,vars:1,consts:[[3,"class"],[3,"nzType"]],template:function(n,o){n&1&&(lt(),st(0),C(1,Tl,2,5,"span",0)),n&2&&(r(),_(o.flag?1:-1))},dependencies:[re],encapsulation:2,changeDetection:0})}return t})();var cr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,U]})}return t})();var Pl=()=>({toTop:!1}),Ol=()=>({"padding.px":24}),Il=()=>({padding:"0 0 32px"}),Bl=()=>[0,0,0,0];function Wl(t,i){t&1&&(d(0,"i",43),S(1,"i18n")),t&2&&p("nzTooltipTitle",M(1,1,"app.analysis.introduce"))}function Al(t,i){t&1&&(a(0,"p",44),m(1),S(2,"i18n"),a(3,"span",45),m(4,"\uFFE512,423"),l()()),t&2&&(r(),O(" ",M(2,1,"app.analysis.day-sales")," "))}function Vl(t,i){t&1&&(d(0,"i",43),S(1,"i18n")),t&2&&p("nzTooltipTitle",M(1,1,"app.analysis.introduce"))}function Rl(t,i){if(t&1&&d(0,"g2-mini-area",22),t&2){let e=c();p("data",e.data.visitData)}}function Ll(t,i){t&1&&(a(0,"p",44),m(1),S(2,"i18n"),a(3,"span",45),m(4,"1,234"),l()()),t&2&&(r(),O(" ",M(2,1,"app.analysis.day-visits")," "))}function Gl(t,i){t&1&&(d(0,"i",43),S(1,"i18n")),t&2&&p("nzTooltipTitle",M(1,1,"app.analysis.introduce"))}function jl(t,i){if(t&1&&d(0,"g2-mini-bar",24),t&2){let e=c();p("data",e.data.visitData)}}function Hl(t,i){t&1&&(a(0,"p",44),m(1),S(2,"i18n"),a(3,"span",45),m(4,"60%"),l()()),t&2&&(r(),O(" ",M(2,1,"app.analysis.conversion-rate")," "))}function $l(t,i){t&1&&(d(0,"i",43),S(1,"i18n")),t&2&&p("nzTooltipTitle",M(1,1,"app.analysis.introduce"))}function ql(t,i){t&1&&(a(0,"div",46)(1,"trend",47),m(2),S(3,"i18n"),a(4,"span",19),m(5,"12%"),l()(),a(6,"trend",20),m(7),S(8,"i18n"),a(9,"span",19),m(10,"11%"),l()()()),t&2&&(r(2),O(" ",M(3,2,"app.analysis.week")," "),r(5),O(" ",M(8,4,"app.analysis.day")," "))}function Ql(t,i){if(t&1&&(a(0,"li")(1,"span",58),m(2),l(),a(3,"span",59),m(4),l(),a(5,"span",60),m(6),S(7,"number"),l()()),t&2){let e=i.$implicit,n=i.$index;r(),I("active",n<3),r(),v(n+1),r(2),v(e.title),r(2),v(Gt(7,5,e.total,"3.0"))}}function Xl(t,i){if(t&1&&(a(0,"div",50)(1,"div",51)(2,"div",52),d(3,"g2-bar",53),S(4,"i18n"),l()(),a(5,"div",54)(6,"div",55)(7,"h4",56),m(8),S(9,"i18n"),l(),a(10,"ul",57),j(11,Ql,8,8,"li",null,me),l()()()()),t&2){let e=c().$implicit,n=c(2);r(3),p("title",M(4,3,"app.analysis."+e+"-trend"))("data",n.data.salesData),r(5),v(M(9,5,"app.analysis."+e+"-ranking")),r(3),H(n.rankingListData)}}function Zl(t,i){if(t&1&&(a(0,"nz-tab",48),S(1,"i18n"),h(2,Xl,13,7,"ng-template",49),l()),t&2){let e=i.$implicit;p("nzTitle",M(1,1,"app.analysis."+e))}}function Yl(t,i){if(t&1){let e=D();a(0,"span",65),z("click",function(){let o=y(e).$implicit,s=c(3);return x(s.setDate(o))}),m(1),S(2,"i18n"),l()}if(t&2){let e=i.$implicit,n=c(3);I("current-date",n.dateRangeType===e),r(),O(" ",M(2,3,"app.analysis.all-"+e)," ")}}function Ul(t,i){if(t&1){let e=D();a(0,"div",61)(1,"div",62),j(2,Yl,3,5,"span",63,me),l(),a(4,"nz-range-picker",64),he("ngModelChange",function(o){y(e);let s=c(2);return ge(s.dateRange,o)||(s.dateRange=o),x(o)}),l()()}if(t&2){let e=c(2);r(2),H(e.dateRangeTypes),r(2),fe("ngModel",e.dateRange)}}function Kl(t,i){if(t&1&&(a(0,"nz-tabs",28),j(1,Zl,3,3,"nz-tab",48,me),h(3,Ul,5,1,"ng-template",null,11,B),l()),t&2){let e=N(4),n=c();p("nzTabBarExtraContent",e),r(),H(n.saleTabs)}}function Jl(t,i){if(t&1&&(d(0,"i",66),a(1,"nz-dropdown-menu",null,12)(3,"ul",67)(4,"li",68),m(5,"\u64CD\u4F5C\u4E00"),l(),a(6,"li",68),m(7,"\u64CD\u4F5C\u4E8C"),l()()()),t&2){let e=N(2);p("nzDropdownMenu",e)}}function es(t,i){t&1&&(m(0),S(1,"i18n"),d(2,"i",69),S(3,"i18n")),t&2&&(O(" ",M(1,2,"app.analysis.search-users")," "),r(2),p("nzTooltipTitle",M(3,4,"app.analysis.introduce")))}function ts(t,i){if(t&1&&d(0,"g2-mini-area",34),t&2){let e=c();p("line",!0)("data",e.data.visitData2)}}function ns(t,i){if(t&1&&d(0,"g2-mini-area",34),t&2){let e=c();p("line",!0)("data",e.data.visitData2)}}function is(t,i){if(t&1&&(a(0,"trend",70)(1,"span"),m(2),l()()),t&2){let e=i.$implicit;p("flag",e.status===1?"down":"up"),r(2),O("",e.range,"%")}}function os(t,i){if(t&1){let e=D();a(0,"nz-radio-group",64),he("ngModelChange",function(o){y(e);let s=c();return ge(s.salesType,o)||(s.salesType=o),x(o)}),z("ngModelChange",function(){y(e);let o=c();return x(o.changeSaleType())}),a(1,"label",71),m(2),S(3,"i18n"),l(),a(4,"label",71),m(5),S(6,"i18n"),l(),a(7,"label",71),m(8),S(9,"i18n"),l()(),d(10,"i",72),a(11,"nz-dropdown-menu",null,13)(13,"ul",67)(14,"li",68),m(15,"\u64CD\u4F5C\u4E00"),l(),a(16,"li",68),m(17,"\u64CD\u4F5C\u4E8C"),l()()()}if(t&2){let e=N(12),n=c();fe("ngModel",n.salesType),r(),p("nzValue","all"),r(),O(" ",M(3,8,"app.analysis.channel.all")," "),r(2),p("nzValue","online"),r(),O(" ",M(6,10,"app.analysis.channel.online")," "),r(2),p("nzValue","offline"),r(),O(" ",M(9,12,"app.analysis.channel.stores")," "),r(2),p("nzDropdownMenu",e)}}function as(t,i){if(t&1&&(d(0,"g2-pie",40),S(1,"i18n")),t&2){let e=c();p("data",e.salesPieData)("hasLegend",!0)("subTitle",M(1,7,"app.analysis.sales"))("height",248)("lineWidth",4)("total",e.salesTotal)("valueFormat",e.handlePieValueFormat)}}function rs(t,i){if(t&1&&(a(0,"div",74),d(1,"number-info",75),S(2,"i18n"),d(3,"g2-pie",76),l()),t&2){let e=c(),n=e.$implicit,o=e.$index,s=c(2);r(),p("title",n.name)("subTitle",M(2,11,"app.analysis.conversion-rate"))("total",n.cvr*100+"%")("theme",o!==s.offlineIdx?"light":"default"),r(2),p("animate",!1)("color",o!==s.offlineIdx?"#BDE4FF":"rgba(24, 144, 255, 0.85)")("inner",.55)("tooltip",!1)("padding",pe(13,Bl))("percent",n.cvr*100)("height",48)}}function ls(t,i){if(t&1&&(a(0,"div",77),d(1,"g2-timeline",78),l()),t&2){let e=c().$implicit,n=c(2);r(),p("data",e.chart)("titleMap",n.titleMap)}}function ss(t,i){if(t&1&&(a(0,"nz-tab",48),h(1,rs,4,14,"ng-template",null,14,B)(3,ls,2,2,"ng-template",49),l()),t&2){let e=N(2);p("nzTitle",e)}}function ms(t,i){if(t&1){let e=D();a(0,"nz-tabs",73),he("nzSelectedIndexChange",function(o){y(e);let s=c();return ge(s.offlineIdx,o)||(s.offlineIdx=o),x(o)}),z("nzSelectedIndexChange",function(o){y(e);let s=c();return x(s.offlineChange(o))}),j(1,ss,4,1,"nz-tab",48,me),l()}if(t&2){let e=c();fe("nzSelectedIndex",e.offlineIdx),r(),H(e.data.offlineData)}}var hn=class hn{constructor(){this.http=g(gt);this.msg=g(Re);this.i18n=g(ba);this.cdr=g(X);this.data={};this.loading=!0;this.dateRange=[];this.dateRangeTypes=["today","week","month","year"];this.dateRangeType=this.dateRangeTypes[0];this.rankingListData=Array(7).fill({}).map((i,e)=>({title:this.i18n.fanyi("app.analysis.test",{no:e}),total:323234}));this.titleMap={y1:this.i18n.fanyi("app.analysis.traffic"),y2:this.i18n.fanyi("app.analysis.payments")};this.searchColumn=[{title:{text:"\u6392\u540D",i18n:"app.analysis.table.rank"},index:"index"},{title:{text:"\u641C\u7D22\u5173\u952E\u8BCD",i18n:"app.analysis.table.search-keyword"},index:"keyword",click:i=>this.msg.success(i.keyword)},{type:"number",title:{text:"\u7528\u6237\u6570",i18n:"app.analysis.table.users"},index:"count",sort:{compare:(i,e)=>i.count-e.count}},{type:"number",title:{text:"\u5468\u6DA8\u5E45",i18n:"app.analysis.table.weekly-range"},index:"range",render:"range",sort:{compare:(i,e)=>i.range-e.range}}];this.salesType="all";this.salesTotal=0;this.saleTabs=["sales","visits"];this.offlineIdx=0}ngOnInit(){this.http.get("/chart").subscribe(i=>{i.offlineData.forEach(e=>{e.chart=ga(i.offlineChartData)}),this.data=i,this.loading=!1,this.changeSaleType()})}setDate(i){this.dateRange=va(i),this.dateRangeType=i,setTimeout(()=>this.cdr.detectChanges())}changeSaleType(){this.salesPieData=this.salesType==="all"?this.data.salesTypeData:this.salesType==="online"?this.data.salesTypeDataOnline:this.data.salesTypeDataOffline,this.salesPieData&&(this.salesTotal=this.salesPieData.reduce((i,e)=>e.y+i,0)),this.cdr.detectChanges()}handlePieValueFormat(i){return $a(i)}offlineChange(i){this.data.offlineData[i].show!==!0&&(this.data.offlineData[i].show=!0,this.cdr.detectChanges())}};hn.\u0275fac=function(e){return new(e||hn)},hn.\u0275cmp=b({type:hn,selectors:[["app-dashboard-analysis"]],decls:73,vars:67,consts:[["action1",""],["footer1",""],["action2",""],["footer2",""],["action3",""],["footer3",""],["action4",""],["footer4",""],["extraOp",""],["subTitle",""],["extra",""],["extraTemplate",""],["extraOpMenu","nzDropdownMenu"],["salesExtraMenu","nzDropdownMenu"],["nzTabHeading",""],["nz-row","",1,"pt-lg",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","6"],["total","\xA5 126,560","contentHeight","44px",3,"title","action","footer"],["flag","up",2,"display","block","margin-top","2px"],[1,"pl-sm"],["flag","down"],["total","8,848","contentHeight","46px",3,"title","action","footer"],["color","#975FE4","height","46",3,"data"],["total","6,560","contentHeight","46px",3,"title","action","footer"],["height","46",3,"data"],["total","78%","contentHeight","46px",3,"title","action","footer"],["height","46","percent","78","strokeWidth","8","target","80","color","#13C2C2"],[1,"ant-card__body-nopadding","sales-card",3,"nzLoading","nzBordered"],[3,"nzTabBarExtraContent"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","12"],[1,"mb-0",3,"nzLoading","nzBordered","nzTitle","nzExtra"],["nz-col","","nzXs","24","nzSm","12",1,"mb-md"],["total","12,321","subTotal","17.1","status","up",3,"subTitle"],["height","45",3,"line","data"],["total","2.7","subTotal","26.2","status","down",3,"subTitle"],["size","small","ps","5",3,"data","columns","page"],["st-row","range"],[1,"sales-card","mb-0",2,"min-height","506.5px",3,"nzLoading","nzBordered","nzTitle","nzBodyStyle","nzExtra"],[1,"my-xl"],[3,"data","hasLegend","subTitle","height","lineWidth","total","valueFormat"],[1,"offline-card","mt-lg",3,"nzLoading","nzBordered","nzBodyStyle"],[3,"nzSelectedIndex"],["nz-tooltip","","nz-icon","","nzType","info-circle",3,"nzTooltipTitle"],[1,"text-truncate","mb0"],[1,"ml-sm"],[1,"d-flex","justify-content-between","text-truncate"],["flag","up"],[3,"nzTitle"],["nz-tab",""],["nz-row",""],["nz-col","","nzXs","24","nzSm","24","nzMd","12","nzLg","16"],[1,"bar"],["height","295",2,"width","100%",3,"title","data"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","nzLg","8"],[1,"rank"],[1,"ranking-title"],[1,"rank-list"],[1,"number"],[1,"title"],[1,"value"],[1,"sales-extra-wrap"],[1,"sales-extra"],[3,"current-date"],[3,"ngModelChange","ngModel"],[3,"click"],["nz-dropdown","","nz-icon","","nzType","ellipsis",1,"icon-group",3,"nzDropdownMenu"],["nz-menu",""],["nz-menu-item",""],["nz-tooltip","","nz-icon","","nzType","info-circle",1,"ml-sm",3,"nzTooltipTitle"],[3,"flag"],["nz-radio-button","",3,"nzValue"],["nz-dropdown","","nzPlacement","bottomLeft","nz-icon","","nzType","ellipsis",1,"ml-md",3,"nzDropdownMenu"],[3,"nzSelectedIndexChange","nzSelectedIndex"],[1,"flex-center-between","px-md"],["gap","2",1,"mr-md",3,"title","subTitle","total","theme"],[2,"padding-top","36px","width","48px",3,"animate","color","inner","tooltip","padding","percent","height"],[1,"px-lg"],[3,"data","titleMap"]],template:function(e,n){if(e&1&&(a(0,"div",15)(1,"div",16)(2,"g2-card",17),S(3,"i18n"),h(4,Wl,2,3,"ng-template",null,0,B),a(6,"trend",18),m(7),S(8,"i18n"),a(9,"span",19),m(10,"12%"),l()(),a(11,"trend",20),m(12),S(13,"i18n"),a(14,"span",19),m(15,"11%"),l()(),h(16,Al,5,3,"ng-template",null,1,B),l()(),a(18,"div",16)(19,"g2-card",21),S(20,"i18n"),h(21,Vl,2,3,"ng-template",null,2,B),C(23,Rl,1,1,"g2-mini-area",22),h(24,Ll,5,3,"ng-template",null,3,B),l()(),a(26,"div",16)(27,"g2-card",23),S(28,"i18n"),h(29,Gl,2,3,"ng-template",null,4,B),C(31,jl,1,1,"g2-mini-bar",24),h(32,Hl,5,3,"ng-template",null,5,B),l()(),a(34,"div",16)(35,"g2-card",25),S(36,"i18n"),h(37,$l,2,3,"ng-template",null,6,B),d(39,"g2-mini-progress",26),h(40,ql,11,6,"ng-template",null,7,B),l()()(),a(42,"nz-card",27),C(43,Kl,5,1,"nz-tabs",28),l(),a(44,"div",29)(45,"div",30)(46,"nz-card",31),S(47,"i18n"),h(48,Jl,8,1,"ng-template",null,8,B),a(50,"div",29)(51,"div",32)(52,"number-info",33),h(53,es,4,6,"ng-template",null,9,B),l(),C(55,ts,1,2,"g2-mini-area",34),l(),a(56,"div",32),d(57,"number-info",35),S(58,"i18n"),C(59,ns,1,2,"g2-mini-area",34),l()(),a(60,"st",36),h(61,is,3,2,"ng-template",37),l()()(),a(62,"div",30)(63,"nz-card",38),S(64,"i18n"),h(65,os,18,14,"ng-template",null,10,B),a(67,"h4",39),m(68),S(69,"i18n"),l(),C(70,as,2,9,"g2-pie",40),l()()(),a(71,"nz-card",41),C(72,ms,3,1,"nz-tabs",42),l()),e&2){let o=N(5),s=N(17),u=N(22),f=N(25),T=N(30),W=N(33),w=N(38),E=N(41),oe=N(49),K=N(54),ue=N(66);p("nzGutter",24),r(2),p("title",M(3,44,"app.analysis.total-sales"))("action",o)("footer",s),r(5),O(" ",M(8,46,"app.analysis.week")," "),r(5),O(" ",M(13,48,"app.analysis.day")," "),r(7),p("title",M(20,50,"app.analysis.visits"))("action",u)("footer",f),r(4),_(n.data.visitData?23:-1),r(4),p("title",M(28,52,"app.analysis.payments"))("action",T)("footer",W),r(4),_(n.data.visitData?31:-1),r(4),p("title",M(36,54,"app.analysis.operational-effect"))("action",w)("footer",E),r(7),p("nzLoading",n.loading)("nzBordered",!1),r(),_(n.data.salesData?43:-1),r(),p("nzGutter",24),r(2),p("nzLoading",n.loading)("nzBordered",!1)("nzTitle",M(47,56,"app.analysis.online-top-search"))("nzExtra",oe),r(4),p("nzGutter",64),r(2),p("subTitle",K),r(3),_(n.data.visitData2?55:-1),r(2),p("subTitle",M(58,58,"app.analysis.per-capita-search")),r(2),_(n.data.visitData2?59:-1),r(),p("data",n.data.searchData)("columns",n.searchColumn)("page",pe(64,Pl)),r(3),p("nzLoading",n.loading)("nzBordered",!1)("nzTitle",M(64,60,"app.analysis.the-proportion-of-sales"))("nzBodyStyle",pe(65,Ol))("nzExtra",ue),r(5),v(M(69,62,"app.analysis.sales")),r(2),_(n.salesPieData?70:-1),r(),p("nzLoading",n.loading)("nzBordered",!1)("nzBodyStyle",pe(66,Il)),r(),_(n.data.offlineData?72:-1)}},dependencies:[De,Ct,_t,Ue,Tt,Mt,La,Ra,Pt,Ft,Nt,_e,Ae,bt,xi,yi,vi,zi,et,ve,xe,xt,Ke,pn,nt,Ge,U,re,yt,Ot,Ve,Je,ft,kt,Xa,Qa,qa,Te,Dt,wt,Wa,Aa,St,Me,Et,Bt,tt,vt,ka,Ta,ke,It,je,Qe,qe,ye,Wt,Le,dt,Li,Qn,Ri,qn,Vi,Ai,cr,pr,Oi,Pi,Wi,$n,rr,ar,ir,uo,Bi,Ii,gi,ua],styles:['[_nghost-%COMP%]     .icon-group i{cursor:pointer;margin-left:16px;color:#00000073;transition:color .32s}[_nghost-%COMP%]     .icon-group i:hover{color:#000000d9}[_nghost-%COMP%]     .rank-list{margin:25px 0 0;padding:0;list-style:none}[_nghost-%COMP%]     .rank-list li{display:flex;align-items:center;margin-top:16px}[_nghost-%COMP%]     .rank-list li:before{display:table;content:""}[_nghost-%COMP%]     .rank-list li:after{display:table;clear:both;content:""}[_nghost-%COMP%]     .rank-list li span{font-size:14px;line-height:22px}[_nghost-%COMP%]     .rank-list li .number{display:inline-block;width:20px;height:20px;margin-top:1.5px;margin-right:16px;border-radius:20px;font-size:12px;font-weight:600;line-height:20px;text-align:center;background-color:#f5f5f5}[_nghost-%COMP%]     .rank-list li .number.active{border-radius:20px;color:#fff;background-color:#314659}[_nghost-%COMP%]     .rank-list li .title{overflow:hidden;flex:1;margin-right:8px;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     .sales-extra{display:inline-block;margin-right:24px}[_nghost-%COMP%]     .sales-extra span{cursor:pointer;margin-left:24px}[_nghost-%COMP%]     .sales-extra span:hover{color:#1890ff}[_nghost-%COMP%]     .sales-extra span.current-date{color:#1890ff}[_nghost-%COMP%]     .sales-card .bar{padding:0 0 32px 32px}[_nghost-%COMP%]     .sales-card .rank{padding:0 32px 32px 72px}[_nghost-%COMP%]     .sales-card .ant-tabs-bar{padding-left:16px}[_nghost-%COMP%]     .sales-card .ant-tabs-bar .ant-tabs-nav .ant-tabs-tab{padding-top:16px;padding-bottom:14px;line-height:24px}[_nghost-%COMP%]     .sales-card .ant-tabs-tab{margin-left:24px}[_nghost-%COMP%]     .sales-card .ant-tabs-extra-content{padding-right:24px;line-height:55px}[_nghost-%COMP%]     .sales-card .ant-card-head{position:relative}[_nghost-%COMP%]     .sales-card .ant-card-head-title{align-items:normal}[_nghost-%COMP%]     .offline-card .ant-tabs-ink-bar{bottom:auto}[_nghost-%COMP%]     .offline-card .ant-tabs-bar{border-bottom:none}[_nghost-%COMP%]     .offline-card .ant-tabs-nav-container-scrolling{padding-right:40px;padding-left:40px}[_nghost-%COMP%]     .offline-card .ant-tabs-tab-prev-icon:before{position:relative;left:6px}[_nghost-%COMP%]     .offline-card .ant-tabs-tab-next-icon:before{position:relative;right:6px}[_nghost-%COMP%]     .offline-card .ant-tabs-tab-active h4{color:#1890ff}[_nghost-%COMP%]     .trend-text{margin-left:8px;color:#000000d9}[_nghost-%COMP%]     .ant-table-pagination{margin-bottom:0}[_nghost-%COMP%]     .g2-pie__legend-block, [_nghost-%COMP%]     .g2-pie__chart{margin:0}@media screen and (max-width: 992px){[_nghost-%COMP%]     .sales-extra{display:none}[_nghost-%COMP%]     .rank-list li span:first-child{margin-right:8px}}@media screen and (max-width: 768px){[_nghost-%COMP%]     .rank-title{margin-top:16px}[_nghost-%COMP%]     .sales-card .bar{padding:16px}}@media screen and (max-width: 576px){[_nghost-%COMP%]     .sales-extra-wrap{display:none}[_nghost-%COMP%]     .sales-card .ant-tabs-content{padding-top:30px}}'],changeDetection:0});var Gi=hn;var ps=t=>({$implicit:t});function cs(t,i){t&1&&jn(0)}function ds(t,i){if(t&1&&h(0,cs,1,0,"ng-container",1),t&2){let e=c();p("ngTemplateOutlet",e.render)("ngTemplateOutletContext",We(2,ps,e.i))}}function us(t,i){if(t&1&&d(0,"span",0),t&2){let e=c();p("innerHTML",e.i.text,Ie)}}var ze=function(t){return t[t.ing=0]="ing",t[t.pause=1]="pause",t[t.stop=2]="stop",t[t.done=3]="done",t}(ze||{}),ur=(()=>{class t{ngZone=g(Gn);fns=[];commands=[];nextTime=0;ing=!1;start(){this.ing!==!0&&(this.ing=!0,this.nextTime=+new Date,this.ngZone.runOutsideAngular(()=>{this.process()}))}process(){for(;this.commands.length;)this.commands.shift()();let e=+new Date-this.nextTime,n=1+Math.floor(e/100);e=100-e%100,this.nextTime+=100*n;for(let o=0,s=this.fns.length;o<s;o+=2){let u=this.fns[o+1];if(u===0)this.fns[o](n);else{u+=2*n-1;let f=Math.floor(u/20);f>0&&this.fns[o](f),this.fns[o+1]=u%20+1}}this.ing&&setTimeout(()=>this.process(),e)}add(e,n){return this.commands.push(()=>{this.fns.push(e),this.fns.push(n===1e3?1:0),this.ing=!0}),this}remove(e){return this.commands.push(()=>{let n=this.fns.indexOf(e);n!==-1&&this.fns.splice(n,2),this.ing=this.fns.length>0}),this}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac})}return t})(),fs=new oi("COUNTDOWN_CONFIG");var fr=(()=>{class t{locale=g(ma);timer=g(ur);cdr=g(X);ngZone=g(Gn);defCog=g(fs,{optional:!0});frequency=1e3;_notify={};status=ze.ing;isDestroy=!1;_config;i={};left=0;set config(e){e.notify!=null&&!Array.isArray(e.notify)&&e.notify>0&&(e.notify=[e.notify]),this._config=e}get config(){return this._config}render;event=new te;begin(){this.status=ze.ing,this.callEvent("start")}restart(){this.status!==ze.stop&&this.destroy(),this.init(),this.callEvent("restart")}stop(){this.status!==ze.stop&&(this.status=ze.stop,this.destroy(),this.callEvent("stop"))}pause(){this.status===ze.stop||this.status===ze.pause||(this.status=ze.pause,this.callEvent("pause"))}resume(){this.status===ze.stop||this.status!==ze.pause||(this.status=ze.ing,this.callEvent("resume"))}callEvent(e){this.event.emit({action:e,left:this.left,status:this.status,text:this.i.text})}init(){let e=this.config=$($({demand:!1,leftTime:0,format:"HH:mm:ss",timezone:"+0000",formatDate:({date:s,formatStr:u,timezone:f})=>ca(new Date(s),u,this.locale,f||"+0000")},this.defCog),this.config),n=this.frequency=~e.format.indexOf("S")?100:1e3;this.status=e.demand?ze.pause:ze.ing,this.getLeft();let o=this.reflow;this.reflow=(s=0,u=!1)=>o.apply(this,[s,u]),Array.isArray(e.notify)&&e.notify.forEach(s=>{if(s<1)throw new Error("The notify config must be a positive integer.");s=s*1e3,s=s-s%n,this._notify[s]=!0}),this.timer.add(this.reflow,n).start(),this.reflow(0,!0)}destroy(){return this.timer.remove(this.reflow),this}reflow(e=0,n=!1){if(this.isDestroy)return;let{status:o,config:s,_notify:u}=this;if(!n&&o!==ze.ing)return;let f=this.left=this.left-this.frequency*e;f<1&&(f=0),this.i={value:f,text:s.formatDate({date:f,formatStr:s.format,timezone:s.timezone})},typeof s.prettyText=="function"&&(this.i.text=s.prettyText(this.i.text)),this.cdr.detectChanges(),(s.notify===0||u[f])&&this.ngZone.run(()=>{this.callEvent("notify")}),f===0&&this.ngZone.run(()=>{this.status=ze.done,this.destroy(),this.callEvent("done")})}getLeft(){let{config:e,frequency:n}=this,o=e.leftTime*1e3,s=e.stopTime;!o&&s&&(o=s-new Date().getTime()),this.left=o-o%n}ngOnInit(){this.init(),this.config.demand||this.begin()}ngOnDestroy(){this.isDestroy=!0,this.destroy()}ngOnChanges(e){e.config.firstChange||this.restart()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["countdown"]],hostVars:2,hostBindings:function(n,o){n&2&&I("count-down",!0)},inputs:{config:"config",render:"render"},outputs:{event:"event"},features:[ri([ur]),Ne],decls:2,vars:1,consts:[[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){n&1&&C(0,ds,1,4,"ng-container")(1,us,1,1,"span",0),n&2&&_(o.render?0:1)},dependencies:[mi],styles:[`.count-down{font-variant-numeric:tabular-nums}
`],encapsulation:2,changeDetection:0})}return t})(),gr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({})}return t})();var gs=["cd"];function hs(t,i){if(t&1){let e=D();a(0,"countdown",2,0),z("event",function(o){y(e);let s=c();return x(s.handleEvent(o))}),l()}if(t&2){let e=c();p("config",e.config)}}var Bo=(()=>{class t{instance;config;set target(e){this.config={format:"HH:mm:ss",stopTime:typeof e=="number"?Ca(new Date,e).valueOf():+di(e,"t")}}event=new te;handleEvent(e){this.event.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["count-down"]],viewQuery:function(n,o){if(n&1&&ct(gs,5),n&2){let s;mt(s=pt())&&(o.instance=s.first)}},inputs:{config:"config",target:"target"},outputs:{event:"event"},exportAs:["countDown"],decls:1,vars:1,consts:[["cd",""],[3,"config"],[3,"event","config"]],template:function(n,o){n&1&&C(0,hs,2,1,"countdown",1),n&2&&_(o.config?0:-1)},dependencies:[fr],encapsulation:2,changeDetection:0})}return t})(),Cs=[Bo],hr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,gr,Cs]})}return t})();function ys(t,i){t&1&&d(0,"nz-skeleton")}var Wo=(()=>{class t extends Xe{title;height;color="#2f9cff";bgColor;format;percent;padding=[10,10,30,10];install(){this.winG2.registerShape("point","pointer",{draw(T,W){let w=W.addGroup({}),E=this.parsePoint({x:0,y:0});return w.addShape("line",{attrs:{x1:E.x,y1:E.y,x2:T.x,y2:T.y,stroke:T.color,lineWidth:2.5,lineCap:"round"}}),w.addShape("circle",{attrs:{x:E.x,y:E.y,r:5.75,stroke:T.color,lineWidth:2,fill:"#fff"}}),w}});let{el:e,height:n,padding:o,format:s,theme:u}=this,f=this._chart=new this.winG2.Chart({container:e.nativeElement,autoFit:!0,height:n,padding:o,theme:u});f.legend(!1),f.animate(!1),f.tooltip(!1),f.coordinate("polar",{startAngle:-9/8*Math.PI,endAngle:1/8*Math.PI,radius:.75}),f.scale("value",{min:0,max:100,nice:!0,tickCount:6}),f.axis("1",!1),f.axis("value",{line:null,label:{offset:-14,formatter:s},tickLine:null,grid:null}),f.point().position("value*1").shape("pointer"),this.ready.next(f),this.changeData(),f.render()}changeData(){let{_chart:e,percent:n,color:o,bgColor:s,title:u}=this;if(!e)return;let f=[{name:u,value:n}],T=f[0].value;e.annotation().clear(!0),e.geometries[0].color(o),e.annotation().arc({top:!1,start:[0,.95],end:[100,.95],style:{stroke:s,lineWidth:12,lineDash:null}}),e.annotation().arc({start:[0,.95],end:[f[0].value,.95],style:{stroke:o,lineWidth:12,lineDash:null}}),e.annotation().text({position:["50%","85%"],content:u,style:{fontSize:12,fill:this.theme==="dark"?"rgba(255, 255, 255, 0.43)":"rgba(0, 0, 0, 0.43)",textAlign:"center"}}),e.annotation().text({position:["50%","90%"],content:`${T} %`,style:{fontSize:20,fill:this.theme==="dark"?"rgba(255, 255, 255, 0.85)":"rgba(0, 0, 0, 0.85)",textAlign:"center"},offsetY:15}),e.changeData(f)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Oe(t)))(o||t)}})();static \u0275cmp=b({type:t,selectors:[["g2-gauge"]],hostVars:2,hostBindings:function(n,o){n&2&&I("g2-gauge",!0)},inputs:{title:"title",height:[2,"height","height",V],color:"color",bgColor:"bgColor",format:"format",percent:[2,"percent","percent",V],padding:"padding"},exportAs:["g2Gauge"],features:[Be],decls:1,vars:1,template:function(n,o){n&1&&C(0,ys,1,0,"nz-skeleton"),n&2&&_(o.loaded?-1:0)},dependencies:[He],encapsulation:2,changeDetection:0})}return t})(),xs=[Wo],Cr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,$e,xs]})}return t})();function zs(t,i){t&1&&d(0,"nz-skeleton")}var Ao=(()=>{class t extends Xe{width=0;height=200;padding=0;data=[];clickItem=new te;initTagCloud(){let e=this.winG2;e.registerShape("point","cloud",{draw(n,o){let s=n.data,u=o.addShape({type:"text",name:"tag-cloud-text",attrs:Se($({},n.style),{fontSize:s.size,text:s.text,textAlign:"center",fontFamily:s.font,fill:n.color,textBaseline:"Alphabetic",x:n.x,y:n.y})});return s.rotate&&e.Util.rotate(u,s.rotate*Math.PI/180),u}})}install(){this.initTagCloud();let{el:e,padding:n,theme:o}=this;this.height===0&&(this.height=this.el.nativeElement.clientHeight),this.width===0&&(this.width=this.el.nativeElement.clientWidth);let s=this._chart=new this.winG2.Chart({container:e.nativeElement,autoFit:!1,padding:n,height:this.height,width:this.width,theme:o});s.scale({x:{nice:!1},y:{nice:!1}}),s.legend(!1),s.axis(!1),s.tooltip({showTitle:!1,showMarkers:!1}),s.coordinate().reflect(),s.point().position("x*y").color("text").shape("cloud").state({active:{style:{fillOpacity:.4}}}),s.interaction("element-active"),s.on("tag-cloud-text:click",u=>{this.ngZone.run(()=>this.clickItem.emit({item:u.data?.data,ev:u}))}),this.ready.next(s),this.changeData(),s.render()}changeData(){let{_chart:e,data:n}=this;if(!e||!Array.isArray(n)||n.length<=0)return;let o=new window.DataSet.View().source(n),s=o.range("value"),u=s[0],f=s[1];o.transform({type:"tag-cloud",fields:["name","value"],font:"Verdana",size:[this.width,this.height],padding:0,timeInterval:5e3,rotate(){let T=~~(Math.random()*4)%4;return T===2&&(T=0),T*90},fontSize(T){return(T.value-u)/(f-u)*24+8}}),e.changeData(o.rows)}installResizeEvent(){this.resize$=Kt(window,"resize").pipe(Jt(()=>!!this._chart),en(200)).subscribe(()=>this.changeData())}onInit(){this.installResizeEvent()}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Oe(t)))(o||t)}})();static \u0275cmp=b({type:t,selectors:[["g2-tag-cloud"]],inputs:{width:[2,"width","width",V],height:[2,"height","height",V],padding:"padding",data:"data"},outputs:{clickItem:"clickItem"},exportAs:["g2TagCloud"],features:[Be],decls:1,vars:1,template:function(n,o){n&1&&C(0,zs,1,0,"nz-skeleton"),n&2&&_(o.loaded?-1:0)},dependencies:[He],encapsulation:2,changeDetection:0})}return t})(),bs=[Ao],_r=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,$e,bs]})}return t})();var ws=["container"],Ds=(t,i)=>({height:t,width:i,overflow:"hidden"}),Ms=t=>({width:t});function Ts(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.title)}}function ks(t,i){if(t&1&&(a(0,"span",3),h(1,Ts,2,1,"ng-container",5),l()),t&2){let e=c();r(),p("nzStringTemplateOutlet",e.title)}}var yr=(()=>{class t{el=g(tn).nativeElement;renderer=g(ai);ngZone=g(Gn);cdr=g(X);platform=g(an);resize$=null;node;timer;animate=!0;delay=0;title;color="#1890FF";height=160;percent;renderChart(e){if(!this.resize$)return;this.updateRadio();let{percent:n,color:o,node:s,animate:u}=this,f=Math.min(Math.max(n/100,0),100),T=this;cancelAnimationFrame(this.timer);let W=s.nativeElement,w=W.getContext("2d"),E=W.width,oe=W.height,K=E/2,ue=2,le=K-ue;w.beginPath(),w.lineWidth=ue*2;let Pe=E-ue,G=Pe/8,J=ue,ei=0,at=.2,rt=at,Rn=0,Ho=u?.005:.015,Rt=[],lo=K-ue,$o=-(Math.PI/2),qo=!0;for(let ee=$o;ee<$o+2*Math.PI;ee+=1/(8*Math.PI))Rt.push([K+lo*Math.cos(ee),K+lo*Math.sin(ee)]);let ti=Rt.shift();w.strokeStyle=o,w.moveTo(ti[0],ti[1]);function Wr(){w.beginPath(),w.save();let ee=[];for(let ni=J;ni<=J+Pe;ni+=20/Pe){let Ar=ei+(J+ni)/G,Vr=Math.sin(Ar)*rt,Zo=ni,Yo=2*le*(1-Rn)+(K-le)-G*Vr;w.lineTo(Zo,Yo),ee.push([Zo,Yo])}let Xo=ee.shift();w.lineTo(J+Pe,oe),w.lineTo(J,oe),w.lineTo(Xo[0],Xo[1]);let so=w.createLinearGradient(0,0,0,oe);so.addColorStop(0,"#ffffff"),so.addColorStop(1,o),w.fillStyle=so,w.fill(),w.restore()}function Qo(){if(w.clearRect(0,0,E,oe),qo&&!e)if(Rt.length)if(u){let ee=Rt.shift();w.lineTo(ee[0],ee[1]),w.stroke()}else{for(let ee of Rt)w.lineTo(ee[0],ee[1]),w.stroke();Rt=[]}else qo=!1,w.lineTo(ti[0],ti[1]),w.stroke(),Rt=null,w.globalCompositeOperation="destination-over",w.beginPath(),w.lineWidth=ue,w.arc(K,K,lo,0,2*Math.PI,!0),w.beginPath(),w.save(),w.arc(K,K,K-3*ue,0,2*Math.PI,!0),w.restore(),w.clip(),w.fillStyle=o;else{if(f>=.85){if(rt>at/4){let ee=at*.01;rt-=ee}}else if(f<=.1){if(rt<at*1.5){let ee=at*.01;rt+=ee}}else{if(rt<=at){let ee=at*.01;rt+=ee}if(rt>=at){let ee=at*.01;rt-=ee}}f-Rn>0&&(Rn+=Ho),f-Rn<0&&(Rn-=Ho),ei+=.07,Wr()}T.timer=requestAnimationFrame(Qo)}Qo()}updateRadio(){let{offsetWidth:e}=this.el.parentNode,n=e<this.height?e/this.height:1;this.renderer.setStyle(this.el,"transform",`scale(${n})`)}render(){this.renderChart(!1)}installResizeEvent(){this.resize$=Kt(window,"resize").pipe(en(200)).subscribe(()=>this.updateRadio())}ngOnInit(){this.platform.isBrowser&&(this.installResizeEvent(),this.ngZone.runOutsideAngular(()=>setTimeout(()=>this.render(),this.delay)))}ngOnChanges(){this.ngZone.runOutsideAngular(()=>this.renderChart(!0)),this.cdr.detectChanges()}ngOnDestroy(){this.timer&&cancelAnimationFrame(this.timer),this.resize$&&this.resize$.unsubscribe()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["g2-water-wave"]],viewQuery:function(n,o){if(n&1&&ct(ws,7),n&2){let s;mt(s=pt())&&(o.node=s.first)}},hostVars:2,hostBindings:function(n,o){n&2&&I("g2-water-wave",!0)},inputs:{animate:[2,"animate","animate",Z],delay:[2,"delay","delay",V],title:"title",color:"color",height:[2,"height","height",V],percent:[2,"percent","percent",V]},exportAs:["g2WaterWave"],features:[Ne],decls:7,vars:13,consts:[["container",""],[1,"g2-water-wave__canvas"],[1,"g2-water-wave__desc"],[1,"g2-water-wave__desc-title"],[1,"g2-water-wave__desc-percent"],[4,"nzStringTemplateOutlet"]],template:function(n,o){n&1&&(a(0,"div"),d(1,"canvas",1,0),l(),a(3,"div",2),C(4,ks,2,1,"span",3),a(5,"h4",4),m(6),l()()),n&2&&(we(li(8,Ds,o.height+"px",o.height+"px")),r(),Lt("width",o.height*2)("height",o.height*2),r(2),we(We(11,Ms,o.height+"px")),r(),_(o.title?4:-1),r(2),O("",o.percent,"%"))},dependencies:[ne],encapsulation:2,changeDetection:0})}return t})();var xr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,ie]})}return t})();var Ns=()=>({"text-align":"center"});function Fs(t,i){if(t&1&&d(0,"count-down",28),t&2){let e=c();p("config",e.cd)}}function Ps(t,i){if(t&1&&(a(0,"div",12),d(1,"number-info",29)(2,"g2-mini-area",30),a(3,"div",31)(4,"p"),m(5),l(),a(6,"p"),m(7),l()(),a(8,"div",32)(9,"span"),m(10,"00:00"),l(),a(11,"span"),m(12),l(),a(13,"span"),m(14),l()()()),t&2){let e=c();r(2),p("animate",!1)("borderWidth",2)("height",84)("padding",0)("data",e.activeData),r(3),O("",e.activeStat.max," \u4EBF\u5143"),r(2),O("",e.activeStat.min," \u4EBF\u5143"),r(5),v(e.activeStat.t1),r(2),v(e.activeStat.t2)}}function Os(t,i){if(t&1&&(d(0,"g2-gauge",14),S(1,"i18n")),t&2){let e=c();p("title",M(1,4,"app.monitor.ratio"))("height",180)("percent",e.percent)("format",e.couponFormat)}}var Sn=class Sn{constructor(){this.http=g(gt);this.cdr=g(X);this.data={};this.tags=[];this.loading=!0;this.q={start:null,end:null};this.percent=null;this.cd={format:"HH:mm:ss.S",leftTime:1e4};this.activeStat={max:0,min:0,t1:"",t2:""}}ngOnInit(){ii(this.http.get("/chart"),this.http.get("/chart/tags")).subscribe(([i,e])=>{this.data=i,e.list[Math.floor(Math.random()*e.list.length)+1].value=1e3,this.tags=e.list,this.loading=!1,this.cdr.detectChanges()}),this.refData(),this.activeTime$=setInterval(()=>this.refData(),1e3*2)}refData(){let i=[];for(let e=0;e<24;e+=1)i.push({x:`${e.toString().padStart(2,"0")}:00`,y:e*50+Math.floor(Math.random()*200)});this.activeData=i,this.activeStat.max=[...i].sort()[i.length-1].y+200,this.activeStat.min=[...i].sort()[Math.floor(i.length/2)].y,this.activeStat.t1=i[Math.floor(i.length/2)].x,this.activeStat.t2=i[i.length-1].x,this.percent=Math.floor(Math.random()*100),this.cdr.detectChanges()}couponFormat(i){switch(parseInt(i,10)){case 20:return"\u5DEE";case 40:return"\u4E2D";case 60:return"\u826F";case 80:return"\u4F18";default:return""}}ngOnDestroy(){this.activeTime$&&clearInterval(this.activeTime$)}};Sn.\u0275fac=function(e){return new(e||Sn)},Sn.\u0275cmp=b({type:Sn,selectors:[["app-dashboard-monitor"]],decls:53,vars:80,consts:[["lastTotalTime",""],["nz-row","",1,"pt-lg",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","18"],[1,"mb-lg",3,"nzTitle","nzBordered"],["nz-row",""],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],["suffix","\u5143",3,"subTitle","total"],[3,"subTitle","total"],["total","234","suffix","\u5143",3,"subTitle"],[1,"map-chart"],["nz-tooltip","","nzTooltipPlacement","top","src","https://gw.alipayobjects.com/zos/rmsportal/HBWnDEUXCnGnGrRfrpKa.png","alt","map",3,"nzTooltipTitle"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","6"],[1,"active-chart"],[1,"mb-lg",3,"nzTitle","nzBordered","nzBodyStyle"],[3,"title","height","percent","format"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","12",1,"mb-lg"],[1,"pie-card",3,"nzTitle","nzBordered"],["nz-row","",2,"padding","16px 0",3,"nzGutter"],["nz-col","",3,"nzSpan"],["total","28%",3,"animate","percent","subTitle","height","lineWidth"],["color","#5DDECF","total","22%",3,"animate","percent","subTitle","height","lineWidth"],["color","#2FC25B","total","32%",3,"animate","percent","subTitle","height","lineWidth"],["nz-col","","nzXs","24","nzSm","24","nzLg","6",1,"mb-lg"],[3,"nzTitle","nzBordered"],[3,"data","height"],[1,"text-center"],[3,"title","percent","height"],[3,"config"],["subTitle","\u76EE\u6807\u8BC4\u4F30","total","\u6709\u671B\u8FBE\u5230\u9884\u671F"],["line","",3,"animate","borderWidth","height","padding","data"],[1,"active-grid"],[1,"active-legend"]],template:function(e,n){if(e&1&&(a(0,"div",1)(1,"div",2)(2,"nz-card",3),S(3,"i18n"),a(4,"div",4)(5,"div",5),d(6,"number-info",6),S(7,"i18n"),l(),a(8,"div",5),d(9,"number-info",7),S(10,"i18n"),l(),a(11,"div",5)(12,"number-info",7),S(13,"i18n"),h(14,Fs,1,1,"ng-template",null,0,B),l()(),a(16,"div",5),d(17,"number-info",8),S(18,"i18n"),l()(),a(19,"div",9),d(20,"img",10),S(21,"i18n"),l()()(),a(22,"div",11)(23,"nz-card",3),S(24,"i18n"),C(25,Ps,15,9,"div",12),l(),a(26,"nz-card",13),S(27,"i18n"),C(28,Os,2,6,"g2-gauge",14),l()()(),a(29,"div",15)(30,"div",16)(31,"nz-card",17),S(32,"i18n"),a(33,"div",18)(34,"div",19),d(35,"g2-pie",20),S(36,"i18n"),l(),a(37,"div",19),d(38,"g2-pie",21),S(39,"i18n"),l(),a(40,"div",19),d(41,"g2-pie",22),S(42,"i18n"),l()()()(),a(43,"div",23)(44,"nz-card",24),S(45,"i18n"),d(46,"g2-tag-cloud",25),l()(),a(47,"div",23)(48,"nz-card",24),S(49,"i18n"),a(50,"div",26),d(51,"g2-water-wave",27),S(52,"i18n"),l()()()()),e&2){let o=N(15);p("nzGutter",24),r(2),p("nzTitle",M(3,49,"app.monitor.trading-activity"))("nzBordered",!1),r(4),p("subTitle",M(7,51,"app.monitor.total-transactions"))("total","124,543,233"),r(3),p("subTitle",M(10,53,"app.monitor.sales-target"))("total","92%"),r(3),p("subTitle",M(13,55,"app.monitor.remaining-time"))("total",o),r(5),p("subTitle",M(18,57,"app.monitor.total-transactions-per-second")),r(3),p("nzTooltipTitle",M(21,59,"app.monitor.waiting-for-implementation")),r(3),p("nzTitle",M(24,61,"app.monitor.activity-forecast"))("nzBordered",!1),r(2),_(n.activeData?25:-1),r(),p("nzTitle",M(27,63,"app.monitor.efficiency"))("nzBordered",!1)("nzBodyStyle",pe(79,Ns)),r(2),_(n.percent?28:-1),r(),p("nzGutter",24),r(2),p("nzTitle",M(32,65,"app.monitor.proportion-per-category"))("nzBordered",!1),r(2),p("nzGutter",4),r(),p("nzSpan",8),r(),p("animate",!1)("percent",28)("subTitle",M(36,67,"app.monitor.fast-food"))("height",128)("lineWidth",2),r(2),p("nzSpan",8),r(),p("animate",!1)("percent",22)("subTitle",M(39,69,"app.monitor.western-food"))("height",128)("lineWidth",2),r(2),p("nzSpan",8),r(),p("animate",!1)("percent",32)("subTitle",M(42,71,"app.monitor.hot-pot"))("height",128)("lineWidth",2),r(3),p("nzTitle",M(45,73,"app.monitor.popular-searches"))("nzBordered",!1),r(2),p("data",n.tags)("height",165),r(2),p("nzTitle",M(49,75,"app.monitor.resource-surplus"))("nzBordered",!1),r(3),p("title",M(52,77,"app.monitor.fund-surplus"))("percent",34)("height",165)}},dependencies:[De,Ue,Tt,Mt,Pt,Ft,Nt,_e,bt,et,ve,xe,xt,Ke,pn,nt,Ge,U,yt,Ot,Ve,Je,ft,kt,Te,Dt,wt,St,Me,Et,Bt,tt,vt,ke,It,je,Qe,qe,ye,Wt,Le,dt,xr,yr,_r,Ao,Ri,qn,Cr,Wo,Oi,Pi,Vi,Ai,hr,Bo,gi],styles:["[_nghost-%COMP%]     .map-chart{height:457px;padding-top:24px;text-align:center}[_nghost-%COMP%]     .map-chart img{display:inline-block;max-width:100%;max-height:437px}[_nghost-%COMP%]     .pie-card .pie-stat{font-size:24px!important}[_nghost-%COMP%]     .active-chart{position:relative}[_nghost-%COMP%]     .active-chart g2-mini-area{margin-top:32px}[_nghost-%COMP%]     .active-chart .active-grid p{position:absolute;top:80px;width:100%;padding-bottom:4px;border-bottom:1px dashed #e9e9e9}[_nghost-%COMP%]     .active-chart .active-grid p:last-child{top:115px}[_nghost-%COMP%]     .active-chart .active-legend{position:relative;height:20px;margin-top:8px;font-size:0;line-height:20px}[_nghost-%COMP%]     .active-chart .active-legend span{display:inline-block;width:33.33%;font-size:12px;text-align:center}[_nghost-%COMP%]     .active-chart .active-legend span:first-child{text-align:left}[_nghost-%COMP%]     .active-chart .active-legend span:last-child{text-align:right}@media screen and (max-width: 992px){[_nghost-%COMP%]     .map-chart{height:auto}}"],changeDetection:0});var Qi=Sn;var Is=["popover"],Bs=(t,i)=>({"max-width.px":t,direction:i});function Ws(t,i){if(t&1){let e=D();a(0,"div",3),z("click",function(){y(e);let o=c();return x(o.handleMask())}),l()}}function As(t,i){if(t&1&&(F(0),d(1,"div",13),P()),t&2){let e=c(3);r(),p("innerHTML",e.item.content,Ie)}}function Vs(t,i){if(t&1&&m(0),t&2){let e=c(3);la(" ",e.active+1,"/",e.max," ")}}function Rs(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(4);r(),v(e.item.skip)}}function Ls(t,i){if(t&1){let e=D();a(0,"a",14),z("click",function(){y(e);let o=c(3);return x(o.to("skip"))}),h(1,Rs,2,1,"ng-container",5),l()}if(t&2){let e=c(3);r(),p("nzStringTemplateOutlet",e.item.skip)}}function Gs(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(4);r(),v(e.item.prev)}}function js(t,i){if(t&1){let e=D();a(0,"a",15),z("click",function(){y(e);let o=c(3);return x(o.to("prev"))}),h(1,Gs,2,1,"ng-container",5),l()}if(t&2){let e=c(3);r(),p("nzStringTemplateOutlet",e.item.prev)}}function Hs(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(4);r(),v(e.item.next)}}function $s(t,i){if(t&1){let e=D();a(0,"a",16),z("click",function(){y(e);let o=c(3);return x(o.to("next"))}),h(1,Hs,2,1,"ng-container",5),l()}if(t&2){let e=c(3);r(),p("nzStringTemplateOutlet",e.item.next)}}function qs(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(4);r(),v(e.item.done)}}function Qs(t,i){if(t&1){let e=D();a(0,"a",17),z("click",function(){y(e);let o=c(3);return x(o.to("done"))}),h(1,qs,2,1,"ng-container",5),l()}if(t&2){let e=c(3);r(),p("nzStringTemplateOutlet",e.item.done)}}function Xs(t,i){if(t&1&&(h(0,As,2,1,"ng-container",5),a(1,"div",6)(2,"span",7),C(3,Vs,1,2),l(),a(4,"div",8),C(5,Ls,2,1,"a",9),C(6,js,2,1,"a",10),C(7,$s,2,1,"a",11),C(8,Qs,2,1,"a",12),l()()),t&2){let e=c(2);p("nzStringTemplateOutlet",e.item.content),r(3),_(e.config.showTotal?3:-1),r(2),_(!e.last&&e.item.skip!==null&&e.item.skip!==void 0?5:-1),r(),_(!e.first&&e.item.prev!==null?6:-1),r(),_(!e.last&&e.item.next!==null&&e.item.next!==void 0?7:-1),r(),_(e.last&&e.item.done!==null&&e.item.done!==void 0?8:-1)}}function Zs(t,i){if(t&1&&(d(0,"div",4,0),h(2,Xs,9,6,"ng-template",null,1,B)),t&2){let e=N(3),n=c();I("onboarding__light-hide",n.running),p("nzPopoverTitle",n.item.title)("nzPopoverContent",e)("nzPopoverVisible",!n.running)("nzPopoverTrigger",null)("nzPopoverPlacement",n.item.position)("nzPopoverOverlayClassName",n.item.className)("nzPopoverOverlayStyle",li(11,Bs,n.item.width,n.dir))("nzNoAnimation",!0),Lt("style",n.item.lightStyle,na)}}var vr=(()=>{class t{el=g(tn).nativeElement;platform=g(an);cdr=g(X);doc=g(Ln);time;prevSelectorEl;config;item;active=0;max=0;op=new te;running=!1;dir="ltr";popover;get first(){return this.active===0}get last(){return this.active===this.max-1}_getDoc(){return this.doc}_getWin(){return this._getDoc().defaultView||window}getLightData(){let e=this._getDoc(),n=this._getWin(),o=e.querySelector(this.item.selectors);if(!o)return null;let s=n.scrollY||e.documentElement.scrollTop||e.body.scrollTop,u=n.scrollX||e.documentElement.scrollLeft||e.body.scrollLeft,f=o.getBoundingClientRect(),T=f.top+s,W=f.left+u,w=8,E=T>w&&W>w,oe=E?w:0,K=E?w*2:0;return{top:T-oe,left:W-oe,width:f.width+K,height:f.height+K,el:o,clientWidth:e.body.clientWidth,clientHeight:e.body.clientHeight}}ngAfterViewInit(){this.popover.component.onClickOutside=()=>{}}scroll(e){this.prevSelectorEl=e.el;let n=e.top-(e.clientHeight-e.height)/2;this._getWin().scrollTo({top:n}),this.updatePrevElStatus(!0)}updateRunning(e){this.running=e,this.cdr.detectChanges(),e||this.updatePosition()}updatePosition(){if(!this.platform.isBrowser)return;let e=this.getLightData();if(e==null)return;let n=this.el.querySelector(".onboarding__light").style;n.top=`${e.top}px`,n.left=`${e.left}px`,n.width=`${e.width}px`,n.height=`${e.height}px`,this.updatePrevElStatus(!1),this.scroll(e)}updatePrevElStatus(e){this.prevSelectorEl&&this.prevSelectorEl.classList[e?"add":"remove"]("onboarding__light-el")}to(e){this.op.emit(e)}handleMask(){this.config.maskClosable===!0&&(this.popover.component.hide(),this.to("done"))}ngOnDestroy(){clearTimeout(this.time),this.updatePrevElStatus(!1)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["onboarding"]],viewQuery:function(n,o){if(n&1&&ct(Is,5),n&2){let s;mt(s=pt())&&(o.popover=s.first)}},hostVars:5,hostBindings:function(n,o){n&2&&(Lt("data-onboarding-active",o.active),I("onboarding",!0)("onboarding-rtl",o.dir==="rtl"))},decls:2,vars:2,consts:[["popover","nzPopover"],["content",""],[1,"onboarding__mask"],[1,"onboarding__mask",3,"click"],["nz-popover","",1,"onboarding__light",3,"nzPopoverTitle","nzPopoverContent","nzPopoverVisible","nzPopoverTrigger","nzPopoverPlacement","nzPopoverOverlayClassName","nzPopoverOverlayStyle","nzNoAnimation"],[4,"nzStringTemplateOutlet"],[1,"flex-center-between","onboarding__footer"],[1,"onboarding__total"],[1,"onboarding__btns"],["nz-button","","nzType","link","nzSize","small","data-btnType","skip"],["nz-button","","nzSize","small","data-btnType","prev"],["nz-button","","nzType","primary","nzSize","small","data-btnType","next"],["nz-button","","nzType","primary","nzSize","small","data-btnType","done"],[3,"innerHTML"],["nz-button","","nzType","link","nzSize","small","data-btnType","skip",3,"click"],["nz-button","","nzSize","small","data-btnType","prev",3,"click"],["nz-button","","nzType","primary","nzSize","small","data-btnType","next",3,"click"],["nz-button","","nzType","primary","nzSize","small","data-btnType","done",3,"click"]],template:function(n,o){n&1&&(C(0,Ws,1,0,"div",2),C(1,Zs,4,14)),n&2&&(_(!o.running&&o.config.mask?0:-1),r(),_(o.item?1:-1))},dependencies:[Ja,ne,Ye,ya],encapsulation:2,changeDetection:0})}return t})(),Ys=new oi("ONBOARDING_STORE_TOKEN",{providedIn:"root",factory:Us});function Us(){return new Vo}var Vo=class{get(i){return localStorage.getItem(i)}set(i,e){localStorage.setItem(i,`${e}`)}},zr=(()=>{class t{appRef=g(ia);router=g(fa);doc=g(Ln);configSrv=g(ha);keyStoreSrv=g(Ys);directionality=g(ci);compRef;op$;config;active=0;running$=null;_running=!1;type=null;locale=g(hi).valueSignal("onboarding");_getDoc(){return this.doc}get running(){return this._running}attach(){let e=pa(vr,{environmentInjector:this.appRef.injector});this.compRef=e,this.appRef.attachView(e.hostView);let n=e.hostView.rootNodes[0],o=this._getDoc(),s=o.querySelector(".cdk-overlay-container");s?o.body.insertBefore(n,s):o.body.appendChild(n),this.op$=this.compRef.instance.op.subscribe(u=>{switch(u){case"next":this.next();break;case"prev":this.prev();break;default:this.done();break}})}cancelRunning(){return this.running$&&(this.running$.unsubscribe(),this.running$=null),this}updateRunning(e){return this._running=e,this.compRef.instance.updateRunning(e),this}destroy(){let e=this.config?.key;e!=null&&this.keyStoreSrv.set(e,this.config?.keyVersion),this.cancelRunning(),this.compRef&&(this.appRef.detachView(this.compRef.hostView),this.compRef.destroy(),this.op$.unsubscribe())}showItem(e=!1){let n=this.config.items,o=$($({position:"bottomLeft",before:q(!0),after:q(!0)},this.locale()),n[this.active]),s=this.configSrv.get("onboarding").direction||this.directionality.value;Object.assign(this.compRef.instance,{item:o,config:this.config,active:this.active,max:n.length,dir:s});let u=[Ee(()=>o.url?this.router.navigateByUrl(o.url):q(!0)),Ee(()=>{let f=this.type==="prev"?o.after:o.before;return typeof f=="number"?q(!0).pipe(po(f)):f})];e||u.push(po(1)),this.updateRunning(!0),this.running$=q(!0).pipe(Uo.apply(this,u)).subscribe({next:()=>this.cancelRunning().updateRunning(!1),error:()=>this.done()})}start(e){let n=$({keyVersion:"",items:[],mask:!0,maskClosable:!0,showTotal:!1},e),o=n?.key;o!=null&&this.keyStoreSrv.get(o)===n.keyVersion||this.running||(this.destroy(),this.config=n,this.active=0,this.type=null,this.attach(),this.showItem(!0))}next(){if(this._running||this.active+1>=this.config.items.length){this.done();return}this.type="next",++this.active,this.showItem()}prev(){this._running||this.active-1<0||(this.type="prev",--this.active,this.showItem())}done(){this.type="done",this.destroy()}ngOnDestroy(){this.destroy()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ks=[vr],br=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,Ci,nt,ie,_e,xa,Ks]})}return t})();var Js=["*"];function em(t,i){if(t&1&&(F(0),d(1,"nz-icon",4),P()),t&2){let e=c();r(),p("nzType",e.icon)}}var Sr=(()=>{class t{cdr=g(X);el=g(tn).nativeElement;render=g(ai);ctrlStyle={};icon="question-circle";top=120;width=200;bgColor;borderColor;expand=!1;expandChange=new te;show=!1;initFlag=!1;_click(){this.show=!this.show,this.expandChange.emit(this.show),this.setStyle()}setStyle(){this.ctrlStyle={"background-color":this.bgColor,"border-color":this.borderColor};let e=[`top:${this.top}px`,`width:${this.width}px`,`margin-right:-${this.show?0:this.width}px`];this.bgColor&&e.push(`background-color:${this.bgColor}`),this.borderColor&&e.push(`border-color:${this.borderColor}`),this.render.setAttribute(this.el,"style",e.join(";")),this.cdr.detectChanges()}ngOnInit(){this.initFlag=!0,this.setStyle()}ngOnChanges(){this.show=this.expand,this.initFlag&&this.setStyle()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["quick-menu"]],hostVars:2,hostBindings:function(n,o){n&1&&z("click",function(){return o._click()}),n&2&&I("quick-menu",!0)},inputs:{icon:"icon",top:[2,"top","top",V],width:[2,"width","width",V],bgColor:"bgColor",borderColor:"borderColor",expand:[2,"expand","expand",Z]},outputs:{expandChange:"expandChange"},exportAs:["quickMenu"],features:[Ne],ngContentSelectors:Js,decls:5,vars:3,consts:[[1,"quick-menu__inner"],[1,"quick-menu__ctrl"],[1,"quick-menu__ctrl-icon"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(n,o){n&1&&(lt(),a(0,"div",0)(1,"div",1)(2,"div",2),h(3,em,2,1,"ng-container",3),l()(),st(4),l()),n&2&&(r(),we(o.ctrlStyle),r(2),p("nzStringTemplateOutlet",o.icon))},dependencies:[re,ne],encapsulation:2,changeDetection:0})}return t})();var wr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,U,ie]})}return t})();var Zi=()=>[5,30],im=()=>({y1:"\u5BA2\u6D41\u91CF",y2:"\u652F\u4ED8\u7B14\u6570"});function om(t,i){if(t&1){let e=D();a(0,"g2-mini-bar",36),z("ready",function(o){y(e);let s=c();return x(s.fixDark(o))}),l()}if(t&2){let e=c();p("padding",pe(2,Zi))("data",e.webSite)}}function am(t,i){if(t&1){let e=D();a(0,"g2-mini-bar",36),z("ready",function(o){y(e);let s=c();return x(s.fixDark(o))}),l()}if(t&2){let e=c();p("padding",pe(2,Zi))("data",e.webSite)}}function rm(t,i){if(t&1){let e=D();a(0,"g2-mini-bar",36),z("ready",function(o){y(e);let s=c();return x(s.fixDark(o))}),l()}if(t&2){let e=c();p("padding",pe(2,Zi))("data",e.webSite)}}function lm(t,i){if(t&1){let e=D();a(0,"g2-mini-bar",36),z("ready",function(o){y(e);let s=c();return x(s.fixDark(o))}),l()}if(t&2){let e=c();p("padding",pe(2,Zi))("data",e.webSite)}}function sm(t,i){t&1&&(m(0," Sales Statistics "),a(1,"small",37),m(2,"Business Expectations & Retail Sales Statistics"),l())}function mm(t,i){if(t&1&&d(0,"g2-bar",25),t&2){let e=c();p("data",e.salesData)}}function pm(t,i){t&1&&(m(0," Growth Rate "),a(1,"small",37),m(2,"Business Expectations & Retail Sales Statistics"),l())}function cm(t,i){if(t&1&&d(0,"g2-timeline",27),t&2){let e=c();p("data",e.offlineChartData)("height",289)("titleMap",pe(3,im))}}function dm(t,i){t&1&&d(0,"img",38)}function um(t,i){t&1&&(m(0," Recent Posts "),a(1,"small",37),m(2,"Venenatis portauam Inceptos ameteiam"),l())}function fm(t,i){if(t&1&&(a(0,"div",34)(1,"div",39),d(2,"nz-avatar",40),l(),a(3,"div",41)(4,"strong"),m(5),l(),a(6,"p",42),m(7),l()()()),t&2){let e=i.$implicit;p("nzJustify","center")("nzAlign","middle"),r(),p("nzSpan",4),r(),p("nzSrc","./assets/tmp/img/"+e.avatar+".png"),r(),p("nzSpan",20),r(2),v(e.name),r(2),v(e.content)}}function gm(t,i){if(t&1){let e=D();a(0,"li",47),z("click",function(){y(e);let o=c().$implicit;return x(o.completed=!1)}),m(1,"Active"),l()}}function hm(t,i){if(t&1){let e=D();a(0,"li",47),z("click",function(){y(e);let o=c().$implicit;return x(o.completed=!0)}),m(1,"Completed"),l()}}function Cm(t,i){if(t&1){let e=D();a(0,"div",34)(1,"div",39),d(2,"nz-avatar",40),l(),a(3,"div",41)(4,"strong"),m(5),l(),a(6,"p",42),m(7),l()(),a(8,"div",43),d(9,"i",44),a(10,"nz-dropdown-menu",null,4)(12,"ul",45),C(13,gm,2,0,"li",46)(14,hm,2,0,"li",46),a(15,"li",47),z("click",function(){let o=y(e).$implicit,s=c();return x(s.todoData.splice(s.todoData.indexOf(o),1))}),m(16,"Delted"),l()()()()()}if(t&2){let e=i.$implicit,n=N(11);p("nzJustify","center")("nzAlign","middle"),r(),p("nzSpan",4),r(),p("nzSrc","./assets/tmp/img/"+e.avatar+".png"),r(),p("nzSpan",18),r(2),v(e.name),r(),I("text-deleted",e.completed),r(),v(e.content),r(),p("nzSpan",2),r(),p("nzDropdownMenu",n),r(4),_(e.completed?13:14)}}var wn=class wn{constructor(){this.http=g(gt);this.cdr=g(X);this.obSrv=g(zr);this.platform=g(an);this.doc=g(Ln);this.todoData=[{completed:!0,avatar:"1",name:"\u82CF\u5148\u751F",content:"\u8BF7\u544A\u8BC9\u6211\uFF0C\u6211\u5E94\u8BE5\u8BF4\u70B9\u4EC0\u4E48\u597D\uFF1F"},{completed:!1,avatar:"2",name:"\u306F\u306A\u3055\u304D",content:"\u30CF\u30EB\u30AB\u30BD\u30E9\u30C8\u30AD\u30D8\u30C0\u30C4\u30D2\u30AB\u30EA"},{completed:!1,avatar:"3",name:"cipchk",content:"this world was never meant for one as beautiful as you."},{completed:!1,avatar:"4",name:"Kent",content:"my heart is beating with hers"},{completed:!1,avatar:"5",name:"Are you",content:"They always said that I love beautiful girl than my friends"},{completed:!1,avatar:"6",name:"Forever",content:"Walking through green fields \uFF0Csunshine in my eyes."}];Jo(1e3).pipe(on()).subscribe(()=>this.genOnboarding())}fixDark(i){!this.platform.isBrowser||this.doc.body.getAttribute("data-theme")!=="dark"||i.theme({styleSheet:{backgroundColor:"transparent"}})}ngOnInit(){this.http.get("/chart").subscribe(i=>{this.webSite=i.visitData.slice(0,10),this.salesData=i.salesData,this.offlineChartData=i.offlineChartData,this.cdr.detectChanges()})}genOnboarding(){let i="on-boarding";!this.platform.isBrowser||localStorage.getItem(i)==="1"||this.http.get("./assets/tmp/on-boarding.json").subscribe(e=>{this.obSrv.start(e),localStorage.setItem(i,"1")})}};wn.\u0275fac=function(e){return new(e||wn)},wn.\u0275cmp=b({type:wn,selectors:[["app-dashboard-v1"]],decls:99,vars:17,consts:[["salesTitle",""],["growthTitle",""],["coverTpl",""],["recentTitle",""],["todoMenus","nzDropdownMenu"],[1,"alain-default__content-title"],[3,"nzBordered","nzSplit"],["routerLink","/"],["routerLink","/widgets"],["routerLink","/style/typography"],["routerLink","/style/gridmasonry"],["routerLink","/pro/result/success"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","12","nzMd","6",1,"mb-md"],["nz-row","","nzType","flex","nzAlign","middle",1,"bg-primary","rounded-md"],["nz-col","","nzSpan","12",1,"p-md","text-white"],[1,"h2","mt0"],[1,"text-nowrap","mb0"],["nz-col","","nzSpan","12"],["height","35","color","#fff","borderWidth","3","tooltipType","mini",3,"padding","data"],["nz-row","","nzType","flex","nzAlign","middle",1,"bg-success","rounded-md"],["nz-row","","nzType","flex","nzAlign","middle",1,"bg-orange","rounded-md"],["nz-row","","nzType","flex","nzAlign","middle",1,"bg-magenta","rounded-md"],["nz-col","","nzXs","24","nzMd","12"],[3,"nzBordered","nzTitle"],["height","275",3,"data"],[3,"nzTitle","nzBordered"],[3,"data","height","titleMap"],[3,"nzBordered","nzCover"],[1,"text-grey"],[1,"list-styled","text-lg","pt-md"],[1,"pt-md","mb0"],["href","//ng.ant.design","target","_blank",1,"text-grey"],[1,"ant-card__body-nopadding",3,"nzTitle","nzBordered"],["nz-row","",1,"py-sm","pr-md","bg-grey-lighter-h","point",3,"nzJustify","nzAlign"],["nzTitle","Todo lists",1,"ant-card__body-nopadding",3,"nzBordered"],["height","35","color","#fff","borderWidth","3","tooltipType","mini",3,"ready","padding","data"],[1,"text-sm","font-weight-normal"],["src","//os.alipayobjects.com/rmsportal/GhjqstwSgxBXrZS.png",1,"img"],["nz-col","",1,"text-center",3,"nzSpan"],[3,"nzSrc"],["nz-col","",3,"nzSpan"],[1,"mb0"],["nz-col","",1,"text-right","pr-md",3,"nzSpan"],["nz-dropdown","","nzPlacement","topRight","nz-icon","","nzType","ellipsis",1,"rotate-90",3,"nzDropdownMenu"],["nz-menu",""],["nz-menu-item",""],["nz-menu-item","",3,"click"]],template:function(e,n){if(e&1&&(a(0,"div",5)(1,"h1"),m(2," Dashboard "),a(3,"small"),m(4,"Welcome !"),l()()(),a(5,"quick-menu")(6,"nz-list",6)(7,"nz-list-item")(8,"a",7),m(9,"Home"),l()(),a(10,"nz-list-item")(11,"a",8),m(12,"Widgets"),l()(),a(13,"nz-list-item")(14,"a",9),m(15,"typography"),l()(),a(16,"nz-list-item")(17,"a",10),m(18,"gridmasonry"),l()(),a(19,"nz-list-item")(20,"a",11),m(21,"success result"),l()()()(),a(22,"div",12)(23,"div",13)(24,"div",14)(25,"div",15)(26,"div",16),m(27,"123,456"),l(),a(28,"p",17),m(29,"Website Traffics"),l()(),a(30,"div",18),C(31,om,1,3,"g2-mini-bar",19),l()()(),a(32,"div",13)(33,"div",20)(34,"div",15)(35,"div",16),m(36,"234,567K"),l(),a(37,"p",17),m(38,"Website Impressions"),l()(),a(39,"div",18),C(40,am,1,3,"g2-mini-bar",19),l()()(),a(41,"div",13)(42,"div",21)(43,"div",15)(44,"div",16),m(45,"$458,778"),l(),a(46,"p",17),m(47,"Total Sales"),l()(),a(48,"div",18),C(49,rm,1,3,"g2-mini-bar",19),l()()(),a(50,"div",13)(51,"div",22)(52,"div",15)(53,"div",16),m(54,"456"),l(),a(55,"p",17),m(56,"Support Tickets"),l()(),a(57,"div",18),C(58,lm,1,3,"g2-mini-bar",19),l()()()(),a(59,"div",12)(60,"div",23)(61,"nz-card",24),h(62,sm,3,0,"ng-template",null,0,B),C(64,mm,1,1,"g2-bar",25),l()(),a(65,"div",23)(66,"nz-card",26),h(67,pm,3,0,"ng-template",null,1,B),C(69,cm,1,4,"g2-timeline",27),l()()(),a(70,"div",12)(71,"div",23)(72,"nz-card",28),h(73,dm,1,0,"ng-template",null,2,B),a(75,"h3"),m(76,"ANT DESIGN"),l(),a(77,"p",29),m(78,"A UI Design Language"),l(),a(79,"ol",30)(80,"li"),m(81,"Designed by experienced team, and showcase dozens of inspiring projects."),l(),a(82,"li"),m(83,"Provide solutions for usual problems that may be encountered while developing enterprise-like complex UIs."),l(),a(84,"li"),m(85,"Dozens of flexible and practical reusable components that increase your productivity."),l()(),a(86,"p",31)(87,"a",32),m(88,"View Site..."),l()()()(),a(89,"div",23)(90,"nz-card",33),h(91,um,3,0,"ng-template",null,3,B),j(93,fm,8,7,"div",34,me),l()(),a(95,"div",23)(96,"nz-card",35),j(97,Cm,17,12,"div",34,me),l()()()),e&2){let o=N(63),s=N(68),u=N(74),f=N(92);r(6),p("nzBordered",!1)("nzSplit",!1),r(25),_(n.webSite?31:-1),r(9),_(n.webSite?40:-1),r(9),_(n.webSite?49:-1),r(9),_(n.webSite?58:-1),r(3),p("nzBordered",!1)("nzTitle",o),r(3),_(n.salesData?64:-1),r(2),p("nzTitle",s)("nzBordered",!1),r(3),_(n.offlineChartData?69:-1),r(3),p("nzBordered",!1)("nzCover",u),r(18),p("nzTitle",f)("nzBordered",!1),r(3),H(n.todoData),r(3),p("nzBordered",!1),r(),H(n.todoData)}},dependencies:[De,Ue,pi,Tt,Mt,Pt,Ft,Nt,_e,Ae,bt,xi,yi,vi,zi,et,ve,xe,xt,Ke,nt,Ge,U,re,yt,Ot,Ve,Je,ft,kt,Te,Dt,wt,St,Me,Et,Bt,Ei,Ni,tt,vt,ke,It,ki,je,Qe,qe,ye,Wt,Le,dt,Li,Qn,Wi,$n,Bi,Ii,wr,Sr,br],encapsulation:2,changeDetection:0});var Xi=wn;var _m=t=>({"background-color":t});function ym(t,i){t&1&&d(0,"nz-skeleton")}function xm(t,i){if(t&1&&(F(0),a(1,"h4"),m(2),l(),P()),t&2){let e=c();r(2),v(e.title)}}function vm(t,i){if(t&1){let e=D();a(0,"div",4),z("click",function(){let o=y(e).$index,s=c(2);return x(s._click(o))}),d(1,"i",5),m(2),a(3,"h6",6),m(4),l()()}if(t&2){let e=i.$implicit,n=c(2);p("nzSpan",24/n.legendData.length),r(),we(We(5,_m,e.checked?e.color:"#aaa")),r(),O(" ",e.name," "),r(2),v(e.value)}}function zm(t,i){if(t&1&&(a(0,"div",2),j(1,vm,5,7,"div",3,me),l()),t&2){let e=c();r(),H(e.legendData)}}var Ro=(()=>{class t extends Xe{legendData=[];title;height=0;padding=[44,30,16,30];hasLegend=!0;tickCount=4;data=[];colors=["#1890FF","#FACC14","#2FC25B","#8543E0","#F04864","#13C2C2","#fa8c16","#a0d911"];clickItem=new te;getHeight(){return this.height-(this.hasLegend?80:22)}install(){let{node:e,padding:n,theme:o,tickCount:s}=this,u=this._chart=new this.winG2.Chart({container:e.nativeElement,autoFit:!0,height:this.getHeight(),padding:n,theme:o});u.coordinate("polar"),u.legend(!1),u.axis("label",{line:null,label:{offset:8},grid:{line:{style:{stroke:"#e9e9e9",lineWidth:1,lineDash:[0,0]}}}}),u.axis("value",{grid:{line:{type:"polygon",style:{stroke:"#e9e9e9",lineWidth:1,lineDash:[0,0]}}}}),u.scale({value:{min:0,tickCount:s}}),u.filter("name",f=>{let T=this.legendData.find(W=>W.name===f);return T?T.checked!==!1:!0}),u.line().position("label*value").color("name",this.colors),u.point().position("label*value").shape("circle").size(3),u.on("point:click",f=>{this.ngZone.run(()=>this.clickItem.emit({item:f.data?.data,ev:f}))}),this.ready.next(u),this.changeData(),u.render()}changeData(){let{_chart:e,data:n}=this;!e||!Array.isArray(n)||n.length<=0||(e.changeData(n),this.ngZone.run(()=>this.genLegend()))}genLegend(){let{hasLegend:e,cdr:n,_chart:o}=this;e&&(this.legendData=o.geometries[0].dataArray.map(s=>({name:s[0]._origin.name,color:s[0].color,checked:!0,value:s.reduce((T,W)=>T+W._origin.value,0)})),n.detectChanges())}_click(e){let{legendData:n,_chart:o}=this;n[e].checked=!n[e].checked,o.render(!0)}onChanges(){this.legendData.forEach(e=>e.checked=!0)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Oe(t)))(o||t)}})();static \u0275cmp=b({type:t,selectors:[["g2-radar"]],hostVars:4,hostBindings:function(n,o){n&2&&(Fe("height",o.height,"px"),I("g2-radar",!0))},inputs:{title:"title",height:[2,"height","height",V],padding:"padding",hasLegend:[2,"hasLegend","hasLegend",Z],tickCount:[2,"tickCount","tickCount",V],data:"data",colors:"colors"},outputs:{clickItem:"clickItem"},exportAs:["g2Radar"],features:[Be],decls:5,vars:3,consts:[["container",""],[4,"nzStringTemplateOutlet"],["nz-row","",1,"g2-radar__legend"],["nz-col","",1,"g2-radar__legend-item",3,"nzSpan"],["nz-col","",1,"g2-radar__legend-item",3,"click","nzSpan"],[1,"g2-radar__legend-dot"],[1,"g2-radar__legend-title"]],template:function(n,o){n&1&&(C(0,ym,1,0,"nz-skeleton"),h(1,xm,3,1,"ng-container",1),d(2,"div",null,0),C(4,zm,3,0,"div",2)),n&2&&(_(o.loaded?-1:0),r(),p("nzStringTemplateOutlet",o.title),r(3),_(o.hasLegend?4:-1))},dependencies:[He,ne,xe,ve],encapsulation:2,changeDetection:0})}return t})(),bm=[Ro],Dr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[k,et,ie,$e,bm]})}return t})();var wm=()=>({"padding-top.px":12,"padding-bottom.px":12}),Mr=()=>["/"];function Dm(t,i){t&1&&(a(0,"nz-breadcrumb")(1,"nz-breadcrumb-item")(2,"a",24),m(3,"\u9996\u9875"),l()(),a(4,"nz-breadcrumb-item")(5,"a",24),m(6,"Dashboard"),l()(),a(7,"nz-breadcrumb-item"),m(8,"\u5DE5\u4F5C\u53F0"),l()()),t&2&&(r(2),p("routerLink",pe(2,Mr)),r(3),p("routerLink",pe(3,Mr)))}function Mm(t,i){t&1&&(a(0,"div",25)(1,"div",26),d(2,"nz-avatar",27),l(),a(3,"div",28)(4,"div",29),m(5,"\u65E9\u5B89\uFF0C\u5C71\u6CBB\uFF0C\u6211\u8981\u5403\u8089\uFF01"),l(),a(6,"div"),m(7,"\u5047\u7816\u5BB6 | \u5730\u7403\uFF0D\u4F1F\u5927\u822A\u9053\uFF0D\u9EC4\u91D1\u6885\u4E3D\u53F7\uFF0D\u53A8\u623F\uFF0D\u5C0F\u5F3A\u90E8\u95E8"),l()()())}function Tm(t,i){t&1&&(a(0,"div",30)(1,"div")(2,"p"),m(3,"\u9879\u76EE\u6570"),l(),a(4,"p"),m(5,"56"),l()(),a(6,"div")(7,"p"),m(8,"\u56E2\u961F\u5185\u6392\u540D"),l(),a(9,"p"),m(10," 8 "),a(11,"span"),m(12," / 24"),l()()(),a(13,"div")(14,"p"),m(15,"\u9879\u76EE\u8BBF\u95EE"),l(),a(16,"p"),m(17,"2,223"),l()()())}function km(t,i){if(t&1){let e=D();a(0,"a",31),z("click",function(){y(e);let o=c();return x(o.msg.success("to"))}),m(1,"\u5168\u90E8\u9879\u76EE"),l()}}function Em(t,i){if(t&1){let e=D();a(0,"div",36),d(1,"nz-avatar",37),a(2,"a",31),z("click",function(){y(e);let o=c().$implicit,s=c();return x(s.msg.info("to"+o.href))}),m(3),l()()}if(t&2){let e=c().$implicit;r(),p("nzSrc",e.logo)("nzSize","small"),r(2),v(e.title)}}function Nm(t,i){if(t&1&&(a(0,"span",35),m(1),S(2,"_date"),l()),t&2){let e=c().$implicit;p("title",co(e.updatedAt)),r(),O(" ",Gt(2,3,e.updatedAt,"fn")," ")}}function Fm(t,i){if(t&1){let e=D();a(0,"div",11)(1,"nz-card",32)(2,"nz-card-meta",33),h(3,Em,4,3,"ng-template",null,4,B),l(),a(5,"div",34)(6,"a",31),z("click",function(){let o=y(e).$implicit,s=c();return x(s.msg.info("show user: "+o.member))}),m(7),l(),C(8,Nm,3,6,"span",35),l()()()}if(t&2){let e=i.$implicit,n=N(4);r(),p("nzBordered",!1),r(),p("nzTitle",n)("nzDescription",e.description),r(5),v(e.member),r(),_(e.updatedAt?8:-1)}}function Pm(t,i){if(t&1){let e=D();a(0,"a",39),z("click",function(){y(e);let o=c().$implicit,s=c();return x(s.msg.success(o.user.name))}),m(1),l(),m(2," \xA0 "),d(3,"span",40)}if(t&2){let e=c().$implicit;r(),v(e.user.name),r(2),p("innerHTML",e.template,Ie)}}function Om(t,i){if(t&1&&(a(0,"span",35),m(1),S(2,"_date"),l()),t&2){let e=c().$implicit;p("title",co(e.updatedAt)),r(),v(Gt(2,3,e.updatedAt,"fn"))}}function Im(t,i){if(t&1&&(a(0,"nz-list-item")(1,"nz-list-item-meta",38),h(2,Pm,4,2,"ng-template",null,5,B)(4,Om,3,6,"ng-template",null,6,B),l()()),t&2){let e=i.$implicit,n=N(3),o=N(5);r(),p("nzAvatar",e.user.avatar)("nzTitle",n)("nzDescription",o)}}function Bm(t,i){if(t&1){let e=D();a(0,"a",31),z("click",function(){let o=y(e).$implicit,s=c();return x(s.msg.success(o.title))}),m(1),l()}if(t&2){let e=i.$implicit;r(),v(e.title)}}function Wm(t,i){if(t&1&&d(0,"g2-radar",20),t&2){let e=c();p("data",e.radarData)("height",343)("hasLegend",!0)}}function Am(t,i){if(t&1){let e=D();a(0,"div",23)(1,"a",31),z("click",function(){let o=y(e).$implicit,s=c();return x(s.msg.success(o.title))}),d(2,"nz-avatar",37),a(3,"span",41),m(4),l()()()}if(t&2){let e=i.$implicit;p("nzSpan",12),r(2),p("nzSrc",e.logo)("nzSize","small"),r(2),v(e.title)}}var Dn=class Dn{constructor(){this.http=g(gt);this.msg=g(Re);this.cdr=g(X);this.notice=[];this.activities=[];this.loading=!0;this.links=[{title:"\u64CD\u4F5C\u4E00",href:""},{title:"\u64CD\u4F5C\u4E8C",href:""},{title:"\u64CD\u4F5C\u4E09",href:""},{title:"\u64CD\u4F5C\u56DB",href:""},{title:"\u64CD\u4F5C\u4E94",href:""},{title:"\u64CD\u4F5C\u516D",href:""}];this.members=[{id:"members-1",title:"\u79D1\u5B66\u642C\u7816\u7EC4",logo:"https://gw.alipayobjects.com/zos/rmsportal/WdGqmHpayyMjiEhcKoVE.png",link:""},{id:"members-2",title:"\u7A0B\u5E8F\u5458\u65E5\u5E38",logo:"https://gw.alipayobjects.com/zos/rmsportal/zOsKZmFRdUtvpqCImOVY.png",link:""},{id:"members-3",title:"\u8BBE\u8BA1\u5929\u56E2",logo:"https://gw.alipayobjects.com/zos/rmsportal/dURIMkkrRFpPgTuzkwnB.png",link:""},{id:"members-4",title:"\u4E2D\u4E8C\u5C11\u5973\u56E2",logo:"https://gw.alipayobjects.com/zos/rmsportal/sfjbOqnsXXJgNCjCzDBL.png",link:""},{id:"members-5",title:"\u9A97\u4F60\u5B66\u8BA1\u7B97\u673A",logo:"https://gw.alipayobjects.com/zos/rmsportal/siCrBXXhmvTQGWPNLBow.png",link:""}]}ngOnInit(){ii(this.http.get("/chart"),this.http.get("/api/notice"),this.http.get("/api/activities")).subscribe(([i,e,n])=>{this.radarData=i.radarData,this.notice=e,this.activities=n.map(o=>(o.template=o.template.split(/@\{([^{}]*)\}/gi).map(s=>o[s]?`<a>${o[s].name}</a>`:s),o)),this.loading=!1,this.cdr.detectChanges()})}};Dn.\u0275fac=function(e){return new(e||Dn)},Dn.\u0275cmp=b({type:Dn,selectors:[["app-dashboard-workplace"]],decls:34,vars:19,consts:[["breadcrumb",""],["content",""],["extra",""],["ingExtra",""],["noticeTitle",""],["activeTitle",""],["activeDescription",""],[3,"breadcrumb","content","extra"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzMd","16"],["nzTitle","\u8FDB\u884C\u4E2D\u7684\u9879\u76EE",1,"ant-card__body-nopadding","mb-lg","project-list",3,"nzExtra","nzBordered","nzLoading"],["nz-card-grid","",1,"project-grid"],["nzTitle","\u52A8\u6001",1,"ant-card__body-nopadding","mb-lg","active-card",3,"nzBordered","nzLoading"],["nzSize","large",1,"activities"],["nz-col","","nzXs","24","nzSm","24","nzMd","8"],["nzTitle","\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",1,"ant-card__body-nopadding","mb-lg",3,"nzBordered"],[1,"links"],["nz-button","",3,"click","nzType","nzSize"],["nz-icon","","nzType","plus"],["nzTitle","XX \u6307\u6570",1,"mb-lg",3,"nzBordered","nzLoading"],[3,"data","height","hasLegend"],["nzTitle","\u56E2\u961F",1,"mb-lg",3,"nzBordered","nzBodyStyle"],[1,"members"],["nz-col","",3,"nzSpan"],[3,"routerLink"],[1,"content"],[1,"avatar"],["nzSrc","https://gw.alipayobjects.com/zos/rmsportal/lctvVCLfRpYCkYxAsiVQ.png"],[1,"desc"],[1,"desc-title"],[1,"page-extra"],[3,"click"],[1,"ant-card__body-nopadding","mb0",3,"nzBordered"],[3,"nzTitle","nzDescription"],[1,"project-item"],[1,"datetime",3,"title"],[1,"card-title"],[3,"nzSrc","nzSize"],[3,"nzAvatar","nzTitle","nzDescription"],[1,"username",3,"click"],[1,"event",3,"innerHTML"],[1,"member"]],template:function(e,n){if(e&1){let o=D();a(0,"page-header",7),h(1,Dm,9,4,"ng-template",null,0,B)(3,Mm,8,0,"ng-template",null,1,B)(5,Tm,18,0,"ng-template",null,2,B),l(),a(7,"div",8)(8,"div",9)(9,"nz-card",10),h(10,km,2,0,"ng-template",null,3,B),j(12,Fm,9,5,"div",11,me),l(),a(14,"nz-card",12)(15,"nz-list",13),j(16,Im,6,3,"nz-list-item",null,me),l()()(),a(18,"div",14)(19,"nz-card",15)(20,"div",16),j(21,Bm,2,1,"a",null,me),a(23,"button",17),z("click",function(){return y(o),x(n.links.push({title:"new titel",href:"href"}))}),d(24,"i",18),a(25,"span"),m(26,"\u6DFB\u52A0"),l()()()(),a(27,"nz-card",19),C(28,Wm,1,3,"g2-radar",20),l(),a(29,"nz-card",21)(30,"div",22)(31,"div",8),j(32,Am,5,4,"div",23,me),l()()()()()}if(e&2){let o=N(2),s=N(4),u=N(6),f=N(11);p("breadcrumb",o)("content",s)("extra",u),r(7),p("nzGutter",24),r(2),p("nzExtra",f)("nzBordered",!1)("nzLoading",n.loading),r(3),H(n.notice),r(2),p("nzBordered",!1)("nzLoading",n.loading),r(2),H(n.activities),r(3),p("nzBordered",!1),r(2),H(n.links),r(2),p("nzType","dashed")("nzSize","small"),r(4),p("nzBordered",!1)("nzLoading",n.loading),r(),_(n.radarData?28:-1),r(),p("nzBordered",!1)("nzBodyStyle",pe(18,wm)),r(2),p("nzGutter",48),r(),H(n.members)}},dependencies:[De,Ue,pi,Tt,Mt,Pt,Ft,Nt,Ua,_e,Ye,Ae,ut,bt,et,ve,xe,xt,Ke,nt,Ge,U,re,yt,Ot,Ve,Je,ft,kt,Te,Dt,wt,St,Me,Et,Ya,Za,Bt,Ei,Ni,Ka,tt,vt,ke,It,ki,je,Qe,qe,Ga,ja,ye,Wt,Le,dt,Dr,Ro,Sa],styles:['[_nghost-%COMP%]     .content{display:flex}[_nghost-%COMP%]     .content .avatar{flex:0 1 72px;margin-bottom:8px}[_nghost-%COMP%]     .content .avatar .ant-avatar{display:block;width:72px;height:72px;border-radius:72px}[_nghost-%COMP%]     .content .desc{position:relative;top:4px;flex:1 1 auto;margin-left:24px;line-height:22px;color:#00000073}[_nghost-%COMP%]     .content .desc .desc-title{margin-bottom:12px;font-size:20px;font-weight:500;line-height:28px;color:#000000d9}[_nghost-%COMP%]     .page-extra{float:right;white-space:nowrap}[_nghost-%COMP%]     .page-extra:before{display:table;content:""}[_nghost-%COMP%]     .page-extra:after{display:table;clear:both;content:""}[_nghost-%COMP%]     .page-extra>div{position:relative;display:inline-block;padding:0 32px}[_nghost-%COMP%]     .page-extra>div:after{content:"";position:absolute;top:8px;right:0;width:1px;height:40px;background-color:#f0f0f0}[_nghost-%COMP%]     .page-extra>div>p:first-child{margin-bottom:4px;font-size:14px;line-height:22px;color:#00000073}[_nghost-%COMP%]     .page-extra>div>p{margin:0;font-size:30px;line-height:38px;color:#000000d9}[_nghost-%COMP%]     .page-extra>div>p>span{font-size:20px;color:#00000073}[_nghost-%COMP%]     .page-extra>div:last-child{padding-right:0}[_nghost-%COMP%]     .page-extra>div:last-child:after{display:none}[_nghost-%COMP%]     .project-list .ant-card-meta-description{overflow:hidden;height:44px;line-height:22px;color:#00000073}[_nghost-%COMP%]     .project-list .card-title{font-size:0}[_nghost-%COMP%]     .project-list .card-title a{display:inline-block;height:24px;margin-left:12px;font-size:14px;line-height:24px;color:#000000d9;vertical-align:top}[_nghost-%COMP%]     .project-list .card-title a:hover{color:#1890ff}[_nghost-%COMP%]     .project-list .project-grid{width:33.33%}[_nghost-%COMP%]     .project-list .project-item{display:flex;height:20px;margin-top:8px;font-size:12px;line-height:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:break-all}[_nghost-%COMP%]     .project-list .project-item a{display:inline-block;flex:1 1 0;color:#00000073;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:break-all}[_nghost-%COMP%]     .project-list .project-item a:hover{color:#1890ff}[_nghost-%COMP%]     .project-list .project-item .datetime{float:right;flex:0 0 auto;color:#00000040}[_nghost-%COMP%]     .activities{padding:0 24px 8px}[_nghost-%COMP%]     .activities .username{color:#000000d9}[_nghost-%COMP%]     .activities .event{font-weight:400}[_nghost-%COMP%]     .members a{display:block;height:24px;margin:12px 0;line-height:24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:break-all}[_nghost-%COMP%]     .members a .member{display:inline-block;max-width:100px;margin-left:12px;font-size:14px;line-height:24px;color:#000000d9;vertical-align:top;transition:all .3s;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:break-all}[_nghost-%COMP%]     .members a:hover span{color:#1890ff}[_nghost-%COMP%]     .datetime{color:#00000040}[_nghost-%COMP%]     .links{padding:20px 0 8px 24px;font-size:0}[_nghost-%COMP%]     .links>a{display:inline-block;width:25%;margin-bottom:13px;font-size:14px;color:#000000d9}[_nghost-%COMP%]     .links>a:hover{color:#1890ff}@media screen and (max-width: 1200px) and (min-width: 992px){[_nghost-%COMP%]     .active-card{margin-bottom:24px}[_nghost-%COMP%]     .members{margin-bottom:0}[_nghost-%COMP%]     .page-extra{margin-left:-44px}[_nghost-%COMP%]     .page-extra>div{padding:0 16px}}@media screen and (max-width: 992px){[_nghost-%COMP%]     .active-card{margin-bottom:24px}[_nghost-%COMP%]     .members{margin-bottom:0}[_nghost-%COMP%]     .page-extra{float:none;margin-right:0}[_nghost-%COMP%]     .page-extra>div{padding:0 16px;text-align:left}[_nghost-%COMP%]     .page-extra>div:after{display:none}}@media screen and (max-width: 768px){[_nghost-%COMP%]     .page-extra{margin-left:-16px}[_nghost-%COMP%]     .project-list .project-grid{width:50%}}@media screen and (max-width: 576px){[_nghost-%COMP%]     .content{display:block}[_nghost-%COMP%]     .content .desc{margin-left:0}[_nghost-%COMP%]     .page-extra>div{float:none}}@media screen and (max-width: 480px){[_nghost-%COMP%]     .project-list .project-grid{width:100%}}'],changeDetection:0});var Yi=Dn;var Mn=class Mn{constructor(){}};Mn.\u0275fac=function(e){return new(e||Mn)},Mn.\u0275cmp=b({type:Mn,selectors:[["app-budget-list"]],decls:6,vars:0,consts:[[1,"budget-list-container"],[1,"budget-list-content"]],template:function(e,n){e&1&&(ce(0,"div",0)(1,"h2"),m(2,"\u9810\u7B97\u7BA1\u7406"),de(),ce(3,"div",1)(4,"p"),m(5,"\u9810\u7B97\u5217\u8868\u9801\u9762 - DDD\u67B6\u69CB"),de()()())},dependencies:[k],styles:[".budget-list-container[_ngcontent-%COMP%]{padding:24px}.budget-list-content[_ngcontent-%COMP%]{margin-top:16px}"]});var Tn=Mn;var kn=class kn{constructor(){}};kn.\u0275fac=function(e){return new(e||kn)},kn.\u0275cmp=b({type:kn,selectors:[["app-budget-detail"]],decls:6,vars:0,consts:[[1,"budget-detail-container"],[1,"budget-detail-content"]],template:function(e,n){e&1&&(ce(0,"div",0)(1,"h2"),m(2,"\u9810\u7B97\u8A73\u60C5"),de(),ce(3,"div",1)(4,"p"),m(5,"\u9810\u7B97\u8A73\u60C5\u9801\u9762 - DDD\u67B6\u69CB"),de()()())},dependencies:[k],styles:[".budget-detail-container[_ngcontent-%COMP%]{padding:24px}.budget-detail-content[_ngcontent-%COMP%]{margin-top:16px}"]});var Ui=kn;var En=class En{constructor(){}};En.\u0275fac=function(e){return new(e||En)},En.\u0275cmp=b({type:En,selectors:[["app-budget-edit"]],decls:6,vars:0,consts:[[1,"budget-edit-container"],[1,"budget-edit-content"]],template:function(e,n){e&1&&(ce(0,"div",0)(1,"h2"),m(2,"\u9810\u7B97\u7DE8\u8F2F"),de(),ce(3,"div",1)(4,"p"),m(5,"\u9810\u7B97\u7DE8\u8F2F\u9801\u9762 - DDD\u67B6\u69CB"),de()()())},dependencies:[k],styles:[".budget-edit-container[_ngcontent-%COMP%]{padding:24px}.budget-edit-content[_ngcontent-%COMP%]{margin-top:16px}"]});var Ki=En;var At=class t{constructor(i,e,n,o,s){this.name=i;this.title=e;this.email=n;this.phone=o;this.isPrimary=s}static create(i){if(!i.name?.trim())throw new Error("Contact name is required");if(!i.email?.trim())throw new Error("Contact email is required");return new t(i.name.trim(),i.title?.trim()||"",i.email.trim(),i.phone?.trim()||"",i.isPrimary||!1)}updateName(i){return new t(i,this.title,this.email,this.phone,this.isPrimary)}updateEmail(i){return new t(this.name,this.title,i,this.phone,this.isPrimary)}setAsPrimary(){return new t(this.name,this.title,this.email,this.phone,!0)}getDisplayName(){return this.title?`${this.name} (${this.title})`:this.name}isValid(){return!!(this.name?.trim()&&this.email?.trim())}};var Kn=(n=>(n.Active="\u555F\u7528\u4E2D",n.Inactive="\u505C\u7528",n.Blacklisted="\u9ED1\u540D\u55AE",n))(Kn||{}),Ji=class t extends jt{constructor(i){super(i)}static create(i){if(!Object.values(Kn).includes(i))throw new Error(`Invalid company status: ${i}`);return new t({value:i})}get value(){return this.props.value}isActive(){return this.props.value==="\u555F\u7528\u4E2D"}isBlacklisted(){return this.props.value==="\u9ED1\u540D\u55AE"}toString(){return this.props.value}};var eo=(n=>(n.Low="\u4F4E",n.Medium="\u4E2D",n.High="\u9AD8",n))(eo||{});var Vt=class t extends jt{constructor(i){super(i)}static create(i=[],e=[],n){let o=i.find(f=>f.isInitial),s=n||o?.id||"",u=s?[{stateId:s,stateName:i.find(f=>f.id===s)?.name||"",timestamp:new Date,operator:"System",comment:"Initial state"}]:[];return new t({states:i,transitions:e,currentStateId:s,executionHistory:u})}get states(){return this.props.states}get transitions(){return this.props.transitions}get currentStateId(){return this.props.currentStateId}get executionHistory(){return this.props.executionHistory}getCurrentState(){return this.states.find(i=>i.id===this.currentStateId)||null}getAvailableTransitions(){return this.transitions.filter(i=>i.from===this.currentStateId)}canTransitionTo(i){return this.getAvailableTransitions().some(e=>e.to===i)}transitionTo(i,e,n,o){if(!this.canTransitionTo(i))throw new Error(`Cannot transition from ${this.currentStateId} to ${i}`);let s=this.states.find(f=>f.id===i);if(!s)throw new Error(`Target state ${i} not found`);let u={stateId:i,stateName:s.name,timestamp:new Date,operator:e,comment:n,transitionId:o};return new t(Se($({},this.props),{currentStateId:i,executionHistory:[...this.executionHistory,u]}))}addState(i){let e=this.states.length===0,n=e?Se($({},i),{isInitial:!0}):i,o=e?i.id:this.currentStateId,s=e?[{stateId:i.id,stateName:i.name,timestamp:new Date,operator:"System",comment:"Initial state"}]:this.executionHistory;return new t({states:[...this.states,n],transitions:this.transitions,currentStateId:o,executionHistory:s})}updateState(i,e){let n=this.states.map(o=>o.id===i?$($({},o),e):o);return new t(Se($({},this.props),{states:n}))}removeState(i){let e=this.states.filter(s=>s.id!==i),n=this.transitions.filter(s=>s.from!==i&&s.to!==i),o=this.currentStateId===i?e.find(s=>s.isInitial)?.id||"":this.currentStateId;return new t({states:e,transitions:n,currentStateId:o,executionHistory:this.executionHistory})}addTransition(i){return new t(Se($({},this.props),{transitions:[...this.transitions,i]}))}removeTransition(i){return new t(Se($({},this.props),{transitions:this.transitions.filter(e=>e.id!==i)}))}setInitialState(i){let e=this.states.map(n=>Se($({},n),{isInitial:n.id===i}));return new t(Se($({},this.props),{states:e,currentStateId:i}))}isFinalState(){return this.getCurrentState()?.isFinal||!1}getStateName(i){let e=this.states.find(n=>n.id===i);return e?e.name:"\u672A\u77E5\u72C0\u614B"}getStateColor(i){let e=i||this.currentStateId,n=this.states.find(o=>o.id===e);return n?n.color:"#f0f0f0"}toPlainObject(){return{states:this.states,transitions:this.transitions,currentStateId:this.currentStateId,executionHistory:this.executionHistory.map(i=>Se($({},i),{timestamp:i.timestamp.toISOString()}))}}static fromPlainObject(i){let e=i.executionHistory?.map(n=>Se($({},n),{timestamp:new Date(n.timestamp)}))||[];return new t({states:i.states||[],transitions:i.transitions||[],currentStateId:i.currentStateId||"",executionHistory:e})}};var Jn=class extends Error{constructor(i){super(`Company with id ${i} not found`),this.name="CompanyNotFoundException"}};var $t=class $t{toResponseDto(i){return{id:i.id,companyName:i.companyName,businessRegistrationNumber:i.businessRegistrationNumber,address:i.address,businessPhone:i.businessPhone,status:i.status,riskLevel:i.riskLevel,fax:i.fax,website:i.website,contacts:i.contacts,createdAt:i.createdAt.toISOString(),updatedAt:i.updatedAt.toISOString()}}toResponseDtoList(i){return i.map(e=>this.toResponseDto(e))}toFormGroup(i){return{companyName:i.companyName,businessRegistrationNumber:i.businessRegistrationNumber,address:i.address,businessPhone:i.businessPhone,status:i.status,riskLevel:i.riskLevel,fax:i.fax||"",website:i.website||""}}toCreateCompanyDto(i){let e=this.validateFormValue(i);return{companyName:e.companyName,businessRegistrationNumber:e.businessRegistrationNumber,address:e.address,businessPhone:e.businessPhone,status:e.status||"\u555F\u7528\u4E2D",riskLevel:e.riskLevel||"\u4F4E",fax:e.fax||"",website:e.website||""}}toUpdateCompanyDto(i){let e=this.validateFormValue(i);return{companyName:e.companyName,businessRegistrationNumber:e.businessRegistrationNumber,address:e.address,businessPhone:e.businessPhone,status:e.status||"\u555F\u7528\u4E2D",riskLevel:e.riskLevel||"\u4F4E",fax:e.fax||"",website:e.website||""}}validateFormValue(i){let e=["companyName","businessRegistrationNumber","address","businessPhone"];for(let n of e){let o=i[n];if(!o||o===null||typeof o!="string")throw new Error(`Invalid or missing required field: ${n}`)}return{companyName:i.companyName,businessRegistrationNumber:i.businessRegistrationNumber,address:i.address,businessPhone:i.businessPhone,status:i.status||"\u555F\u7528\u4E2D",riskLevel:i.riskLevel||"\u4F4E",fax:i.fax||null,website:i.website||null}}fromUnknownFormValue(i){return this.validateFormValue(i)}};$t.\u0275fac=function(e){return new(e||$t)},$t.\u0275prov=ae({token:$t,factory:$t.\u0275fac,providedIn:"root"});var ot=$t;var qt=class qt{constructor(){this.companyRepository=g(it);this.companyMapper=g(ot)}updateCompany(i,e){return this.getCompanyById(i).pipe(Y(n=>{if(e.dynamicWorkflow)try{Vt.fromPlainObject(e.dynamicWorkflow)}catch(s){console.warn("Failed to parse dynamic workflow data:",s)}return n.update({companyName:e.companyName,businessRegistrationNumber:e.businessRegistrationNumber,address:e.address,businessPhone:e.businessPhone,fax:e.fax,website:e.website,status:e.status?Ji.create(e.status).value:void 0})}),Ee(n=>this.companyRepository.update(n)),Y(n=>this.companyMapper.toResponseDto(n)),be(this.handleError(i)))}addContact(i,e){return this.getCompanyById(i).pipe(Y(n=>{let o=At.create({name:e.name,title:e.title,email:e.email,phone:e.phone,isPrimary:e.isPrimary});return n.addContact(o)}),Ee(n=>this.companyRepository.update(n)),Y(n=>this.companyMapper.toResponseDto(n)),be(this.handleError(i)))}updateContact(i,e,n){return this.getCompanyById(i).pipe(Y(o=>{let s=At.create({name:n.name,title:n.title,email:n.email,phone:n.phone,isPrimary:n.isPrimary});return o.updateContact(e,s)}),Ee(o=>this.companyRepository.update(o)),Y(o=>this.companyMapper.toResponseDto(o)),be(this.handleError(i)))}removeContact(i,e){return this.getCompanyById(i).pipe(Y(n=>n.removeContact(e)),Ee(n=>this.companyRepository.update(n)),Y(n=>this.companyMapper.toResponseDto(n)),be(this.handleError(i)))}getCompanyById(i){return this.companyRepository.getById(i).pipe(Jt(e=>e!==null))}handleError(i){return e=>e instanceof Jn?mo(()=>e):mo(()=>new Jn(i))}};qt.\u0275fac=function(e){return new(e||qt)},qt.\u0275prov=ae({token:qt,factory:qt.\u0275fac,providedIn:"root"});var Tr=qt;var Qt=class Qt{constructor(){this.companyRepository=g(it);this.companyMapper=g(ot)}execute(i){let e=(i.contacts||[]).map(o=>At.create(o)),n=Fi.create(Se($({},i),{contacts:e}));return this.companyRepository.create(n).pipe(Y(o=>this.companyMapper.toResponseDto(o)))}};Qt.\u0275fac=function(e){return new(e||Qt)},Qt.\u0275prov=ae({token:Qt,factory:Qt.\u0275fac,providedIn:"root"});var kr=Qt;var Xt=class Xt{constructor(){this.companyRepository=g(it)}execute(i){return this.companyRepository.delete(i)}};Xt.\u0275fac=function(e){return new(e||Xt)},Xt.\u0275prov=ae({token:Xt,factory:Xt.\u0275fac,providedIn:"root"});var Er=Xt;var Zt=class Zt{constructor(){this.companyRepository=g(it);this.companyMapper=g(ot)}execute(){return this.companyRepository.getAll().pipe(Y(i=>this.companyMapper.toResponseDtoList(i)))}};Zt.\u0275fac=function(e){return new(e||Zt)},Zt.\u0275prov=ae({token:Zt,factory:Zt.\u0275fac,providedIn:"root"});var Nr=Zt;var Yt=class Yt{constructor(){this.repository=g(it);this.companiesSignal=se([]);this.loadingSignal=se(!1);this.errorSignal=se(null);this.companies=Q(()=>this.companiesSignal());this.loading=Q(()=>this.loadingSignal());this.error=Q(()=>this.errorSignal());this.hasCompanies=Q(()=>this.companies().length>0)}loadCompanies(){this.companies().length>0&&!this.errorSignal()||(this.loadingSignal.set(!0),this.errorSignal.set(null),this.repository.getAll().pipe(Ce(()=>this.loadingSignal.set(!1)),be(i=>(console.error("\u8F09\u5165\u516C\u53F8\u5217\u8868\u5931\u6557:",i),this.errorSignal.set("\u8F09\u5165\u516C\u53F8\u5217\u8868\u5931\u6557"),q([])))).subscribe(i=>{this.companiesSignal.set(i)}))}createCompany(i){this.loadingSignal.set(!0),this.errorSignal.set(null);let e=Fi.create(i);return this.repository.create(e).pipe(Y(n=>(this.companiesSignal.update(o=>[...o,n]),n)),Ce(()=>this.loadingSignal.set(!1)),be(n=>{throw console.error("\u5275\u5EFA\u516C\u53F8\u5931\u6557:",n),this.errorSignal.set("\u5275\u5EFA\u516C\u53F8\u5931\u6557"),n}))}searchCompanies(i){if(!i.trim())return q(this.companies());let e=this.companies().filter(n=>n.companyName.toLowerCase().includes(i.toLowerCase())||n.businessRegistrationNumber.includes(i));return q(e)}clearError(){this.errorSignal.set(null)}refresh(){this.loadCompanies()}updateCompany(i,e){return this.loadingSignal.set(!0),this.errorSignal.set(null),this.repository.getById(i).pipe(Ee(n=>{if(!n)throw new Error(`Company with id ${i} not found`);let o=n.update(e);return this.repository.update(o).pipe(Y(s=>(this.companiesSignal.update(u=>u.map(f=>f.id===i?s:f)),s)))}),Ce(()=>this.loadingSignal.set(!1)),be(n=>{throw console.error("\u66F4\u65B0\u516C\u53F8\u5931\u6557:",n),this.errorSignal.set("\u66F4\u65B0\u516C\u53F8\u5931\u6557"),n}))}deleteCompany(i){return this.loadingSignal.set(!0),this.errorSignal.set(null),this.repository.delete(i).pipe(Y(()=>{this.companiesSignal.update(e=>e.filter(n=>n.id!==i))}),Ce(()=>this.loadingSignal.set(!1)),be(e=>{throw console.error("\u522A\u9664\u516C\u53F8\u5931\u6557:",e),this.errorSignal.set("\u522A\u9664\u516C\u53F8\u5931\u6557"),e}))}addContact(i,e){return this.loadingSignal.set(!0),this.errorSignal.set(null),this.repository.getById(i).pipe(Ee(n=>{let o=n.addContact(e);return this.repository.update(o).pipe(Y(s=>(this.companiesSignal.update(u=>u.map(f=>f.id===i?s:f)),s)))}),Ce(()=>this.loadingSignal.set(!1)),be(n=>{throw console.error("\u65B0\u589E\u806F\u7D61\u4EBA\u5931\u6557:",n),this.errorSignal.set("\u65B0\u589E\u806F\u7D61\u4EBA\u5931\u6557"),n}))}updateContact(i,e,n){return this.loadingSignal.set(!0),this.errorSignal.set(null),this.repository.getById(i).pipe(Ee(o=>{let s=o.updateContact(e,n);return this.repository.update(s).pipe(Y(u=>(this.companiesSignal.update(f=>f.map(T=>T.id===i?u:T)),u)))}),Ce(()=>this.loadingSignal.set(!1)),be(o=>{throw console.error("\u66F4\u65B0\u806F\u7D61\u4EBA\u5931\u6557:",o),this.errorSignal.set("\u66F4\u65B0\u806F\u7D61\u4EBA\u5931\u6557"),o}))}removeContact(i,e){return this.loadingSignal.set(!0),this.errorSignal.set(null),this.repository.getById(i).pipe(Ee(n=>{let o=n.removeContact(e);return this.repository.update(o).pipe(Y(s=>(this.companiesSignal.update(u=>u.map(f=>f.id===i?s:f)),s)))}),Ce(()=>this.loadingSignal.set(!1)),be(n=>{throw console.error("\u522A\u9664\u806F\u7D61\u4EBA\u5931\u6557:",n),this.errorSignal.set("\u522A\u9664\u806F\u7D61\u4EBA\u5931\u6557"),n}))}};Yt.\u0275fac=function(e){return new(e||Yt)},Yt.\u0275prov=ae({token:Yt,factory:Yt.\u0275fac,providedIn:"root"});var Nn=Yt;var Ut=class Ut{constructor(){this.companyService=g(Nn);this.message=g(Re);this.currentCompanyIdSignal=se("");this.currentWorkflowSignal=se(null);this.loadingSignal=se(!1);this.currentCompanyId=this.currentCompanyIdSignal.asReadonly();this.currentWorkflow=this.currentWorkflowSignal.asReadonly();this.loading=this.loadingSignal.asReadonly()}setCurrentCompany(i){this.currentCompanyIdSignal.set(i),this.loadWorkflow(i)}loadWorkflow(i){this.loadingSignal.set(!0);try{let n=this.companyService.companies().find(u=>u.id===i),o=n&&n.dynamicWorkflow,s=o?Vt.fromPlainObject(o):Vt.create([],[]);this.currentWorkflowSignal.set(s)}catch(e){console.warn("\u8F09\u5165\u5DE5\u4F5C\u6D41\u7A0B\u5931\u6557\uFF0C\u4F7F\u7528\u9810\u8A2D\u5DE5\u4F5C\u6D41\u7A0B:",e),this.currentWorkflowSignal.set(Vt.create([],[]))}finally{this.loadingSignal.set(!1)}}addState(i){let e=this.currentWorkflow(),n=this.currentCompanyId();if(!e||!n)return q();this.loadingSignal.set(!0);try{let o=e.addState(i);return this.currentWorkflowSignal.set(o),this.updateCompanyWorkflow(n,o).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u6DFB\u52A0\u72C0\u614B\u5931\u6557"),q()}}updateState(i,e){let n=this.currentWorkflow(),o=this.currentCompanyId();if(!n||!o)return q();this.loadingSignal.set(!0);try{let s=n.updateState(i,e);return this.currentWorkflowSignal.set(s),this.updateCompanyWorkflow(o,s).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u66F4\u65B0\u72C0\u614B\u5931\u6557"),q()}}removeState(i){let e=this.currentWorkflow(),n=this.currentCompanyId();if(!e||!n)return q();this.loadingSignal.set(!0);try{let o=e.removeState(i);return this.currentWorkflowSignal.set(o),this.updateCompanyWorkflow(n,o).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u522A\u9664\u72C0\u614B\u5931\u6557"),q()}}addTransition(i){let e=this.currentWorkflow(),n=this.currentCompanyId();if(!e||!n)return q();this.loadingSignal.set(!0);try{let o=e.addTransition(i);return this.currentWorkflowSignal.set(o),this.updateCompanyWorkflow(n,o).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u6DFB\u52A0\u8F49\u63DB\u5931\u6557"),q()}}removeTransition(i){let e=this.currentWorkflow(),n=this.currentCompanyId();if(!e||!n)return q();this.loadingSignal.set(!0);try{let o=e.removeTransition(i);return this.currentWorkflowSignal.set(o),this.updateCompanyWorkflow(n,o).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u522A\u9664\u8F49\u63DB\u5931\u6557"),q()}}setInitialState(i){let e=this.currentWorkflow(),n=this.currentCompanyId();if(!e||!n)return q();this.loadingSignal.set(!0);try{let o=e.setInitialState(i);return this.currentWorkflowSignal.set(o),this.updateCompanyWorkflow(n,o).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u8A2D\u7F6E\u521D\u59CB\u72C0\u614B\u5931\u6557"),q()}}executeTransition(i,e,n){let o=this.currentWorkflow(),s=this.currentCompanyId();if(!o||!s)return q();this.loadingSignal.set(!0);try{let u=o.transitionTo(i,e,n);return this.currentWorkflowSignal.set(u),this.updateCompanyWorkflow(s,u).pipe(Ce(()=>this.loadingSignal.set(!1)))}catch{return this.loadingSignal.set(!1),this.message.error("\u72C0\u614B\u8F49\u63DB\u5931\u6557"),q()}}updateCompanyWorkflow(i,e){if(!this.companyService.companies().find(u=>u.id===i))return this.message.error("\u627E\u4E0D\u5230\u6307\u5B9A\u7684\u516C\u53F8"),q();let s={dynamicWorkflow:e.toPlainObject()};return console.log("\u6B63\u5728\u4FDD\u5B58\u5DE5\u4F5C\u6D41\u7A0B\u5230\u6578\u64DA\u5EAB:",{companyId:i,workflowData:e.toPlainObject()}),this.companyService.updateCompany(i,s).pipe(Y(()=>{console.log("\u5DE5\u4F5C\u6D41\u7A0B\u5DF2\u6210\u529F\u4FDD\u5B58\u5230\u6578\u64DA\u5EAB")}),be(u=>{throw console.error("\u66F4\u65B0\u5DE5\u4F5C\u6D41\u7A0B\u5931\u6557:",u),this.message.error("\u4FDD\u5B58\u5DE5\u4F5C\u6D41\u7A0B\u5931\u6557"),u}))}clearCurrentWorkflow(){this.currentCompanyIdSignal.set(""),this.currentWorkflowSignal.set(null)}};Ut.\u0275fac=function(e){return new(e||Ut)},Ut.\u0275prov=ae({token:Ut,factory:Ut.\u0275fac,providedIn:"root"});var to=Ut;var Fn=(t,i)=>i.id;function Rm(t,i){if(t&1){let e=D();a(0,"button",35),z("click",function(){y(e);let o=c();return x(o.updateState())}),d(1,"span",36),m(2," \u66F4\u65B0 "),l()}}function Lm(t,i){if(t&1){let e=D();a(0,"button",37),z("click",function(){y(e);let o=c();return x(o.addState())}),d(1,"span",38),m(2," \u65B0\u589E\u72C0\u614B "),l()}if(t&2){let e=c();p("disabled",!e.stateForm.name.trim())}}function Gm(t,i){if(t&1){let e=D();a(0,"button",39),z("click",function(){y(e);let o=c();return x(o.cancelEdit())}),m(1," \u53D6\u6D88 "),l()}}function jm(t,i){t&1&&(a(0,"nz-tag",44),m(1,"\u521D\u59CB"),l())}function Hm(t,i){t&1&&(a(0,"nz-tag",45),m(1,"\u7D50\u675F"),l())}function $m(t,i){t&1&&(a(0,"nz-tag",46),m(1,"\u7576\u524D"),l())}function qm(t,i){if(t&1&&(a(0,"p",47),m(1),l()),t&2){let e=c().$implicit;r(),v(e.description)}}function Qm(t,i){if(t&1){let e=D();a(0,"div",40)(1,"div",41)(2,"div",42)(3,"h4"),m(4),l(),a(5,"div",43),C(6,jm,2,0,"nz-tag",44),C(7,Hm,2,0,"nz-tag",45),C(8,$m,2,0,"nz-tag",46),l()(),C(9,qm,2,1,"p",47),l(),a(10,"div",48)(11,"button",49),z("click",function(){let o=y(e).$implicit,s=c();return x(s.setAsInitialState(o.id))}),d(12,"span",50),l(),a(13,"button",51),z("click",function(){let o=y(e).$implicit,s=c();return x(s.toggleFinalState(o.id))}),d(14,"span",52),l(),a(15,"button",53),z("click",function(){let o=y(e).$implicit,s=c();return x(s.editState(o))}),d(16,"span",54),l(),a(17,"button",55),z("nzOnConfirm",function(){let o=y(e).$implicit,s=c();return x(s.deleteState(o.id))}),d(18,"span",56),l()()()}if(t&2){let e=i.$implicit,n=c();Fe("background-color",e.color),I("current-state",n.currentStateId()===e.id),r(4),v(e.name),r(2),_(e.isInitial?6:-1),r(),_(e.isFinal?7:-1),r(),_(n.currentStateId()===e.id?8:-1),r(),_(e.description?9:-1)}}function Xm(t,i){t&1&&d(0,"nz-empty",15)}function Zm(t,i){if(t&1&&d(0,"nz-option",20),t&2){let e=i.$implicit;p("nzLabel",e.name)("nzValue",e.id)}}function Ym(t,i){if(t&1&&d(0,"nz-option",20),t&2){let e=i.$implicit;p("nzLabel",e.name)("nzValue",e.id)}}function Um(t,i){if(t&1){let e=D();a(0,"div",27)(1,"div",57)(2,"span",58),m(3),l(),d(4,"span",59),a(5,"span",60),m(6),l(),a(7,"span",61),m(8),l()(),a(9,"button",62),z("nzOnConfirm",function(){let o=y(e).$implicit,s=c();return x(s.deleteTransition(o.id))}),d(10,"span",56),l()()}if(t&2){let e=i.$implicit,n=c();r(3),v(n.getStateName(e.from)),r(3),v(n.getStateName(e.to)),r(2),O("(",e.condition,")")}}function Km(t,i){t&1&&d(0,"nz-empty",28)}function Jm(t,i){if(t&1&&(a(0,"p",65),m(1),l()),t&2){let e=c(2);r(),v(e.getCurrentStateDescription())}}function ep(t,i){if(t&1){let e=D();a(0,"button",69),z("click",function(){let o=y(e).$implicit,s=c(2);return x(s.executeTransition(o.id))}),a(1,"div",70)(2,"div",71),m(3),l(),a(4,"div",72),m(5),l()()()}if(t&2){let e=i.$implicit,n=c(2);r(3),v(e.condition),r(2),O("\u2192 ",n.getStateName(e.to))}}function tp(t,i){t&1&&d(0,"nz-empty",68)}function np(t,i){if(t&1&&(a(0,"div",63)(1,"nz-tag",64),m(2),l(),C(3,Jm,2,1,"p",65),l(),d(4,"nz-divider"),a(5,"div",66)(6,"h4"),m(7,"\u53EF\u57F7\u884C\u7684\u64CD\u4F5C\uFF1A"),l(),j(8,ep,6,2,"button",67,Fn,!1,tp,1,0,"nz-empty",68),l()),t&2){let e=c();r(2),O(" \u7576\u524D\u72C0\u614B\uFF1A",e.getCurrentStateName()," "),r(),_(e.getCurrentStateDescription()?3:-1),r(5),H(e.availableTransitions())}}function ip(t,i){t&1&&d(0,"nz-empty",30)}function op(t,i){t&1&&d(0,"div",76)}function ap(t,i){t&1&&d(0,"div",77)}function rp(t,i){if(t&1&&(a(0,"div",74)(1,"div",75),m(2),l(),C(3,op,1,0,"div",76),C(4,ap,1,0,"div",77),l()),t&2){let e=i.$implicit,n=c(2);Fe("background-color",e.color),I("current-preview-state",n.currentStateId()===e.id),r(2),v(e.name),r(),_(e.isInitial?3:-1),r(),_(e.isFinal?4:-1)}}function lp(t,i){if(t&1&&(a(0,"div",33),j(1,rp,5,7,"div",73,Fn),l()),t&2){let e=c();r(),H(e.states())}}function sp(t,i){t&1&&d(0,"nz-empty",34)}var Pn=class Pn{constructor(){this.message=g(Re);this.workflowService=g(to);this.companyId="";this.editingState=se(null);this.stateForm={name:"",description:""};this.transitionForm={from:"",to:"",condition:""};this.states=Q(()=>this.workflowService.currentWorkflow()?.states||[]);this.transitions=Q(()=>this.workflowService.currentWorkflow()?.transitions||[]);this.currentStateId=Q(()=>this.workflowService.currentWorkflow()?.currentStateId||"");this.loading=this.workflowService.loading;this.availableToStates=Q(()=>this.states().filter(i=>i.id!==this.transitionForm.from));this.availableTransitions=Q(()=>this.transitions().filter(i=>i.from===this.currentStateId()));this.canAddTransition=Q(()=>this.transitionForm.from&&this.transitionForm.to&&this.transitionForm.condition.trim())}ngOnInit(){this.companyId&&this.workflowService.setCurrentCompany(this.companyId)}ngOnDestroy(){this.workflowService.clearCurrentWorkflow()}addState(){if(!this.stateForm.name.trim())return;let i={id:Date.now().toString(),name:this.stateForm.name.trim(),description:this.stateForm.description.trim(),isInitial:this.states().length===0,isFinal:!1,color:`hsl(${Math.random()*360}, 70%, 85%)`};this.workflowService.addState(i).subscribe(()=>{this.resetStateForm(),this.message.success("\u72C0\u614B\u65B0\u589E\u6210\u529F")})}editState(i){this.editingState.set(i),this.stateForm.name=i.name,this.stateForm.description=i.description}updateState(){let i=this.editingState();if(!i||!this.stateForm.name.trim())return;let e={name:this.stateForm.name.trim(),description:this.stateForm.description.trim()};this.workflowService.updateState(i.id,e).subscribe(()=>{this.cancelEdit(),this.message.success("\u72C0\u614B\u66F4\u65B0\u6210\u529F")})}cancelEdit(){this.editingState.set(null),this.resetStateForm()}deleteState(i){this.workflowService.removeState(i).subscribe(()=>{this.message.success("\u72C0\u614B\u522A\u9664\u6210\u529F")})}addTransition(){if(!this.canAddTransition())return;let i={id:Date.now().toString(),from:this.transitionForm.from,to:this.transitionForm.to,condition:this.transitionForm.condition.trim(),action:""};this.workflowService.addTransition(i).subscribe(()=>{this.resetTransitionForm(),this.message.success("\u8F49\u63DB\u898F\u5247\u65B0\u589E\u6210\u529F")})}deleteTransition(i){this.workflowService.removeTransition(i).subscribe(()=>{this.message.success("\u8F49\u63DB\u898F\u5247\u522A\u9664\u6210\u529F")})}executeTransition(i){let e=this.transitions().find(n=>n.id===i);e&&this.workflowService.executeTransition(e.to,"System",`\u57F7\u884C\u8F49\u63DB: ${e.condition}`).subscribe(()=>{this.message.success(`\u72C0\u614B\u5DF2\u8F49\u63DB\u81F3\uFF1A${this.getStateName(e.to)}`)})}setAsInitialState(i){this.workflowService.setInitialState(i).subscribe(()=>{this.message.success("\u521D\u59CB\u72C0\u614B\u8A2D\u5B9A\u6210\u529F")})}toggleFinalState(i){let e=this.states().find(n=>n.id===i);e&&this.workflowService.updateState(i,{isFinal:!e.isFinal}).subscribe(()=>{this.message.success("\u7D42\u6B62\u72C0\u614B\u8A2D\u5B9A\u5DF2\u66F4\u65B0")})}getStateName(i){return this.states().find(n=>n.id===i)?.name||"\u672A\u77E5\u72C0\u614B"}getCurrentStateName(){return this.states().find(e=>e.id===this.currentStateId())?.name||""}getCurrentStateDescription(){return this.states().find(e=>e.id===this.currentStateId())?.description||""}resetStateForm(){this.stateForm.name="",this.stateForm.description=""}resetTransitionForm(){this.transitionForm.from="",this.transitionForm.to="",this.transitionForm.condition=""}};Pn.\u0275fac=function(e){return new(e||Pn)},Pn.\u0275cmp=b({type:Pn,selectors:[["app-workflow-designer"]],inputs:{companyId:"companyId"},decls:71,vars:15,consts:[["addButton",""],[1,"workflow-designer-container"],["nzTitle","\u5DE5\u4F5C\u6D41\u7A0B\u72C0\u614B\u6A5F\u8A2D\u8A08\u5668",1,"header-card"],[1,"designer-grid"],[1,"left-panel"],[1,"state-form-card",3,"nzTitle"],["nz-form","","nzLayout","vertical"],["nzRequired",""],["nz-input","","placeholder","\u4F8B\uFF1A\u8349\u7A3F\u3001\u5DF2\u63D0\u4EA4\u3001\u5BE9\u6838\u4E2D...",3,"ngModelChange","ngModel"],["nz-input","","rows","2","placeholder","\u8AAA\u660E\u6B64\u72C0\u614B\u7684\u7528\u9014...",3,"ngModelChange","ngModel"],["nz-button","","nzType","primary",3,"click",4,"ngIf","ngIfElse"],["nz-button","","nzType","default","class","ml-2",3,"click",4,"ngIf"],["nzTitle","\u72C0\u614B\u5217\u8868",1,"state-list-card"],[1,"state-list"],[1,"state-item",3,"current-state","background-color"],["nzNotFoundContent","\u5C1A\u672A\u65B0\u589E\u4EFB\u4F55\u72C0\u614B"],["nzTitle","\u65B0\u589E\u72C0\u614B\u8F49\u63DB",1,"transition-form-card"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","12"],["placeholder","\u9078\u64C7\u72C0\u614B",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue"],["nz-input","","placeholder","\u4F8B\uFF1A\u63D0\u4EA4\u3001\u5BE9\u6838\u901A\u904E\u3001\u9000\u56DE...",3,"ngModelChange","ngModel"],["nz-button","","nzType","primary","nzBlock","",3,"click","disabled"],["nz-icon","","nzType","arrow-right"],[1,"right-panel"],["nzTitle","\u72C0\u614B\u8F49\u63DB\u898F\u5247",1,"transition-list-card"],[1,"transition-list"],[1,"transition-item"],["nzNotFoundContent","\u5C1A\u672A\u8A2D\u5B9A\u4EFB\u4F55\u8F49\u63DB\u898F\u5247"],["nzTitle","\u6D41\u7A0B\u57F7\u884C\u6A21\u64EC",1,"execution-card"],["nzNotFoundContent","\u8ACB\u5148\u65B0\u589E\u72C0\u614B\u4E26\u8A2D\u5B9A\u521D\u59CB\u72C0\u614B"],["nzTitle","\u6D41\u7A0B\u5716\u9810\u89BD",1,"preview-card"],[1,"workflow-preview"],[1,"states-preview"],["nzNotFoundContent","\u65B0\u589E\u72C0\u614B\u5F8C\uFF0C\u6B64\u8655\u6703\u986F\u793A\u6D41\u7A0B\u5716"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","save"],["nz-button","","nzType","primary",3,"click","disabled"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",1,"ml-2",3,"click"],[1,"state-item"],[1,"state-content"],[1,"state-header"],[1,"state-badges"],["nzColor","green"],["nzColor","red"],["nzColor","blue"],[1,"state-description"],[1,"state-actions"],["nz-button","","nzType","text","nzSize","small","title","\u8A2D\u70BA\u521D\u59CB\u72C0\u614B",3,"click"],["nz-icon","","nzType","play-circle"],["nz-button","","nzType","text","nzSize","small","title","\u5207\u63DB\u7D42\u6B62\u72C0\u614B",3,"click"],["nz-icon","","nzType","stop"],["nz-button","","nzType","text","nzSize","small","title","\u7DE8\u8F2F",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","text","nzSize","small","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u72C0\u614B\u55CE\uFF1F","title","\u522A\u9664",3,"nzOnConfirm"],["nz-icon","","nzType","delete"],[1,"transition-content"],[1,"from-state"],["nz-icon","","nzType","arrow-right",1,"arrow"],[1,"to-state"],[1,"condition"],["nz-button","","nzType","text","nzSize","small","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u8F49\u63DB\u55CE\uFF1F",3,"nzOnConfirm"],[1,"current-state-display"],["nzColor","blue",1,"current-state-tag"],[1,"current-state-desc"],[1,"available-actions"],["nz-button","","nzType","default","nzBlock","",1,"action-button"],["nzNotFoundContent","\u6B64\u72C0\u614B\u7121\u53EF\u57F7\u884C\u7684\u8F49\u63DB\u64CD\u4F5C"],["nz-button","","nzType","default","nzBlock","",1,"action-button",3,"click"],[1,"action-content"],[1,"action-name"],[1,"action-target"],[1,"preview-state",3,"current-preview-state","background-color"],[1,"preview-state"],[1,"preview-state-name"],[1,"initial-indicator"],[1,"final-indicator"]],template:function(e,n){if(e&1){let o=D();a(0,"div",1)(1,"nz-card",2)(2,"p"),m(3,"\u5EFA\u7ACB\u60A8\u81EA\u5DF1\u7684\u5DE5\u4F5C\u6D41\u7A0B\u72C0\u614B\u6A5F"),l()(),a(4,"div",3)(5,"div",4)(6,"nz-card",5)(7,"form",6)(8,"nz-form-item")(9,"nz-form-label",7),m(10,"\u72C0\u614B\u540D\u7A31"),l(),a(11,"nz-form-control")(12,"input",8),he("ngModelChange",function(u){return y(o),ge(n.stateForm.name,u)||(n.stateForm.name=u),x(u)}),l()()(),a(13,"nz-form-item")(14,"nz-form-label"),m(15,"\u72C0\u614B\u8AAA\u660E"),l(),a(16,"nz-form-control")(17,"textarea",9),he("ngModelChange",function(u){return y(o),ge(n.stateForm.description,u)||(n.stateForm.description=u),x(u)}),l()()(),a(18,"nz-form-item")(19,"nz-form-control"),h(20,Rm,3,0,"button",10)(21,Lm,3,1,"ng-template",null,0,B)(23,Gm,2,0,"button",11),l()()()(),a(24,"nz-card",12)(25,"div",13),j(26,Qm,19,9,"div",14,Fn,!1,Xm,1,0,"nz-empty",15),l()(),a(29,"nz-card",16)(30,"form",6)(31,"div",17)(32,"div",18)(33,"nz-form-item")(34,"nz-form-label"),m(35,"\u5F9E\u72C0\u614B"),l(),a(36,"nz-form-control")(37,"nz-select",19),he("ngModelChange",function(u){return y(o),ge(n.transitionForm.from,u)||(n.transitionForm.from=u),x(u)}),j(38,Zm,1,2,"nz-option",20,Fn),l()()()(),a(40,"div",18)(41,"nz-form-item")(42,"nz-form-label"),m(43,"\u5230\u72C0\u614B"),l(),a(44,"nz-form-control")(45,"nz-select",19),he("ngModelChange",function(u){return y(o),ge(n.transitionForm.to,u)||(n.transitionForm.to=u),x(u)}),j(46,Ym,1,2,"nz-option",20,Fn),l()()()()(),a(48,"nz-form-item")(49,"nz-form-label"),m(50,"\u8F49\u63DB\u689D\u4EF6 / \u52D5\u4F5C"),l(),a(51,"nz-form-control")(52,"input",21),he("ngModelChange",function(u){return y(o),ge(n.transitionForm.condition,u)||(n.transitionForm.condition=u),x(u)}),l()()(),a(53,"nz-form-item")(54,"nz-form-control")(55,"button",22),z("click",function(){return y(o),x(n.addTransition())}),d(56,"span",23),m(57," \u65B0\u589E\u8F49\u63DB "),l()()()()()(),a(58,"div",24)(59,"nz-card",25)(60,"div",26),j(61,Um,11,3,"div",27,Fn,!1,Km,1,0,"nz-empty",28),l()(),a(64,"nz-card",29),C(65,np,11,3)(66,ip,1,0,"nz-empty",30),l(),a(67,"nz-card",31)(68,"div",32),C(69,lp,3,0,"div",33)(70,sp,1,0,"nz-empty",34),l()()()()()}if(e&2){let o,s=N(22);r(6),p("nzTitle",n.editingState()?"\u7DE8\u8F2F\u72C0\u614B":"\u65B0\u589E\u72C0\u614B"),r(6),fe("ngModel",n.stateForm.name),r(5),fe("ngModel",n.stateForm.description),r(3),p("ngIf",n.editingState())("ngIfElse",s),r(3),p("ngIf",n.editingState()),r(3),H(n.states()),r(5),p("nzGutter",16),r(6),fe("ngModel",n.transitionForm.from),r(),H(n.states()),r(7),fe("ngModel",n.transitionForm.to),r(),H(n.availableToStates()),r(6),fe("ngModel",n.transitionForm.condition),r(3),p("disabled",!n.canAddTransition()),r(6),H(n.transitions()),r(4),_((o=n.currentStateId())?65:66,o),r(4),_(n.states().length>0?69:70)}},dependencies:[k,nn,De,sn,rn,Ct,ln,_t,_i,_e,Ye,Ae,ut,Te,cn,Ge,Di,Mi,Qe,qe,Me,mn,U,re,ke,ve,xe,un,dn,gn,fn,ye,zt,Le,bi,wi,Si],styles:[".workflow-designer-container[_ngcontent-%COMP%]{padding:24px;background:#f5f5f5;min-height:100vh}.header-card[_ngcontent-%COMP%]{margin-bottom:24px}.designer-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.left-panel[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.state-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.state-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;margin-bottom:8px;border-radius:8px;border:2px solid #e8e8e8;transition:all .2s}.state-item.current-state[_ngcontent-%COMP%]{border-color:#1890ff;box-shadow:0 2px 8px #1890ff33}.state-content[_ngcontent-%COMP%]{flex:1}.state-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.state-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-weight:600}.state-badges[_ngcontent-%COMP%]{display:flex;gap:4px}.state-description[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.state-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.transition-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.transition-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;margin-bottom:8px;background:#fafafa;border-radius:6px}.transition-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.from-state[_ngcontent-%COMP%], .to-state[_ngcontent-%COMP%]{font-weight:600}.arrow[_ngcontent-%COMP%]{color:#1890ff}.condition[_ngcontent-%COMP%]{font-size:12px;color:#666}.current-state-display[_ngcontent-%COMP%]{margin-bottom:16px}.current-state-tag[_ngcontent-%COMP%]{font-size:14px;padding:4px 12px}.current-state-desc[_ngcontent-%COMP%]{margin:8px 0 0;font-size:12px;color:#666}.available-actions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px;font-weight:600}.action-button[_ngcontent-%COMP%]{margin-bottom:8px;height:auto;padding:12px}.action-content[_ngcontent-%COMP%]{text-align:left}.action-name[_ngcontent-%COMP%]{font-weight:600}.action-target[_ngcontent-%COMP%]{font-size:12px;color:#666}.workflow-preview[_ngcontent-%COMP%]{min-height:300px;background:#fafafa;border-radius:8px;padding:16px}.states-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;align-items:flex-start}.preview-state[_ngcontent-%COMP%]{position:relative;padding:12px;border-radius:8px;border:2px solid #e8e8e8;text-align:center;min-width:120px;transition:all .2s}.preview-state.current-preview-state[_ngcontent-%COMP%]{border-color:#1890ff;box-shadow:0 2px 8px #1890ff33}.preview-state-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.initial-indicator[_ngcontent-%COMP%]{position:absolute;top:-8px;left:-8px;width:16px;height:16px;background:#52c41a;border-radius:50%}.final-indicator[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;width:16px;height:16px;background:#ff4d4f;border-radius:50%}.ml-2[_ngcontent-%COMP%]{margin-left:8px}@media (max-width: 1200px){.designer-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0});var no=Pn;var mp=(t,i)=>i.id;function pp(t,i){t&1&&(a(0,"button",15),d(1,"span",16),l())}function cp(t,i){t&1&&(a(0,"div",17),d(1,"nz-spin",18),l())}function dp(t,i){if(t&1){let e=D();a(0,"nz-empty",19)(1,"div",20)(2,"button",6),z("click",function(){y(e);let o=c();return x(o.openModal("create"))}),m(3," \u7ACB\u5373\u65B0\u589E "),l()()()}}function up(t,i){if(t&1){let e=D();a(0,"tr")(1,"td"),m(2),l(),a(3,"td"),m(4),l(),a(5,"td"),m(6),l(),a(7,"td"),m(8),l(),a(9,"td")(10,"nz-tag"),m(11),l()(),a(12,"td")(13,"a",35),z("click",function(){let o=y(e),s=o.$implicit,u=o.$index,f=c(2).$implicit,T=c(2);return x(T.editContact(f.id,u,s))}),m(14,"\u7DE8\u8F2F"),l(),d(15,"nz-divider",36),a(16,"a",37),z("nzOnConfirm",function(){let o=y(e).$index,s=c(2).$implicit,u=c(2);return x(u.deleteContact(s.id,o))}),m(17,"\u522A\u9664"),l()()()}if(t&2){let e=i.$implicit;r(2),v(e.name),r(2),v(e.title),r(2),v(e.email),r(2),v(e.phone),r(3),v(e.isPrimary?"\u662F":"\u5426")}}function fp(t,i){if(t&1){let e=D();a(0,"tr")(1,"td",30)(2,"div",31)(3,"h4"),m(4,"\u806F\u7D61\u4EBA\u7BA1\u7406"),l(),a(5,"nz-table",32)(6,"thead")(7,"tr")(8,"th"),m(9,"\u59D3\u540D"),l(),a(10,"th"),m(11,"\u8077\u7A31"),l(),a(12,"th"),m(13,"Email"),l(),a(14,"th"),m(15,"\u96FB\u8A71"),l(),a(16,"th"),m(17,"\u4E3B\u8981\u806F\u7D61\u4EBA"),l(),a(18,"th",33),m(19,"\u64CD\u4F5C"),l()()(),a(20,"tbody"),j(21,up,18,5,"tr",null,me),l()(),a(23,"button",34),z("click",function(){y(e);let o=c().$implicit,s=c(2);return x(s.addContact(o.id))}),d(24,"span",7),m(25," \u65B0\u589E\u806F\u7D61\u4EBA "),l()()()()}if(t&2){let e=c().$implicit;r(5),p("nzData",e.contacts)("nzShowPagination",!1),r(16),H(e.contacts)}}function gp(t,i){if(t&1){let e=D();a(0,"tr")(1,"td",24),z("nzExpandChange",function(o){let s=y(e).$implicit,u=c(2);return x(u.toggleExpand(s.id,o))}),l(),a(2,"td"),m(3),l(),a(4,"td"),m(5),l(),a(6,"td"),m(7),l(),a(8,"td"),m(9),l(),a(10,"td")(11,"nz-tag"),m(12),l()(),a(13,"td")(14,"nz-tag"),m(15),l()(),a(16,"td"),m(17),l(),a(18,"td")(19,"button",25),z("click",function(){let o=y(e).$implicit,s=c(2);return x(s.openWorkflowDesigner(o.id))}),d(20,"span",26),m(21," \u5DE5\u4F5C\u6D41\u7A0B "),l(),a(22,"button",25),z("click",function(){let o=y(e).$implicit,s=c(2);return x(s.openModal("edit",o))}),d(23,"span",27),l(),a(24,"button",28),z("nzOnConfirm",function(){let o=y(e).$implicit,s=c(2);return x(s.deleteCompany(o.id))}),d(25,"span",29),l()()(),C(26,fp,26,2,"tr")}if(t&2){let e=i.$implicit,n=c(2);r(),p("nzExpand",n.expandSet().has(e.id)),r(2),v(e.companyName),r(2),v(e.businessRegistrationNumber),r(2),v(e.address),r(2),v(e.businessPhone),r(3),v(e.status),r(3),v(e.riskLevel),r(2),v(e.contacts.length),r(9),_(n.expandSet().has(e.id)?26:-1)}}function hp(t,i){if(t&1&&(a(0,"nz-table",21)(1,"thead")(2,"tr"),d(3,"th",22),a(4,"th"),m(5,"\u516C\u53F8\u540D\u7A31"),l(),a(6,"th"),m(7,"\u7D71\u4E00\u7DE8\u865F"),l(),a(8,"th"),m(9,"\u5730\u5740"),l(),a(10,"th"),m(11,"\u96FB\u8A71"),l(),a(12,"th"),m(13,"\u72C0\u614B"),l(),a(14,"th"),m(15,"\u98A8\u96AA\u7B49\u7D1A"),l(),a(16,"th"),m(17,"\u806F\u7D61\u4EBA\u6578"),l(),a(18,"th",23),m(19,"\u64CD\u4F5C"),l()()(),a(20,"tbody"),j(21,gp,27,9,null,null,mp),l()()),t&2){let e=c();p("nzData",e.filteredCompanies())("nzPageSize",10)("nzShowSizeChanger",!0)("nzShowQuickJumper",!0),r(21),H(e.filteredCompanies())}}function Cp(t,i){if(t&1&&d(0,"nz-option",55),t&2){let e=i.$implicit;p("nzLabel",e)("nzValue",e)}}function _p(t,i){if(t&1&&d(0,"nz-option",55),t&2){let e=i.$implicit;p("nzLabel",e)("nzValue",e)}}function yp(t,i){if(t&1&&(F(0),a(1,"form",38)(2,"nz-form-item")(3,"nz-form-label",39),m(4,"\u516C\u53F8\u540D\u7A31"),l(),a(5,"nz-form-control",40),d(6,"input",41),l()(),a(7,"nz-form-item")(8,"nz-form-label",39),m(9,"\u7D71\u4E00\u7DE8\u865F"),l(),a(10,"nz-form-control",42),d(11,"input",43),l()(),a(12,"nz-form-item")(13,"nz-form-label",39),m(14,"\u516C\u53F8\u5730\u5740"),l(),a(15,"nz-form-control",44),d(16,"input",45),l()(),a(17,"nz-form-item")(18,"nz-form-label",39),m(19,"\u806F\u7D61\u96FB\u8A71"),l(),a(20,"nz-form-control",46),d(21,"input",47),l()(),a(22,"div",48)(23,"div",49)(24,"nz-form-item")(25,"nz-form-label"),m(26,"\u72C0\u614B"),l(),a(27,"nz-form-control")(28,"nz-select",50),h(29,Cp,1,2,"nz-option",51),l()()()(),a(30,"div",49)(31,"nz-form-item")(32,"nz-form-label"),m(33,"\u98A8\u96AA\u7B49\u7D1A"),l(),a(34,"nz-form-control")(35,"nz-select",52),h(36,_p,1,2,"nz-option",51),l()()()()(),a(37,"div",48)(38,"div",49)(39,"nz-form-item")(40,"nz-form-label"),m(41,"\u50B3\u771F"),l(),a(42,"nz-form-control"),d(43,"input",53),l()()(),a(44,"div",49)(45,"nz-form-item")(46,"nz-form-label"),m(47,"\u7DB2\u7AD9"),l(),a(48,"nz-form-control"),d(49,"input",54),l()()()()(),P()),t&2){let e=c();r(),p("formGroup",e.form),r(21),p("nzGutter",16),r(7),p("ngForOf",e.statusOptions),r(7),p("ngForOf",e.riskOptions),r(),p("nzGutter",16)}}function xp(t,i){if(t&1&&(F(0),a(1,"form",38)(2,"nz-form-item")(3,"nz-form-label",39),m(4,"\u59D3\u540D"),l(),a(5,"nz-form-control",56),d(6,"input",57),l()(),a(7,"nz-form-item")(8,"nz-form-label"),m(9,"\u8077\u7A31"),l(),a(10,"nz-form-control"),d(11,"input",58),l()(),a(12,"nz-form-item")(13,"nz-form-label",39),m(14,"Email"),l(),a(15,"nz-form-control",59),d(16,"input",60),l()(),a(17,"nz-form-item")(18,"nz-form-label"),m(19,"\u96FB\u8A71"),l(),a(20,"nz-form-control"),d(21,"input",61),l()(),a(22,"nz-form-item")(23,"nz-form-label"),m(24,"\u4E3B\u8981\u806F\u7D61\u4EBA"),l(),a(25,"nz-form-control"),d(26,"nz-switch",62),l()()(),P()),t&2){let e=c();r(),p("formGroup",e.contactForm)}}function vp(t,i){if(t&1&&(F(0),d(1,"app-workflow-designer",63),P()),t&2){let e=c();r(),p("companyId",e.workflowCompanyId())}}var On=class On{constructor(){this.companyService=g(Nn);this.message=g(Re);this.modal=g(_a);this.companyMapper=g(ot);this.fb=g(Ma);this.searchQuery=se("");this.expandSet=se(new Set);this.isSubmitting=se(!1);this.modalVisible=!1;this.modalMode="create";this.editingCompanyId=null;this.contactModalVisible=!1;this.contactMode="add";this.editingContactCompanyId=null;this.editingContactIndex=-1;this.workflowModalVisible=se(!1);this.workflowCompanyId=se("");this.form=this.fb.group({companyName:["",[ht.required]],businessRegistrationNumber:["",[ht.required]],address:["",[ht.required]],businessPhone:["",[ht.required]],status:["\u555F\u7528\u4E2D"],riskLevel:["\u4F4E"],fax:[""],website:[""]});this.contactForm=this.fb.group({name:["",[ht.required]],title:[""],email:["",[ht.required,ht.email]],phone:[""],isPrimary:[!1]});this.statusOptions=Object.values(Kn);this.riskOptions=Object.values(eo);this.isLoading=Q(()=>this.companyService.loading());this.hasCompanies=Q(()=>this.companyService.hasCompanies());this.filteredCompanies=Q(()=>{let i=this.searchQuery().toLowerCase().trim(),e=this.companyService.companies();return i?e.filter(n=>n.companyName.toLowerCase().includes(i)||n.businessRegistrationNumber.includes(i)):e});this.modalTitle=Q(()=>this.modalMode==="create"?"\u65B0\u589E\u5408\u4F5C\u5925\u4F34":"\u7DE8\u8F2F\u5408\u4F5C\u5925\u4F34");this.contactModalTitle=Q(()=>this.contactMode==="add"?"\u65B0\u589E\u806F\u7D61\u4EBA":"\u7DE8\u8F2F\u806F\u7D61\u4EBA")}ngOnInit(){this.companyService.loadCompanies()}openModal(i,e){if(this.modalMode=i,this.modalVisible=!0,i==="edit"&&e){this.editingCompanyId=e.id;let n=this.companyMapper.toResponseDto(e);this.form.patchValue(this.companyMapper.toFormGroup(n))}else this.form.reset({status:"\u555F\u7528\u4E2D",riskLevel:"\u4F4E"})}closeModal(){this.modalVisible=!1,this.form.reset(),this.editingCompanyId=null}handleSubmit(){if(this.form.invalid){this.markFormTouched();return}this.isSubmitting.set(!0);let i=this.form.value;(this.modalMode==="create"?this.companyService.createCompany(this.companyMapper.toCreateCompanyDto(i)):this.companyService.updateCompany(this.editingCompanyId,this.companyMapper.toUpdateCompanyDto(i))).subscribe({next:()=>{this.message.success(`${this.modalMode==="create"?"\u65B0\u589E":"\u66F4\u65B0"}\u5408\u4F5C\u5925\u4F34\u6210\u529F`),this.closeModal()},error:()=>{this.message.error(`${this.modalMode==="create"?"\u65B0\u589E":"\u66F4\u65B0"}\u5408\u4F5C\u5925\u4F34\u5931\u6557`)},complete:()=>{this.isSubmitting.set(!1)}})}addContact(i){this.contactMode="add",this.editingContactCompanyId=i,this.contactModalVisible=!0,this.contactForm.reset({isPrimary:!1})}editContact(i,e,n){this.contactMode="edit",this.editingContactCompanyId=i,this.editingContactIndex=e,this.contactModalVisible=!0,this.contactForm.patchValue(n)}closeContactModal(){this.contactModalVisible=!1,this.contactForm.reset(),this.editingContactCompanyId=null,this.editingContactIndex=-1}handleContactSubmit(){if(this.contactForm.invalid){this.markFormTouched(this.contactForm);return}this.isSubmitting.set(!0);let i=this.contactForm.value;(this.contactMode==="add"?this.companyService.addContact(this.editingContactCompanyId,i):this.companyService.updateContact(this.editingContactCompanyId,this.editingContactIndex,i)).subscribe({next:()=>{this.message.success(`${this.contactMode==="add"?"\u65B0\u589E":"\u66F4\u65B0"}\u806F\u7D61\u4EBA\u6210\u529F`),this.closeContactModal()},error:()=>{this.message.error(`${this.contactMode==="add"?"\u65B0\u589E":"\u66F4\u65B0"}\u806F\u7D61\u4EBA\u5931\u6557`)},complete:()=>{this.isSubmitting.set(!1)}})}deleteContact(i,e){this.companyService.removeContact(i,e).subscribe({next:()=>{this.message.success("\u522A\u9664\u806F\u7D61\u4EBA\u6210\u529F")},error:()=>{this.message.error("\u522A\u9664\u806F\u7D61\u4EBA\u5931\u6557")}})}toggleExpand(i,e){let n=new Set(this.expandSet());e?n.add(i):n.delete(i),this.expandSet.set(n)}deleteCompany(i){this.companyService.deleteCompany(i).subscribe({next:()=>{this.message.success("\u522A\u9664\u5408\u4F5C\u5925\u4F34\u6210\u529F")},error:()=>{this.message.error("\u522A\u9664\u5408\u4F5C\u5925\u4F34\u5931\u6557")}})}openWorkflowDesigner(i){this.workflowCompanyId.set(i),this.workflowModalVisible.set(!0)}closeWorkflowDesigner(){this.workflowModalVisible.set(!1),this.workflowCompanyId.set("")}markFormTouched(i=this.form){Object.keys(i.controls).forEach(e=>{let n=i.get(e);n?.markAsTouched(),n?.updateValueAndValidity()})}};On.\u0275fac=function(e){return new(e||On)},On.\u0275cmp=b({type:On,selectors:[["app-company-list"]],decls:21,vars:13,consts:[["searchButton",""],[1,"company-list-container"],[1,"header"],[1,"actions"],["nzSearch","",1,"search-input",3,"nzAddOnAfter"],["nz-input","","placeholder","\u641C\u5C0B\u516C\u53F8\u540D\u7A31\u6216\u7D71\u7DE8...",3,"ngModelChange","ngModel"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["class","loading-container",4,"ngIf"],["nzNotFoundImage","simple","nzNotFoundContent","\u5C1A\u7121\u5408\u4F5C\u5925\u4F34\u8CC7\u6599",4,"ngIf"],[3,"nzData","nzPageSize","nzShowSizeChanger","nzShowQuickJumper",4,"ngIf"],["nzWidth","600px",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible","nzTitle","nzOkLoading"],[4,"nzModalContent"],["nzWidth","500px",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible","nzTitle","nzOkLoading"],["nzTitle","\u5DE5\u4F5C\u6D41\u7A0B\u8A2D\u8A08\u5668","nzWidth","90%",3,"nzOnCancel","nzVisible","nzFooter"],["nz-button","","nzType","primary","nzSearch",""],["nz-icon","","nzType","search"],[1,"loading-container"],["nzSize","large","nzTip","\u8F09\u5165\u4E2D..."],["nzNotFoundImage","simple","nzNotFoundContent","\u5C1A\u7121\u5408\u4F5C\u5925\u4F34\u8CC7\u6599"],["nz-empty-footer",""],[3,"nzData","nzPageSize","nzShowSizeChanger","nzShowQuickJumper"],["nzWidth","50px"],["nzWidth","160px"],[3,"nzExpandChange","nzExpand"],["nz-button","","nzType","link","nzSize","small",3,"click"],["nz-icon","","nzType","setting"],["nz-icon","","nzType","edit"],["nz-button","","nzType","link","nzSize","small","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u5408\u4F5C\u5925\u4F34\u55CE\uFF1F",3,"nzOnConfirm"],["nz-icon","","nzType","delete"],["colspan","9",1,"contact-table-container"],[1,"contact-section"],["nzSize","small",3,"nzData","nzShowPagination"],["nzWidth","120px"],["nz-button","","nzType","dashed","nzBlock","",1,"add-contact-btn",3,"click"],[3,"click"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","\u662F\u5426\u8981\u522A\u9664\u6B64\u806F\u7D61\u4EBA\uFF1F",3,"nzOnConfirm"],["nz-form","","nzLayout","vertical",3,"formGroup"],["nzRequired",""],["nzErrorTip","\u8ACB\u8F38\u5165\u516C\u53F8\u540D\u7A31"],["nz-input","","formControlName","companyName","placeholder","\u8ACB\u8F38\u5165\u516C\u53F8\u540D\u7A31"],["nzErrorTip","\u8ACB\u8F38\u5165\u7D71\u4E00\u7DE8\u865F"],["nz-input","","formControlName","businessRegistrationNumber","placeholder","\u8ACB\u8F38\u5165\u7D71\u4E00\u7DE8\u865F"],["nzErrorTip","\u8ACB\u8F38\u5165\u516C\u53F8\u5730\u5740"],["nz-input","","formControlName","address","placeholder","\u8ACB\u8F38\u5165\u516C\u53F8\u5730\u5740"],["nzErrorTip","\u8ACB\u8F38\u5165\u806F\u7D61\u96FB\u8A71"],["nz-input","","formControlName","businessPhone","placeholder","\u8ACB\u8F38\u5165\u806F\u7D61\u96FB\u8A71"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","12"],["formControlName","status"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["formControlName","riskLevel"],["nz-input","","formControlName","fax","placeholder","\u8ACB\u8F38\u5165\u50B3\u771F"],["nz-input","","formControlName","website","placeholder","\u8ACB\u8F38\u5165\u7DB2\u7AD9"],[3,"nzLabel","nzValue"],["nzErrorTip","\u8ACB\u8F38\u5165\u59D3\u540D"],["nz-input","","formControlName","name","placeholder","\u8ACB\u8F38\u5165\u59D3\u540D"],["nz-input","","formControlName","title","placeholder","\u8ACB\u8F38\u5165\u8077\u7A31"],["nzErrorTip","\u8ACB\u8F38\u5165\u6709\u6548\u7684Email"],["nz-input","","formControlName","email","placeholder","\u8ACB\u8F38\u5165Email","type","email"],["nz-input","","formControlName","phone","placeholder","\u8ACB\u8F38\u5165\u96FB\u8A71"],["formControlName","isPrimary"],[3,"companyId"]],template:function(e,n){if(e&1){let o=D();a(0,"div",1)(1,"div",2)(2,"h2"),m(3,"\u5408\u4F5C\u5925\u4F34\u7BA1\u7406"),l(),a(4,"div",3)(5,"nz-input-group",4)(6,"input",5),z("ngModelChange",function(u){return y(o),x(n.searchQuery.set(u))}),l()(),h(7,pp,2,0,"ng-template",null,0,B),a(9,"button",6),z("click",function(){return y(o),x(n.openModal("create"))}),d(10,"span",7),m(11," \u65B0\u589E\u5408\u4F5C\u5925\u4F34 "),l()()(),h(12,cp,2,0,"div",8)(13,dp,4,0,"nz-empty",9)(14,hp,23,4,"nz-table",10),a(15,"nz-modal",11),he("nzVisibleChange",function(u){return y(o),ge(n.modalVisible,u)||(n.modalVisible=u),x(u)}),z("nzOnOk",function(){return y(o),x(n.handleSubmit())})("nzOnCancel",function(){return y(o),x(n.closeModal())}),h(16,yp,50,5,"ng-container",12),l(),a(17,"nz-modal",13),he("nzVisibleChange",function(u){return y(o),ge(n.contactModalVisible,u)||(n.contactModalVisible=u),x(u)}),z("nzOnOk",function(){return y(o),x(n.handleContactSubmit())})("nzOnCancel",function(){return y(o),x(n.closeContactModal())}),h(18,xp,27,1,"ng-container",12),l(),a(19,"nz-modal",14),z("nzOnCancel",function(){return y(o),x(n.closeWorkflowDesigner())}),h(20,vp,2,1,"ng-container",12),l()()}if(e&2){let o=N(8);r(5),p("nzAddOnAfter",o),r(),p("ngModel",n.searchQuery()),r(6),p("ngIf",n.isLoading()),r(),p("ngIf",!n.isLoading()&&!n.hasCompanies()),r(),p("ngIf",!n.isLoading()&&n.hasCompanies()),r(),fe("nzVisible",n.modalVisible),p("nzTitle",n.modalTitle())("nzOkLoading",n.isSubmitting()),r(2),fe("nzVisible",n.contactModalVisible),p("nzTitle",n.contactModalTitle())("nzOkLoading",n.isSubmitting()),r(2),p("nzVisible",n.workflowModalVisible())("nzFooter",null)}},dependencies:[k,si,nn,De,sn,rn,Ct,ln,_t,Ue,wa,Da,Je,Oa,Ea,Fa,Na,Ba,Pa,Ia,Te,cn,Va,_e,Ye,Ae,ut,Me,mn,Ve,fi,ui,ke,ve,xe,un,dn,gn,fn,Ge,Di,Mi,je,Ti,wi,Si,U,re,ye,zt,Le,bi,tt,Ha,no],styles:[".company-list-container[_ngcontent-%COMP%]{padding:24px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.actions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.search-input[_ngcontent-%COMP%]{width:300px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.contact-table-container[_ngcontent-%COMP%]{padding:0!important}.contact-section[_ngcontent-%COMP%]{padding:16px}.contact-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:600}.add-contact-btn[_ngcontent-%COMP%]{margin-top:12px;border-style:dashed}"],changeDetection:0});var io=On;var zp=["template"],Or=["*"];function bp(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(3);r(),v(e.nzLabel)}}function Sp(t,i){if(t&1&&(a(0,"div",2),h(1,bp,2,1,"ng-container",5),l()),t&2){let e=c(2);r(),p("nzStringTemplateOutlet",e.nzLabel)}}function wp(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(2);r(),v(e.nzDot)}}function Dp(t,i){if(t&1&&(a(0,"li",1),C(1,Sp,2,1,"div",2),d(2,"div",3),a(3,"div",4),h(4,wp,2,1,"ng-container",5),l(),a(5,"div",6),st(6),l()()),t&2){let e=c();I("ant-timeline-item-right",(e.nzPosition||e.position)==="right")("ant-timeline-item-left",(e.nzPosition||e.position)==="left")("ant-timeline-item-last",e.isLast),r(),_(e.nzLabel?1:-1),r(2),Fe("border-color",e.borderColor),I("ant-timeline-item-head-red",e.nzColor==="red")("ant-timeline-item-head-blue",e.nzColor==="blue")("ant-timeline-item-head-green",e.nzColor==="green")("ant-timeline-item-head-gray",e.nzColor==="gray")("ant-timeline-item-head-custom",!!e.nzDot),r(),p("nzStringTemplateOutlet",e.nzDot)}}function Mp(t,i){if(t&1&&jn(0,2),t&2){c();let e=N(6);p("ngTemplateOutlet",e)}}function Tp(t,i){}function kp(t,i){if(t&1&&h(0,Tp,0,0,"ng-template",2),t&2){let e=i.$implicit;p("ngTemplateOutlet",e.template)}}function Ep(t,i){if(t&1&&jn(0,2),t&2){c();let e=N(6);p("ngTemplateOutlet",e)}}function Np(t,i){t&1&&d(0,"nz-icon",8)}function Fp(t,i){if(t&1&&(F(0),m(1),C(2,Np,1,0,"nz-icon",8),P()),t&2){let e=c(3);r(),O(" ",e.nzPendingDot," "),r(),_(e.nzPendingDot?-1:2)}}function Pp(t,i){if(t&1&&(F(0),m(1),P()),t&2){let e=c(3);r(),O(" ",e.isPendingBoolean?"":e.nzPending," ")}}function Op(t,i){if(t&1&&(a(0,"li",3),d(1,"div",4),a(2,"div",5),h(3,Fp,3,2,"ng-container",6),l(),a(4,"div",7),h(5,Pp,2,1,"ng-container",6),l()()),t&2){let e=c(2);r(3),p("nzStringTemplateOutlet",e.nzPendingDot),r(2),p("nzStringTemplateOutlet",e.nzPending)}}function Ip(t,i){if(t&1&&C(0,Op,6,2,"li",3),t&2){let e=c();_(e.nzPending?0:-1)}}var Go=(()=>{class t{check$=new Ko(1);markForCheck(){this.check$.next()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ae({token:t,factory:t.\u0275fac})}return t})(),Bp=["red","blue","green","grey","gray"];function Wp(t){return Bp.findIndex(i=>i===t)!==-1}var oo=(()=>{class t{cdr=g(X);timelineService=g(Go);template;nzPosition;nzColor="blue";nzDot;nzLabel;isLast=!1;borderColor=null;position;ngOnChanges(e){this.timelineService.markForCheck();let{nzColor:n}=e;n&&this.updateCustomColor()}detectChanges(){this.cdr.detectChanges()}updateCustomColor(){this.borderColor=Wp(this.nzColor)?null:this.nzColor}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["nz-timeline-item"],["","nz-timeline-item",""]],viewQuery:function(n,o){if(n&1&&ct(zp,5),n&2){let s;mt(s=pt())&&(o.template=s.first)}},inputs:{nzPosition:"nzPosition",nzColor:"nzColor",nzDot:"nzDot",nzLabel:"nzLabel"},exportAs:["nzTimelineItem"],features:[Ne],ngContentSelectors:Or,decls:2,vars:0,consts:[["template",""],[1,"ant-timeline-item"],[1,"ant-timeline-item-label"],[1,"ant-timeline-item-tail"],[1,"ant-timeline-item-head"],[4,"nzStringTemplateOutlet"],[1,"ant-timeline-item-content"]],template:function(n,o){n&1&&(lt(),h(0,Dp,7,20,"ng-template",null,0,B))},dependencies:[ie,ne],encapsulation:2,changeDetection:0})}return t})(),jo=(()=>{class t{cdr=g(X);timelineService=g(Go);directionality=g(ci);destroyRef=g(ta);listOfItems;nzMode="left";nzPending;nzPendingDot;nzReverse=!1;isPendingBoolean=!1;timelineItems=[];dir="ltr";hasLabelItem=!1;ngOnChanges(e){let{nzMode:n,nzReverse:o,nzPending:s}=e;(Pr(n)||Pr(o))&&this.updateChildren(),s&&(this.isPendingBoolean=s.currentValue===!0)}ngOnInit(){this.timelineService.check$.pipe(on(this.destroyRef)).subscribe(()=>{this.cdr.markForCheck()}),this.directionality.change?.pipe(on(this.destroyRef)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterContentInit(){this.updateChildren(),this.listOfItems.changes.pipe(on(this.destroyRef)).subscribe(()=>{this.updateChildren()})}updateChildren(){if(this.listOfItems&&this.listOfItems.length){let e=this.listOfItems.length,n=!1;this.listOfItems.forEach((o,s)=>{o.isLast=this.nzReverse?s===0:s===e-1,o.position=Ap(s,this.nzMode),!n&&o.nzLabel&&(n=!0),o.detectChanges()}),this.timelineItems=this.nzReverse?this.listOfItems.toArray().reverse():this.listOfItems.toArray(),this.hasLabelItem=n}else this.timelineItems=[],this.hasLabelItem=!1;this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["nz-timeline"]],contentQueries:function(n,o,s){if(n&1&&aa(s,oo,4),n&2){let u;mt(u=pt())&&(o.listOfItems=u)}},inputs:{nzMode:"nzMode",nzPending:"nzPending",nzPendingDot:"nzPendingDot",nzReverse:[2,"nzReverse","nzReverse",Z]},exportAs:["nzTimeline"],features:[ri([Go]),Ne],ngContentSelectors:Or,decls:8,vars:14,consts:[["pendingTemplate",""],[1,"ant-timeline"],[3,"ngTemplateOutlet"],[1,"ant-timeline-item","ant-timeline-item-pending"],[1,"ant-timeline-item-tail"],[1,"ant-timeline-item-head","ant-timeline-item-head-custom","ant-timeline-item-head-blue"],[4,"nzStringTemplateOutlet"],[1,"ant-timeline-item-content"],["nzType","loading"]],template:function(n,o){n&1&&(lt(),a(0,"ul",1),C(1,Mp,1,1,"ng-container",2),j(2,kp,1,1,null,2,oa),C(4,Ep,1,1,"ng-container",2),l(),h(5,Ip,1,1,"ng-template",null,0,B),st(7)),n&2&&(I("ant-timeline-label",o.hasLabelItem)("ant-timeline-right",!o.hasLabelItem&&o.nzMode==="right")("ant-timeline-alternate",o.nzMode==="alternate"||o.nzMode==="custom")("ant-timeline-pending",!!o.nzPending)("ant-timeline-reverse",o.nzReverse)("ant-timeline-rtl",o.dir==="rtl"),r(),_(o.nzReverse?1:-1),r(),H(o.timelineItems),r(2),_(o.nzReverse?-1:4))},dependencies:[mi,ie,ne,U,re],encapsulation:2,changeDetection:0})}return t})();function Pr(t){return!!(t&&(t.previousValue!==t.currentValue||t.isFirstChange()))}function Ap(t,i){if(i!=="custom")return i==="left"||i==="right"?i:i==="alternate"&&t%2===0?"left":"right"}var Ir=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=L({type:t});static \u0275inj=R({imports:[oo,jo]})}return t})();function Rp(t,i){if(t&1){let e=D();a(0,"div",14),z("click",function(){let o=y(e).$implicit,s=c(3);return x(s.selectTransition(o))}),a(1,"nz-tag",15),m(2),l()()}if(t&2){let e=i.$implicit,n=c(3);I("selected",n.selectedTransition()===e),r(),p("nzColor",n.getStateColor(e)),r(),O(" ",n.getStateName(e)," ")}}function Lp(t,i){if(t&1){let e=D();a(0,"div",16)(1,"form",17)(2,"nz-form-item")(3,"nz-form-label"),m(4,"\u64CD\u4F5C\u4EBA\u54E1"),l(),a(5,"nz-form-control")(6,"input",18),he("ngModelChange",function(o){y(e);let s=c(3);return ge(s.operator,o)||(s.operator=o),x(o)}),l()()(),a(7,"nz-form-item")(8,"nz-form-label"),m(9,"\u5099\u8A3B"),l(),a(10,"nz-form-control")(11,"textarea",19),he("ngModelChange",function(o){y(e);let s=c(3);return ge(s.comment,o)||(s.comment=o),x(o)}),l()()(),a(12,"nz-form-item")(13,"nz-form-control")(14,"button",20),z("click",function(){y(e);let o=c(3);return x(o.executeTransition())}),m(15," \u57F7\u884C\u72C0\u614B\u8F49\u63DB "),l(),a(16,"button",21),z("click",function(){y(e);let o=c(3);return x(o.cancelTransition())}),m(17," \u53D6\u6D88 "),l()()()()()}if(t&2){let e=c(3);r(6),fe("ngModel",e.operator),r(5),fe("ngModel",e.comment),r(3),p("nzLoading",e.isSubmitting())}}function Gp(t,i){if(t&1&&(a(0,"div",10)(1,"h4"),m(2,"\u53EF\u57F7\u884C\u64CD\u4F5C"),l(),a(3,"div",11),h(4,Rp,3,4,"div",12),l(),h(5,Lp,18,3,"div",13),l()),t&2){let e=c(2);r(4),p("ngForOf",e.availableTransitions()),r(),p("ngIf",e.selectedTransition())}}function jp(t,i){t&1&&(a(0,"div",22)(1,"nz-tag",23),d(2,"span",24),m(3," \u6B64\u72C0\u614B\u70BA\u7D42\u7D50\u72C0\u614B\uFF0C\u7121\u6CD5\u9032\u884C\u9032\u4E00\u6B65\u64CD\u4F5C "),l()())}function Hp(t,i){if(t&1&&(a(0,"div",32),m(1),l()),t&2){let e=c(2).$implicit;r(),O(" \u64CD\u4F5C\u4EBA\u54E1: ",e.operator," ")}}function $p(t,i){if(t&1&&(a(0,"div",33),m(1),l()),t&2){let e=c(2).$implicit;r(),O(" \u5099\u8A3B: ",e.comment," ")}}function qp(t,i){if(t&1&&(a(0,"div",29),h(1,Hp,2,1,"div",30)(2,$p,2,1,"div",31),l()),t&2){let e=c().$implicit;r(),p("ngIf",e.operator),r(),p("ngIf",e.comment)}}function Qp(t,i){if(t&1&&(a(0,"nz-timeline-item",15)(1,"div",25)(2,"div",26)(3,"nz-tag",15),m(4),l(),a(5,"span",27),m(6),S(7,"date"),l()(),h(8,qp,3,2,"div",28),l()()),t&2){let e=i.$implicit,n=c(2);p("nzColor",n.getStateColor(e.state)),r(3),p("nzColor",n.getStateColor(e.state)),r(),O(" ",n.getStateName(e.state)," "),r(2),O(" ",Gt(7,5,e.timestamp,"yyyy-MM-dd HH:mm:ss")," "),r(2),p("ngIf",e.operator||e.comment)}}function Xp(t,i){if(t&1&&(F(0),a(1,"div",2)(2,"div",3)(3,"h4"),m(4,"\u7576\u524D\u72C0\u614B"),l(),a(5,"nz-tag",4),d(6,"span",5),m(7),l()(),d(8,"nz-divider"),h(9,Gp,6,2,"div",6)(10,jp,4,0,"div",7),d(11,"nz-divider"),a(12,"div",8)(13,"h4"),m(14,"\u72C0\u614B\u6B77\u53F2"),l(),a(15,"nz-timeline"),h(16,Qp,9,8,"nz-timeline-item",9),l()()(),P()),t&2){let e=c();r(5),p("nzColor",e.currentStateColor()),r(),p("nzType",e.currentStateIcon()),r(),O(" ",e.currentStateName()," "),r(2),p("ngIf",!e.isFinalState()),r(),p("ngIf",e.isFinalState()),r(6),p("ngForOf",e.stateHistory())}}var In=class In{constructor(){this.workflowState=null;this.visible=!1;this.visibleChange=new te;this.stateTransition=new te;this.message=g(Re);this.selectedTransition=se(null);this.isSubmitting=se(!1);this.operator="";this.comment="";this.stateIcons={Draft:"edit",Submitted:"upload",Reviewing:"eye",Approved:"check-circle",Rejected:"close-circle",Processing:"loading",Completed:"check",Cancelled:"stop"};this.currentStateName=Q(()=>this.workflowState?.getStateDisplayName()||"Unknown");this.currentStateColor=Q(()=>this.workflowState?.getStateColor()||"default");this.currentStateIcon=Q(()=>this.stateIcons[this.workflowState?.currentState||"Draft"]||"question");this.isFinalState=Q(()=>this.workflowState?.isFinalState()||!1);this.availableTransitions=Q(()=>this.workflowState?.availableTransitions||[]);this.stateHistory=Q(()=>this.workflowState?.stateHistory||[])}selectTransition(i){this.selectedTransition.set(i),this.operator="",this.comment=""}cancelTransition(){this.selectedTransition.set(null),this.operator="",this.comment=""}executeTransition(){let i=this.selectedTransition();if(!(!i||!this.workflowState)){if(!this.operator.trim()){this.message.error("\u8ACB\u8F38\u5165\u64CD\u4F5C\u4EBA\u54E1");return}if(!this.workflowState.canTransitionTo(i)){this.message.error("\u7121\u6CD5\u8F49\u63DB\u5230\u6B64\u72C0\u614B");return}this.isSubmitting.set(!0),setTimeout(()=>{this.stateTransition.emit({companyId:this.companyId,newState:i,operator:this.operator.trim(),comment:this.comment.trim()||void 0}),this.message.success("\u72C0\u614B\u8F49\u63DB\u6210\u529F"),this.cancelTransition(),this.close(),this.isSubmitting.set(!1)},1e3)}}close(){this.visible=!1,this.visibleChange.emit(!1),this.cancelTransition()}getStateName(i){return this.workflowState?.getStateDisplayName(i)||i}getStateColor(i){return this.workflowState?.getStateColor(i)||"default"}};In.\u0275fac=function(e){return new(e||In)},In.\u0275cmp=b({type:In,selectors:[["app-payment-workflow"]],inputs:{companyId:"companyId",workflowState:"workflowState",visible:"visible"},outputs:{visibleChange:"visibleChange",stateTransition:"stateTransition"},decls:2,vars:2,consts:[["nzTitle","\u8ACB\u6B3E\u5DE5\u4F5C\u6D41\u7A0B\u72C0\u614B","nzWidth","700px",3,"nzVisibleChange","nzOnCancel","nzVisible","nzFooter"],[4,"nzModalContent"],[1,"workflow-container"],[1,"current-state-section"],[1,"state-tag",3,"nzColor"],["nz-icon","",3,"nzType"],["class","transitions-section",4,"ngIf"],["class","final-state-notice",4,"ngIf"],[1,"history-section"],[3,"nzColor",4,"ngFor","ngForOf"],[1,"transitions-section"],[1,"transition-options"],["class","transition-option",3,"selected","click",4,"ngFor","ngForOf"],["class","transition-form",4,"ngIf"],[1,"transition-option",3,"click"],[3,"nzColor"],[1,"transition-form"],["nz-form","","nzLayout","vertical"],["nz-input","","placeholder","\u8ACB\u8F38\u5165\u64CD\u4F5C\u4EBA\u54E1\u59D3\u540D",3,"ngModelChange","ngModel"],["nz-input","","placeholder","\u8ACB\u8F38\u5165\u64CD\u4F5C\u5099\u8A3B\uFF08\u9078\u586B\uFF09","rows","3",3,"ngModelChange","ngModel"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-button","","nzType","default",1,"ml-2",3,"click"],[1,"final-state-notice"],["nzColor","blue"],["nz-icon","","nzType","info-circle"],[1,"history-item"],[1,"history-header"],[1,"history-time"],["class","history-details",4,"ngIf"],[1,"history-details"],["class","history-operator",4,"ngIf"],["class","history-comment",4,"ngIf"],[1,"history-operator"],[1,"history-comment"]],template:function(e,n){e&1&&(a(0,"nz-modal",0),he("nzVisibleChange",function(s){return ge(n.visible,s)||(n.visible=s),s}),z("nzOnCancel",function(){return n.close()}),h(1,Xp,17,6,"ng-container",1),l()),e&2&&(fe("nzVisible",n.visible),p("nzFooter",null))},dependencies:[k,si,nn,De,sn,rn,Ct,ln,_t,_i,Ve,fi,ui,_e,Ye,Ae,ut,Me,mn,Ir,oo,jo,Te,cn,ke,ve,xe,un,dn,gn,fn,U,re,ye,zt,da],styles:[".workflow-container[_ngcontent-%COMP%]{padding:16px 0}.current-state-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .transitions-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .history-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:600;color:#262626}.state-tag[_ngcontent-%COMP%]{font-size:14px;padding:4px 12px;border-radius:6px}.state-tag[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{margin-right:6px}.transition-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.transition-option[_ngcontent-%COMP%]{cursor:pointer;padding:4px;border-radius:4px;transition:background-color .2s}.transition-option[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.transition-option.selected[_ngcontent-%COMP%]{border:1px solid #1890ff}.transition-form[_ngcontent-%COMP%]{padding:16px;background-color:#fafafa;border-radius:6px;margin-top:16px}.final-state-notice[_ngcontent-%COMP%]{text-align:center;padding:16px;background-color:#f6ffed;border-radius:6px}.history-item[_ngcontent-%COMP%]{margin-bottom:8px}.history-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.history-time[_ngcontent-%COMP%]{font-size:12px;color:#8c8c8c}.history-details[_ngcontent-%COMP%]{font-size:12px;color:#595959;margin-left:8px}.history-operator[_ngcontent-%COMP%]{margin-bottom:2px}.history-comment[_ngcontent-%COMP%]{font-style:italic}.ml-2[_ngcontent-%COMP%]{margin-left:8px}"],changeDetection:0});var Br=In;var Bn=class Bn{constructor(){}};Bn.\u0275fac=function(e){return new(e||Bn)},Bn.\u0275cmp=b({type:Bn,selectors:[["app-task-list"]],decls:6,vars:0,consts:[[1,"task-list-container"],[1,"task-list-content"]],template:function(e,n){e&1&&(ce(0,"div",0)(1,"h2"),m(2,"\u4EFB\u52D9\u7BA1\u7406"),de(),ce(3,"div",1)(4,"p"),m(5,"\u4EFB\u52D9\u5217\u8868\u9801\u9762 - DDD\u67B6\u69CB"),de()()())},dependencies:[k],styles:[".task-list-container[_ngcontent-%COMP%]{padding:24px}.task-list-content[_ngcontent-%COMP%]{margin-top:16px}"]});var Wn=Bn;var An=class An{constructor(){}};An.\u0275fac=function(e){return new(e||An)},An.\u0275cmp=b({type:An,selectors:[["app-task-detail"]],decls:6,vars:0,consts:[[1,"task-detail-container"],[1,"task-detail-content"]],template:function(e,n){e&1&&(ce(0,"div",0)(1,"h2"),m(2,"\u4EFB\u52D9\u8A73\u60C5"),de(),ce(3,"div",1)(4,"p"),m(5,"\u4EFB\u52D9\u8A73\u60C5\u9801\u9762 - DDD\u67B6\u69CB"),de()()())},dependencies:[k],styles:[".task-detail-container[_ngcontent-%COMP%]{padding:24px}.task-detail-content[_ngcontent-%COMP%]{margin-top:16px}"]});var ao=An;var Vn=class Vn{constructor(){}};Vn.\u0275fac=function(e){return new(e||Vn)},Vn.\u0275cmp=b({type:Vn,selectors:[["app-task-edit"]],decls:6,vars:0,consts:[[1,"task-edit-container"],[1,"task-edit-content"]],template:function(e,n){e&1&&(ce(0,"div",0)(1,"h2"),m(2,"\u4EFB\u52D9\u7DE8\u8F2F"),de(),ce(3,"div",1)(4,"p"),m(5,"\u4EFB\u52D9\u7DE8\u8F2F\u9801\u9762 - DDD\u67B6\u69CB"),de()()())},dependencies:[k],styles:[".task-edit-container[_ngcontent-%COMP%]{padding:24px}.task-edit-content[_ngcontent-%COMP%]{margin-top:16px}"]});var ro=Vn;var xC=[{path:"",redirectTo:"v1",pathMatch:"full"},{path:"v1",component:Xi},{path:"analysis",component:Gi},{path:"monitor",component:Qi},{path:"workplace",component:Yi},{path:"contract-management",children:[{path:"",component:er},{path:"create",component:tr}]},{path:"task-management",component:Wn},{path:"budget-management",component:Tn},{path:"business-partner",component:io}];export{xC as routes};
