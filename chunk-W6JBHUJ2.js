import{k as _e,m as Ce,n as ze,o as fe}from"./chunk-O5M2VN7A.js";import{A as re,C as oe,D as ae,E as le,G as se,d as q,e as K,v as ne,y as ie}from"./chunk-C6HMYUIG.js";import{h as W}from"./chunk-KZ3BMPVL.js";import{d as G}from"./chunk-B4BFXAHO.js";import{D as U,M as X,O as Y,Q as Z,R as ee,S as te,Y as me,_ as ce,ba as ue,i as H,l as J,r as Q}from"./chunk-GFRWIPKG.js";import{Ab as u,Eg as O,Gg as j,Ha as l,Hg as R,Ma as g,Oa as N,Oc as L,Pb as s,Qb as _,Rb as y,Sc as I,Zh as pe,_h as de,cc as M,db as v,fb as x,hb as E,hc as w,ib as P,jb as h,jc as D,ka as C,kb as p,la as z,lb as n,mb as r,nb as d,ng as B,og as V,pc as k,ra as S,ub as b,wd as A,xb as c,xg as $}from"./chunk-AV6MXKVK.js";import{i as F}from"./chunk-57BLH6QZ.js";var xe=()=>[10,20,50],Se=(a,t)=>t.id;function Pe(a,t){if(a&1&&d(0,"nz-option",8),a&2){let e=t.$implicit;p("nzValue",e)("nzLabel",e)}}function he(a,t){if(a&1&&(n(0,"tr")(1,"td",13),d(2,"nz-empty",14),r()()),a&2){let e=u();l(2),p("nzNotFoundContent",e.searchTerm()||e.statusFilter()?"\u6C92\u6709\u627E\u5230\u7B26\u5408\u689D\u4EF6\u7684\u5408\u4F5C\u5925\u4F34":"\u5C1A\u672A\u65B0\u589E\u4EFB\u4F55\u5408\u4F5C\u5925\u4F34")}}function ye(a,t){if(a&1&&(n(0,"div",19),s(1),r()),a&2){let e=u().$implicit;l(),_(e.website)}}function Te(a,t){if(a&1&&(n(0,"div")(1,"div",31),s(2),r(),n(3,"div",18),s(4),r(),n(5,"div",19),s(6),r()()),a&2){let e=t;l(2),_(e.name),l(2),_(e.role),l(2),_(e.email)}}function Fe(a,t){a&1&&(n(0,"span",20),s(1,"\u7121\u806F\u7D61\u4EBA"),r())}function Ne(a,t){if(a&1){let e=b();n(0,"tr",16),c("click",function(){let o=C(e).$implicit,m=u(2);return z(m.viewPartner(o.id))}),n(1,"td")(2,"div")(3,"div",17),s(4),r(),n(5,"div",18),s(6),r(),v(7,ye,2,1,"div",19),r()(),n(8,"td"),v(9,Te,7,3,"div")(10,Fe,2,0,"span",20),r(),n(11,"td")(12,"nz-tag",21),s(13),r()(),n(14,"td")(15,"span",22),s(16),w(17,"date"),r()(),n(18,"td",23),c("click",function(o){return C(e),z(o.stopPropagation())}),n(19,"div",24)(20,"button",25),c("click",function(){let o=C(e).$implicit,m=u(2);return z(m.viewPartner(o.id))}),d(21,"nz-icon",26),r(),n(22,"button",27),c("click",function(){let o=C(e).$implicit,m=u(2);return z(m.editPartner(o.id))}),d(23,"nz-icon",28),r(),n(24,"button",29),c("click",function(){let o=C(e).$implicit,m=u(2);return z(m.deletePartner(o))}),d(25,"nz-icon",30),r()()()()}if(a&2){let e,i=t.$implicit,o=u(2);l(4),_(i.companyName),l(2),_(i.industry),l(),x(i.website?7:-1),l(2),x((e=o.getPrimaryContact(i.contacts))?9:10,e),l(3),p("nzColor",o.getStatusColor(i.status)),l(),y(" ",o.getStatusText(i.status)," "),l(3),y(" ",D(17,7,i.joinedDate,"yyyy/MM/dd")," ")}}function Ee(a,t){if(a&1&&P(0,Ne,26,10,"tr",15,Se),a&2){let e=u();h(e.filteredPartners())}}var f=class f{constructor(t,e,i,o){this.partnerService=t;this.router=e;this.modal=i;this.message=o;this.searchTerm=S("");this.statusFilter=S(null);this.partnerStatuses=_e;this.allPartners=this.partnerService.getPartnersSignal();this.filteredPartners=k(()=>{let t=this.allPartners(),e=this.searchTerm().toLowerCase().trim(),i=this.statusFilter();return t.filter(o=>{let m=!e||o.companyName.toLowerCase().includes(e)||o.industry.toLowerCase().includes(e)||o.contacts.some(T=>T.name.toLowerCase().includes(e)||T.email.toLowerCase().includes(e)),ve=!i||o.status===i;return m&&ve})});this.getPrimaryContact=ze}createPartner(){this.router.navigate(["/business-partners/create"])}viewPartner(t){this.router.navigate(["/business-partners",t])}editPartner(t){this.router.navigate(["/business-partners",t,"edit"])}deletePartner(t){this.modal.confirm({nzTitle:"\u78BA\u8A8D\u522A\u9664",nzContent:`\u78BA\u5B9A\u8981\u522A\u9664\u5408\u4F5C\u5925\u4F34\u300C${t.companyName}\u300D\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002`,nzOkText:"\u522A\u9664",nzOkType:"primary",nzOkDanger:!0,nzCancelText:"\u53D6\u6D88",nzOnOk:()=>F(this,null,function*(){try{yield this.partnerService.deletePartner(t.id),this.message.success("\u5408\u4F5C\u5925\u4F34\u5DF2\u6210\u529F\u522A\u9664")}catch(e){console.error("Delete partner error:",e),this.message.error("\u522A\u9664\u5408\u4F5C\u5925\u4F34\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66")}})})}getStatusColor(t){return Ce(t)}getStatusText(t){return{Active:"\u6D3B\u8E8D",Inactive:"\u975E\u6D3B\u8E8D",Pending:"\u5F85\u5BE9\u6838"}[t]||t}};f.\u0275fac=function(e){return new(e||f)(g(fe),g(A),g(W),g(G))},f.\u0275cmp=N({type:f,selectors:[["app-partner-list"]],decls:29,vars:9,consts:[["nzTitle","\u5408\u4F5C\u5925\u4F34\u7BA1\u7406"],[1,"search-controls","mb-4"],[1,"flex","flex-wrap","gap-4","items-center"],[1,"flex-1","min-w-64"],["nzPrefixIcon","search"],["nz-input","","placeholder","\u641C\u5C0B\u516C\u53F8\u540D\u7A31\u3001\u884C\u696D\u6216\u806F\u7D61\u4EBA...",1,"w-full",3,"ngModelChange","ngModel"],[1,"w-48"],["nzPlaceHolder","\u7BE9\u9078\u72C0\u614B","nzAllowClear","",1,"w-full",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],["nz-button","","nzType","primary",1,"flex","items-center",3,"click"],["nzType","plus"],["nzShowQuickJumper","",3,"nzData","nzPageSize","nzShowPagination","nzShowSizeChanger","nzPageSizeOptions"],["nzWidth","120px"],["colspan","5",1,"text-center","py-8"],["nzNotFoundImage","simple",3,"nzNotFoundContent"],[1,"cursor-pointer","hover:bg-gray-50","transition-colors"],[1,"cursor-pointer","hover:bg-gray-50","transition-colors",3,"click"],[1,"font-medium","text-base"],[1,"text-gray-500","text-sm"],[1,"text-blue-500","text-sm"],[1,"text-gray-400"],[3,"nzColor"],[1,"text-gray-600"],[3,"click"],[1,"flex","gap-2"],["nz-button","","nzType","text","nzSize","small","title","\u6AA2\u8996",3,"click"],["nzType","eye"],["nz-button","","nzType","text","nzSize","small","title","\u7DE8\u8F2F",3,"click"],["nzType","edit"],["nz-button","","nzType","text","nzSize","small","nzDanger","","title","\u522A\u9664",3,"click"],["nzType","delete"],[1,"font-medium"]],template:function(e,i){e&1&&(n(0,"nz-card",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nz-input-group",4)(5,"input",5),c("ngModelChange",function(m){return i.searchTerm.set(m)}),r()()(),n(6,"div",6)(7,"nz-select",7),c("ngModelChange",function(m){return i.statusFilter.set(m)}),P(8,Pe,1,2,"nz-option",8,E),r()(),n(10,"button",9),c("click",function(){return i.createPartner()}),d(11,"nz-icon",10),s(12," \u65B0\u589E\u5408\u4F5C\u5925\u4F34 "),r()()(),n(13,"nz-table",11)(14,"thead")(15,"tr")(16,"th"),s(17,"\u516C\u53F8\u8CC7\u8A0A"),r(),n(18,"th"),s(19,"\u4E3B\u8981\u806F\u7D61\u4EBA"),r(),n(20,"th"),s(21,"\u72C0\u614B"),r(),n(22,"th"),s(23,"\u52A0\u5165\u65E5\u671F"),r(),n(24,"th",12),s(25,"\u64CD\u4F5C"),r()()(),n(26,"tbody"),v(27,he,3,1,"tr")(28,Ee,2,0),r()()()),e&2&&(l(5),p("ngModel",i.searchTerm()),l(2),p("ngModel",i.statusFilter()),l(),h(i.partnerStatuses),l(5),p("nzData",i.filteredPartners())("nzPageSize",10)("nzShowPagination",!0)("nzShowSizeChanger",!0)("nzPageSizeOptions",M(8,xe)),l(14),x(i.filteredPartners().length===0?27:28))},dependencies:[I,U,H,J,Q,de,pe,se,oe,ne,ie,le,re,ae,ue,me,ce,te,Z,ee,K,q,R,j,$,O,V,B,Y,X,L],encapsulation:2,changeDetection:0});var ge=f;export{ge as a};
